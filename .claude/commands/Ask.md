---
description: 需求澄清与问题诊断 - 通过主动提问引导用户逐步澄清需求或定位问题
---

# 需求澄清与问题诊断指令

本指令用于在 PRD 需求澄清和 Debug 场景下，通过主动提问引导用户逐步澄清需求或定位问题根因。

**🎯 核心目标**：通过结构化提问，帮助用户理清思路，明确需求或定位问题

---

## 🔴 执行前必读

1. **Rules/RulesReadMe.md** - 项目通用规则
2. **WORKSPACE.md** - 当前工作状态

---

## 📋 使用场景

### 场景一：PRD 需求澄清
当用户提出一个新功能需求，但描述不够清晰时使用。

### 场景二：Bug 问题诊断
当用户报告一个 Bug，但信息不足以定位问题时使用。

### 场景三：技术方案讨论
当用户想要讨论技术实现方案，但需求边界不明确时使用。

---

## 🎯 执行策略

### 核心原则

1. **一次只问一个问题**：避免信息过载，让用户专注回答
2. **由浅入深**：从基础问题开始，逐步深入细节
3. **开放式优先**：先用开放式问题了解全貌，再用封闭式问题确认细节
4. **及时总结**：每3-5轮对话后，总结已获取的信息
5. **引导而非审问**：保持友好的对话氛围

### 提问技巧

| 技巧 | 说明 | 示例 |
|------|------|------|
| 5W1H | Who/What/When/Where/Why/How | "这个功能主要是给谁用的？" |
| 场景化 | 用具体场景引导思考 | "能描述一个典型的使用场景吗？" |
| 对比法 | 通过对比明确边界 | "和现有的 XX 功能有什么区别？" |
| 假设法 | 用假设验证理解 | "如果我理解正确，你是想要...？" |
| 优先级 | 明确重要程度 | "这几个功能点，哪个是必须有的？" |

---

## 📝 PRD 需求澄清流程

### 第一阶段：理解背景（1-3个问题）

**目标**：了解需求的来源和动机

推荐问题：
- "这个需求是怎么产生的？是用户反馈还是业务规划？"
- "目前没有这个功能，用户是怎么解决这个问题的？"
- "这个功能预期能带来什么价值？"

### 第二阶段：明确范围（2-4个问题）

**目标**：确定功能的边界和核心场景

推荐问题：
- "能描述一个最典型的使用场景吗？"
- "这个功能的目标用户是谁？"
- "有哪些情况是明确不需要支持的？"
- "和现有的 XX 功能有什么关联？"

### 第三阶段：细化需求（3-5个问题）

**目标**：获取实现所需的具体细节

推荐问题：
- "用户操作的入口在哪里？"
- "操作完成后，用户期望看到什么反馈？"
- "如果操作失败，应该如何处理？"
- "有没有性能或体验上的特殊要求？"
- "需要支持哪些边界情况？"

### 第四阶段：确认优先级（1-2个问题）

**目标**：明确 MVP 范围和迭代计划

推荐问题：
- "如果要分阶段实现，第一版必须包含哪些功能？"
- "这些功能点的优先级是怎样的？"

### 阶段性总结模板

```markdown
## 📋 需求澄清进度

### 已确认信息
- **需求背景**：[背景描述]
- **目标用户**：[用户描述]
- **核心场景**：[场景描述]
- **功能范围**：[范围描述]

### 待确认问题
1. [问题1]
2. [问题2]

### 下一步
[下一个要问的问题]
```

---

## 🐛 Bug 问题诊断流程

### 第一阶段：复现信息（2-3个问题）

**目标**：获取复现问题所需的基本信息

推荐问题：
- "能描述一下问题发生时你在做什么操作吗？"
- "这个问题是每次都出现，还是偶尔出现？"
- "问题是从什么时候开始出现的？之前正常吗？"

### 第二阶段：环境信息（1-2个问题）

**目标**：了解问题发生的环境

推荐问题：
- "你使用的是什么设备/系统版本？"
- "最近有没有更新过应用或做过什么配置变更？"

### 第三阶段：现象细节（2-4个问题）

**目标**：获取问题的具体表现

推荐问题：
- "问题发生时，界面上显示了什么？有没有错误提示？"
- "有没有截图或录屏可以分享？"
- "问题发生后，应用的状态是怎样的？能继续使用吗？"
- "有没有尝试过什么方法来解决？效果如何？"

### 第四阶段：关联分析（1-2个问题）

**目标**：寻找问题的关联因素

推荐问题：
- "其他类似的功能有没有同样的问题？"
- "有没有发现什么规律，比如特定时间或特定操作后更容易出现？"

### 阶段性总结模板

```markdown
## 🐛 问题诊断进度

### 已收集信息
- **问题描述**：[描述]
- **复现步骤**：[步骤]
- **发生频率**：[频率]
- **环境信息**：[环境]
- **错误现象**：[现象]

### 初步分析
- **可能原因**：[分析]
- **影响范围**：[范围]

### 待确认问题
1. [问题1]
2. [问题2]

### 下一步
[下一个要问的问题或要验证的假设]
```

---

## 💬 对话示例

### PRD 需求澄清示例

```
用户：我想加一个导出功能

AI：好的，导出功能听起来很实用。我想先了解一下背景：
    这个导出功能主要是想导出什么内容呢？是联系人数据、对话记录，还是其他的？

用户：主要是联系人的标签和事实数据

AI：明白了，是联系人画像相关的数据。那我再确认一下：
    导出后的数据主要用来做什么？是备份、迁移到其他设备，还是用于其他分析？

用户：主要是备份，怕数据丢失

AI：了解，备份需求很重要。关于导出格式：
    你期望导出成什么格式？比如 JSON、Excel、或者纯文本？

用户：JSON 就行

AI：好的。让我总结一下目前了解到的信息：

    📋 需求澄清进度
    
    已确认信息：
    - 需求背景：用户担心数据丢失，需要备份功能
    - 导出内容：联系人的标签和事实数据
    - 导出格式：JSON
    
    待确认问题：
    1. 导出操作的入口放在哪里比较方便？设置页面还是联系人详情页？
    2. 是否需要支持选择性导出（比如只导出某个联系人）？
    
    我们先确认第一个问题：你觉得导出入口放在哪里比较顺手？
```

### Bug 诊断示例

```
用户：悬浮球点击没反应

AI：遇到这个问题确实挺困扰的。我来帮你排查一下：
    这个问题是每次点击都没反应，还是偶尔会出现？

用户：每次都没反应

AI：好的，是稳定复现的问题。那我再确认一下：
    点击悬浮球时，悬浮球有没有任何视觉反馈？比如颜色变化或者动画？

用户：没有任何反应，就像点了个图片一样

AI：明白了，完全没有响应。关于这个问题出现的时间：
    这个问题是一直存在，还是最近才开始出现的？如果是最近，大概是什么时候开始的？

用户：好像是昨天更新后开始的

AI：这是个重要线索。让我总结一下目前的信息：

    🐛 问题诊断进度
    
    已收集信息：
    - 问题描述：悬浮球点击无任何响应
    - 发生频率：每次都出现（稳定复现）
    - 视觉反馈：无任何反馈
    - 出现时间：昨天更新后开始
    
    初步分析：
    - 可能原因：更新引入的回归问题，可能是点击事件监听器未正确绑定
    - 影响范围：悬浮球核心交互功能
    
    我想再确认一个细节：悬浮球能正常拖动吗？还是拖动也没反应？
```

---

## ⚠️ 注意事项

1. **避免连续提问**：每次只问一个问题，等用户回答后再继续
2. **适时总结**：每3-5轮对话后总结一次，确保理解一致
3. **灵活调整**：根据用户回答调整提问方向，不要死板按流程
4. **尊重用户**：如果用户表示信息已经足够，不要过度追问
5. **给出价值**：在提问过程中，适当分享你的初步分析和建议

---

## 📊 完成标准

### PRD 需求澄清完成标准

- [ ] 需求背景和动机已明确
- [ ] 目标用户已确定
- [ ] 核心使用场景已描述
- [ ] 功能边界已明确（包含什么、不包含什么）
- [ ] MVP 范围已确定
- [ ] 关键细节已获取（入口、交互、反馈等）

### Bug 诊断完成标准

- [ ] 问题现象已清晰描述
- [ ] 复现步骤已明确
- [ ] 发生频率已确认
- [ ] 环境信息已收集
- [ ] 关联因素已分析
- [ ] 有足够信息开始定位问题

---

## 📝 输出物

根据澄清/诊断的结果，可以输出：

1. **PRD 草稿**：如果是需求澄清，可以输出 PRD 文档草稿
2. **BUG 报告**：如果是问题诊断，可以输出 BUG 分析文档
3. **下一步建议**：给出后续行动建议

---

## 💡 快速启动

```
/Ask 
场景：PRD（或 Bug）
主题：[简要描述]
```

AI 将根据场景自动选择合适的提问流程，开始引导式对话。
