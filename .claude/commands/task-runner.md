---
description: 启动任务永动机智能体 - 持续读取 TASKS.md 文件并自动执行任务，支持动态添加任务和自动 handoff
---

# 任务永动机

启动 **Task Runner** 智能体，持续读取任务文件并自动执行任务。

## 使用场景

- 有一系列任务需要自动执行
- 想让 AI 在后台持续工作
- 需要随时添加新任务
- 希望 AI 自动管理上下文和 handoff

## 🔴 核心循环

```
读取 TASKS.md → 执行任务 → 标记完成 → 检查上下文 → 继续/handoff
```

## 执行流程

### 1. 确认任务文件

首先确认 TASKS.md 文件存在：

```bash
# 检查任务文件
cat TASKS.md
```

如果不存在，请先创建任务文件（见下方模板）。

### 2. 读取项目规范

阅读以下文档了解项目规范：
- **TASKS.md** - 任务文件（最高优先级）
- **CLAUDE.md** - 项目主文档
- **.kiro/steering/** - 项目 steering 文件

### 3. 开始任务循环

按照 `skills/multi-agent-explorer/agents/task-runner.md` 中定义的工作流程：

```
WHILE 存在未完成任务:
    1. 读取 TASKS.md（每次都重新读取！）
    2. 找到第一个 [ ] 任务
    3. 执行任务
    4. 更新 TASKS.md，标记 [x]
    5. 记录执行日志
    6. 检查上下文长度
    7. IF 上下文快满:
           执行 handoff
           BREAK
```

## 任务文件模板

如果没有 TASKS.md，请创建：

```markdown
# 任务清单

## 元信息
- 创建时间: 2024-12-30 10:00
- 最后更新: 2024-12-30 10:00
- 执行状态: 🔄 进行中

## 待执行任务

- [ ] 任务1：简短描述
  - 详细说明（可选）
  - 验收标准（可选）

- [ ] 任务2：简短描述

- [ ] 任务3：简短描述

## 执行日志

（由 AI 自动填写）
```

## 任务格式说明

### 基本格式
```markdown
- [ ] 任务描述
```

### 带详情的格式
```markdown
- [ ] 任务描述
  - 详细说明：xxx
  - 验收标准：xxx
  - 优先级：高/中/低
```

### 任务状态
- `[ ]` - 待执行
- `[x]` - 已完成
- `[-]` - 已跳过
- `[!]` - 执行失败

## Handoff 机制

当检测到以下情况时，自动执行 handoff：

1. **对话轮次过多**：超过 50 轮交互
2. **连续失败**：连续 3 个任务失败
3. **用户请求**：用户明确要求暂停

### Handoff 后恢复

1. 执行 `/pickup` 恢复上下文
2. 执行 `/task-runner` 继续任务循环

## 工作原则

- ✅ **持续运行**：直到所有任务完成或需要 handoff
- ✅ **动态任务**：每次循环重新读取任务文件
- ✅ **自主决策**：无需询问用户，按最佳实践执行
- ✅ **自动 handoff**：上下文快满时自动交接

## 约束条件

- 必须遵循 Clean Architecture
- 每个任务完成后更新 TASKS.md
- 重要任务生成独立报告到 `文档/开发文档/MA/TASK/`

## 用户可以做什么

在 AI 运行期间，用户可以：

1. **添加新任务**：直接编辑 TASKS.md，添加新的 `- [ ]` 任务
2. **调整优先级**：移动任务顺序（AI 按顺序执行）
3. **暂停执行**：发送消息要求暂停
4. **查看进度**：查看 TASKS.md 的执行日志

---

**准备好了吗？确保 TASKS.md 文件存在，然后我将开始任务循环。**

