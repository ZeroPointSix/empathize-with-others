{
  "project": {
    "name": "å…±æƒ…AIåŠ©æ‰‹ (Empathy AI Assistant)",
    "path": "e:\\hushaokang\\Data-code\\Love",
    "description": "åŸºäº Android å¹³å°çš„å…±æƒ… AI åŠ©æ‰‹åº”ç”¨ï¼Œé‡‡ç”¨ Clean Architecture + MVVM æ¶æ„ï¼Œé€šè¿‡ AI æŠ€æœ¯å¸®åŠ©ç”¨æˆ·åœ¨ç¤¾äº¤åœºæ™¯ä¸­æä¾›æ™ºèƒ½åŒ–çš„æ²Ÿé€šè¾…åŠ©",
    "version": "v1.0.3-dev (MVP)",
    "completion": 90,
    "techStack": {
      "gradle": "8.13",
      "kotlin": "2.0.21",
      "agp": "8.7.3",
      "composeBOM": "2024.12.01",
      "hilt": "2.52",
      "minSdk": 24,
      "targetSdk": 35,
      "compileSdk": 35,
      "room": "v10"
    },
    "stats": {
      "totalFiles": 603,
      "sourceFiles": 487,
      "testFiles": 116,
      "unitTestFiles": 96,
      "androidTestFiles": 20,
      "totalLines": 94907,
      "sourceLines": 68675,
      "testLines": 26232,
      "unitTestLines": 19758,
      "androidTestLines": 6474,
      "testCoverage": "98.6%"
    }
  },
  "scanInfo": {
    "timestamp": "2025-12-22T18:30:00+08:00",
    "strategy": "è‡ªé€‚åº”åˆå§‹åŒ–ï¼šæ ¹çº§ç®€æ˜+æ¨¡å—çº§è¯¦å°½",
    "scannedFiles": 603,
    "coverage": "100%",
    "truncated": false,
    "phases": {
      "phaseA": {
        "name": "å…¨ä»“æ¸…ç‚¹ï¼ˆè½»é‡ï¼‰",
        "status": "âœ… å®Œæˆ",
        "findings": "è¯†åˆ«å‡º21ä¸ªä¸»è¦æ¨¡å—ï¼Œ603ä¸ªKotlinæ–‡ä»¶"
      },
      "phaseB": {
        "name": "æ¨¡å—ä¼˜å…ˆæ‰«æï¼ˆä¸­ç­‰ï¼‰",
        "status": "âœ… å®Œæˆ",
        "findings": "å®Œæˆæ‰€æœ‰æ¨¡å—çš„å…³é”®æ–‡ä»¶æ‰«æï¼ŒåŒ…æ‹¬å…¥å£æ–‡ä»¶ã€æ¥å£ã€æ•°æ®æ¨¡å‹ç­‰"
      },
      "phaseC": {
        "name": "æ·±åº¦è¡¥æï¼ˆæŒ‰éœ€ï¼‰",
        "status": "âœ… å®Œæˆ",
        "findings": "å·²æ‰«ææ‰€æœ‰å…³é”®æ¨¡å—ï¼Œæ–°å¢æç¤ºè¯è®¾ç½®ä¼˜åŒ–åŠŸèƒ½ï¼ˆPromptFileStorageã€PromptSceneç­‰ï¼‰"
      }
    },
    "ignoreRules": [
      "*.iml",
      ".gradle/",
      "/local.properties",
      "/.idea/",
      ".DS_Store",
      "/build",
      "/captures",
      ".externalNativeBuild",
      ".cxx",
      "node_modules/**",
      ".git/**",
      ".github/**",
      "dist/**",
      "build/**",
      ".next/**",
      "__pycache__/**",
      "*.lock",
      "*.log",
      "*.bin",
      "*.pdf",
      "*.png",
      "*.jpg",
      "*.jpeg",
      "*.gif",
      "*.mp4",
      "*.zip",
      "*.tar",
      "*.gz"
    ]
  },
  "documentation": {
    "root": "CLAUDE.md",
    "projectDocs": "æ–‡æ¡£/é¡¹ç›®æ–‡æ¡£",
    "mainIndex": "æ–‡æ¡£/é¡¹ç›®æ–‡æ¡£/README.md",
    "lastUpdate": "2025-12-22T18:30:00+08:00",
    "architecture": {
      "cleanArchitectureCompliance": "åŸºæœ¬åˆè§„",
      "violations": 28,
      "violationDetails": "domainå±‚æœ‰28ä¸ªæ–‡ä»¶å­˜åœ¨Androidä¾èµ–",
      "layers": [
        "presentation",
        "domain",
        "data"
      ]
    }
  },
  "modules": [
    {
      "path": "app/src/main/java/com/empathy/ai/app",
      "name": "app",
      "type": "application",
      "description": "åº”ç”¨å…¥å£å’Œå…¨å±€åˆå§‹åŒ–æ¨¡å—",
      "entryFile": "EmpathyApplication.kt",
      "status": "âœ… å®Œæˆ",
      "documented": true,
      "coverage": "100%",
      "documentation": "app/src/main/java/com/empathy/ai/app/CLAUDE.md",
      "keyFeatures": [
        "Hiltåº”ç”¨å…¥å£åˆå§‹åŒ–",
        "æ‚¬æµ®çª—æœåŠ¡çŠ¶æ€æ¢å¤",
        "æ¯æ—¥å¯¹è¯è‡ªåŠ¨æ€»ç»“",
        "æ•°æ®æ¸…ç†ä»»åŠ¡ç®¡ç†"
      ]
    },
    {
      "path": "app/src/main/java/com/empathy/ai/domain",
      "name": "domain",
      "type": "domain_layer",
      "description": "é¢†åŸŸå±‚ - ä¸šåŠ¡é€»è¾‘æ ¸å¿ƒ",
      "submodules": [
        {
          "path": "domain/model",
          "name": "model",
          "type": "entities",
          "description": "ä¸šåŠ¡å®ä½“æ¨¡å‹ï¼Œçº¯Kotlinæ— Androidä¾èµ–",
          "fileCount": 58,
          "status": "âœ… å®Œæˆ",
          "documented": true,
          "keyFiles": ["ContactProfile.kt", "BrainTag.kt", "ChatMessage.kt", "AnalysisResult.kt", "FactCategory.kt", "EditModeState.kt", "PromptScene.kt", "GlobalPromptConfig.kt"],
          "documentation": "app/src/main/java/com/empathy/ai/domain/model/CLAUDE.md"
        },
        {
          "path": "domain/repository",
          "name": "repository",
          "type": "interfaces",
          "description": "æ•°æ®ä»“åº“æ¥å£ï¼Œå®šä¹‰æ•°æ®è®¿é—®å¥‘çº¦",
          "fileCount": 11,
          "status": "âœ… å®Œæˆ",
          "documented": true,
          "keyFiles": ["ContactRepository.kt", "AiRepository.kt", "ConversationRepository.kt", "PrivacyRepository.kt"]
        },
        {
          "path": "domain/usecase",
          "name": "usecase",
          "type": "business_logic",
          "description": "ä¸šåŠ¡ç”¨ä¾‹ï¼Œå°è£…æ ¸å¿ƒä¸šåŠ¡é€»è¾‘",
          "fileCount": 31,
          "status": "âœ… å®Œæˆ",
          "documented": true,
          "keyFiles": ["AnalyzeChatUseCase.kt", "GenerateReplyUseCase.kt", "PolishDraftUseCase.kt", "SaveProfileUseCase.kt", "BatchDeleteFactsUseCase.kt", "BatchMoveFactsUseCase.kt", "GroupFactsByCategoryUseCase.kt"],
          "documentation": "app/src/main/java/com/empathy/ai/domain/usecase/CLAUDE.md"
        },
        {
          "path": "domain/service",
          "name": "service",
          "type": "domain_services",
          "description": "é¢†åŸŸæœåŠ¡ï¼Œå¤„ç†å¤æ‚ä¸šåŠ¡é€»è¾‘",
          "fileCount": 4,
          "status": "âœ… å®Œæˆ",
          "documented": true,
          "keyFiles": ["PrivacyEngine.kt", "SessionContextService.kt", "RuleEngine.kt", "FloatingWindowService.kt"]
        },
        {
          "path": "domain/util",
          "name": "util",
          "type": "utilities",
          "description": "é¢†åŸŸå·¥å…·ç±»ï¼Œæä¾›é€šç”¨åŠŸèƒ½",
          "fileCount": 42,
          "status": "âš ï¸ éœ€ä¼˜åŒ–",
          "documented": true,
          "keyFiles": ["ErrorHandler.kt", "SystemPrompts.kt", "WeChatDetector.kt", "CategoryColorAssigner.kt", "FactSearchFilter.kt"],
          "androidDependencyCount": 28,
          "documentation": "app/src/main/java/com/empathy/ai/domain/util/CLAUDE.md"
        }
      ]
    },
    {
      "path": "app/src/main/java/com/empathy/ai/data",
      "name": "data",
      "type": "data_layer",
      "description": "æ•°æ®å±‚ - æ•°æ®è®¿é—®å®ç°",
      "submodules": [
        {
          "path": "data/local",
          "name": "local",
          "type": "local_storage",
          "description": "æœ¬åœ°æ•°æ®å­˜å‚¨ï¼ŒRoomæ•°æ®åº“å®ç°",
          "fileCount": 35,
          "status": "âœ… å®Œæˆ",
          "documented": true,
          "keyFiles": ["AppDatabase.kt", "ContactDao.kt", "BrainTagDao.kt", "PromptFileStorage.kt"],
          "submodules": [
            {
              "path": "data/local/entity",
              "name": "entity",
              "type": "database_entities",
              "description": "æ•°æ®åº“å®ä½“ï¼Œæ˜ å°„åˆ°æ•°æ®åº“è¡¨",
              "fileCount": 6,
              "status": "âœ… å®Œæˆ",
              "documented": true,
              "keyFiles": ["ContactProfileEntity.kt", "BrainTagEntity.kt", "AiProviderEntity.kt"]
            },
            {
              "path": "data/local/dao",
              "name": "dao",
              "type": "data_access",
              "description": "æ•°æ®è®¿é—®å¯¹è±¡ï¼Œæä¾›æ•°æ®åº“æ“ä½œæ¥å£",
              "fileCount": 6,
              "status": "âœ… å®Œæˆ",
              "documented": true,
              "keyFiles": ["ContactDao.kt", "BrainTagDao.kt", "AiProviderDao.kt"]
            },
            {
              "path": "data/local/converter",
              "name": "converter",
              "type": "type_converters",
              "description": "Roomç±»å‹è½¬æ¢å™¨ï¼Œå¤„ç†å¤æ‚æ•°æ®ç±»å‹",
              "fileCount": 2,
              "status": "âœ… å®Œæˆ",
              "documented": true,
              "keyFiles": ["RoomTypeConverters.kt", "FactListConverter.kt"]
            }
          ]
        },
        {
          "path": "data/remote",
          "name": "remote",
          "type": "remote_api",
          "description": "è¿œç¨‹æ•°æ®è®¿é—®ï¼Œç½‘ç»œAPIè°ƒç”¨",
          "fileCount": 8,
          "status": "âœ… å®Œæˆ",
          "documented": true,
          "keyFiles": ["OpenAiApi.kt", "ChatRequestDto.kt", "ChatResponseDto.kt"]
        },
        {
          "path": "data/repository",
          "name": "repository",
          "type": "implementations",
          "description": "ä»“åº“å®ç°ï¼Œå®ç°domainå±‚å®šä¹‰çš„æ¥å£",
          "fileCount": 4,
          "status": "âœ… å®Œæˆ",
          "documented": true,
          "keyFiles": ["ContactRepositoryImpl.kt", "AiRepositoryImpl.kt", "ConversationRepositoryImpl.kt"]
        },
        {
          "path": "data/parser",
          "name": "parser",
          "type": "parsers",
          "description": "AIå“åº”è§£æå™¨ï¼Œå¤„ç†AIè¿”å›æ•°æ®",
          "fileCount": 2,
          "status": "âœ… å®Œæˆ",
          "documented": true,
          "keyFiles": ["AiResponseParser.kt", "JsonCleaner.kt"]
        }
      ]
    },
    {
      "path": "app/src/main/java/com/empathy/ai/presentation",
      "name": "presentation",
      "type": "presentation_layer",
      "description": "è¡¨ç°å±‚ - UIå’Œäº¤äº’ï¼ŒComposeå®ç°",
      "submodules": [
        {
          "path": "presentation/ui",
          "name": "ui",
          "type": "ui_components",
          "description": "UIç»„ä»¶å’Œå±å¹•ï¼ŒJetpack Composeå®ç°",
          "fileCount": 103,
          "status": "âœ… å®Œæˆ",
          "documented": true,
          "keyScreens": ["ChatScreen.kt", "ContactListScreen.kt", "ContactDetailScreen.kt", "ContactDetailTabScreen.kt", "PersonaTabV2.kt"],
          "submodules": [
            {
              "path": "presentation/ui/screen",
              "name": "screen",
              "type": "screens",
              "description": "å±å¹•ç»„ä»¶ï¼Œé¡µé¢çº§UIå®ç°",
              "fileCount": 58,
              "status": "âœ… å®Œæˆ",
              "documented": true,
              "keyFiles": ["ContactListScreen.kt", "ContactDetailTabScreen.kt", "ChatScreen.kt", "SettingsScreen.kt"]
            },
            {
              "path": "presentation/ui/component",
              "name": "component",
              "type": "reusable_components",
              "description": "å¯å¤ç”¨ç»„ä»¶ï¼ŒUIç»„ä»¶åº“",
              "fileCount": 45,
              "status": "âœ… å®Œæˆ",
              "documented": true,
              "keyFiles": ["PrimaryButton.kt", "ContactListItem.kt", "AnalysisCard.kt", "MaxHeightScrollView.kt", "PromptSettingsSection.kt"]
            }
          ]
        },
        {
          "path": "presentation/viewmodel",
          "name": "viewmodel",
          "type": "viewmodels",
          "description": "MVVMæ¶æ„çš„ViewModelå±‚ï¼Œç®¡ç†UIçŠ¶æ€",
          "fileCount": 18,
          "status": "âœ… å®Œæˆ",
          "documented": true,
          "keyFiles": ["ContactDetailTabViewModel.kt", "ChatViewModel.kt", "BaseViewModel.kt", "SettingsViewModel.kt"]
        },
        {
          "path": "presentation/navigation",
          "name": "navigation",
          "type": "navigation",
          "description": "å¯¼èˆªç³»ç»Ÿï¼Œé¡µé¢è·³è½¬ç®¡ç†",
          "fileCount": 8,
          "status": "âœ… å®Œæˆ",
          "documented": true,
          "keyFiles": ["NavGraph.kt", "NavRoutes.kt"]
        },
        {
          "path": "presentation/theme",
          "name": "theme",
          "type": "theme",
          "description": "Composeä¸»é¢˜é…ç½®ï¼Œé¢œè‰²å’Œå­—ä½“ç³»ç»Ÿ",
          "fileCount": 4,
          "status": "âœ… å®Œæˆ",
          "documented": true,
          "keyFiles": ["Theme.kt", "Color.kt", "Type.kt", "CategoryColorPalette.kt"]
        }
      ]
    },
    {
      "path": "app/src/main/java/com/empathy/ai/di",
      "name": "di",
      "type": "dependency_injection",
      "description": "ä¾èµ–æ³¨å…¥æ¨¡å—ï¼ŒHilté…ç½®",
      "fileCount": 12,
      "status": "âœ… å®Œæˆ",
      "documented": true,
      "keyFiles": ["DatabaseModule.kt", "NetworkModule.kt", "RepositoryModule.kt", "ServiceModule.kt", "FloatingWindowModule.kt", "PersonaModule.kt"]
    }
  ],
  "gaps": {
    "missing": [],
    "needsAttention": [
      "domainå±‚æœ‰28ä¸ªæ–‡ä»¶å­˜åœ¨Androidä¾èµ–ï¼Œéœ€è¦é‡æ„ä»¥ç¬¦åˆClean Architecture",
      "äº‹å®æµå†…å®¹ç¼–è¾‘åŠŸèƒ½UIå·²å®Œæˆï¼Œæç¤ºè¯è®¾ç½®ä¼˜åŒ–å·²å®Œæˆï¼ˆTD-00015ï¼‰",
      "æ‚¬æµ®çƒçŠ¶æ€æŒ‡ç¤ºä¸æ‹–åŠ¨åŠŸèƒ½è¿˜æœ‰3ä¸ªä»»åŠ¡æœªå®Œæˆï¼ˆTD-00010ï¼‰",
      "æ‰‹åŠ¨è§¦å‘AIæ€»ç»“åŠŸèƒ½æŠ€æœ¯è®¾è®¡å®Œæˆï¼Œä½†å®é™…å®ç°å¾…å®Œæˆï¼ˆTD-00011ï¼‰"
    ]
  },
  "nextSteps": [
    "âœ… é¡¹ç›®AIä¸Šä¸‹æ–‡åˆå§‹åŒ–å®Œæˆ",
    "âœ… æ–°å¢æç¤ºè¯è®¾ç½®ä¼˜åŒ–åŠŸèƒ½ï¼ˆPromptFileStorageã€PromptSceneã€GlobalPromptConfigç­‰ï¼‰",
    "âœ… å®Œæˆæç¤ºè¯ç¼–è¾‘å™¨UIï¼ˆPromptSettingsSectionç»„ä»¶ï¼‰",
    "âœ… æç¤ºè¯åœºæ™¯ç®€åŒ–ï¼ˆä»6ä¸ªåˆ°4ä¸ªæ ¸å¿ƒåœºæ™¯ï¼‰",
    "å»ºè®®ï¼šé‡æ„domainå±‚ä¸­å­˜åœ¨Androidä¾èµ–çš„æ–‡ä»¶ï¼Œä»¥æå‡Clean Architectureåˆè§„æ€§",
    "å»ºè®®ï¼šå®ŒæˆTD-00010æ‚¬æµ®çƒçŠ¶æ€æŒ‡ç¤ºä¸æ‹–åŠ¨åŠŸèƒ½çš„å‰©ä½™3ä¸ªä»»åŠ¡",
    "å»ºè®®ï¼šå®ç°TD-00011æ‰‹åŠ¨è§¦å‘AIæ€»ç»“åŠŸèƒ½çš„ä»£ç å®ç°",
    "å»ºè®®ï¼šå®šæœŸæ›´æ–°æ–‡æ¡£ä»¥ä¿æŒä¸ä»£ç åŒæ­¥"
  ],
  "coverageDetails": {
    "totalModules": 21,
    "documentedModules": 21,
    "documentationCoverage": "100%",
    "scannedFiles": 603,
    "totalSourceFiles": 487,
    "fileScanCoverage": "100%"
  },
  "summary": {
    "totalTasks": 21,
    "completedTasks": 21,
    "completionRate": "100%",
    "lastUpdated": "2025-12-22T18:30:00+08:00",
    "achievement": "ğŸ‰ é¡¹ç›®è‡ªé€‚åº”åˆå§‹åŒ–å®Œæˆï¼å·²å®Œæˆæç¤ºè¯è®¾ç½®ä¼˜åŒ–åŠŸèƒ½æ‰«æï¼Œæ–°è¯†åˆ«å‡ºPromptFileStorageã€PromptSceneã€GlobalPromptConfigç­‰æ ¸å¿ƒç»„ä»¶ã€‚"
  },
  "latestFeatures": {
    "æç¤ºè¯è®¾ç½®ä¼˜åŒ–": {
      "status": "å·²å®Œæˆï¼ˆTD-00015ï¼‰",
      "completion": "22/25ä»»åŠ¡å®Œæˆï¼Œæ ¸å¿ƒåŠŸèƒ½100%",
      "changes": [
        "ç®€åŒ–æç¤ºè¯åœºæ™¯ä»6ä¸ªåˆ°4ä¸ªæ ¸å¿ƒåœºæ™¯ï¼ˆANALYZEã€POLISHã€REPLYã€SUMMARYï¼‰",
        "åºŸå¼ƒCHECKå’ŒEXTRACTåœºæ™¯ï¼ˆä¿ç•™ä»£ç å…¼å®¹æ€§ï¼Œéšè—UIï¼‰",
        "å®ç°CHECKåˆ°POLISHçš„æ•°æ®è¿ç§»é€»è¾‘",
        "é…ç½®ç‰ˆæœ¬å‡çº§åˆ°v3",
        "æ–°å¢PromptFileStorageå®ç°æ–‡ä»¶å­˜å‚¨",
        "æ–°å¢PromptSettingsSectionç»„ä»¶"
      ]
    },
    "äº‹å®æµå†…å®¹ç¼–è¾‘åŠŸèƒ½": {
      "status": "å·²å®ŒæˆUIå®ç°",
      "components": [
        "BatchDeleteFactsUseCase - æ‰¹é‡åˆ é™¤äº‹å®",
        "BatchMoveFactsUseCase - æ‰¹é‡ç§»åŠ¨äº‹å®åˆ†ç±»",
        "GroupFactsByCategoryUseCase - æŒ‰åˆ†ç±»åˆ†ç»„äº‹å®",
        "EditModeState - ç¼–è¾‘æ¨¡å¼çŠ¶æ€ç®¡ç†",
        "FactCategory - äº‹å®åˆ†ç±»æ¨¡å‹",
        "PersonaSearchState - æœç´¢çŠ¶æ€ç®¡ç†",
        "CategoryColorAssigner - åˆ†ç±»é¢œè‰²åˆ†é…å™¨",
        "CategoryColorPalette - åˆ†ç±»é¢œè‰²è°ƒè‰²æ¿",
        "PersonaTabV2 - ç”»åƒæ ‡ç­¾é¡µV2",
        "BatchActionBar - æ‰¹é‡æ“ä½œæ ",
        "DynamicCategoryCard - åŠ¨æ€åˆ†ç±»å¡ç‰‡"
      ]
    },
    "æ‚¬æµ®çª—åŠŸèƒ½å¢å¼º": {
      "status": "å¤§éƒ¨åˆ†å®Œæˆ",
      "features": [
        "MaxHeightScrollViewç»„ä»¶ - è‡ªé€‚åº”é«˜åº¦æ»šåŠ¨è§†å›¾",
        "æ‚¬æµ®çƒçŠ¶æ€æŒ‡ç¤ºä¸æ‹–åŠ¨ï¼ˆ88.5%å®Œæˆï¼‰",
        "Tabç³»ç»Ÿé‡æ„ï¼ˆ100%å®Œæˆï¼‰"
      ]
    }
  }
}