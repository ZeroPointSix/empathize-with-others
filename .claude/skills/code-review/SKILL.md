---
name: code-review
description: 代码审查技能 - 全面审查代码质量、架构设计、安全性、性能并提供可操作的改进建议。在完成功能开发、合并代码前或需要质量保证时使用。
---

# 代码审查

## 激活时机

当满足以下条件时自动激活此技能：
- 完成功能实现后需要审查
- 提交 Pull Request/Merge Request 前需要审查
- 代码出现质量问题需要诊断
- 需要评估技术债或重构方案
- 代码合并后需要验证质量

## 审查流程

### 1. 理解上下文
```
- 阅读需求文档/设计文档（如有）
- 了解变更目的和范围
- 查看项目架构文档
```

### 2. 快速扫描
```
- 目录结构分析
- 文件大小和代码行数
- 整体架构合理性
```

### 3. 深度审查
```
- 按六大维度逐一检查
- 标记问题并记录位置
- 区分问题严重级别
```

### 4. 输出报告
```
- 先肯定优点
- 列出问题（按严重度排序）
- 给出明确结论和建议
```

## 审查维度

### 架构与设计
- [ ] 分层清晰（路由→控制→业务→数据）
- [ ] 单一职责原则
- [ ] SOLID 原则遵循
- [ ] 低耦合高内聚
- [ ] 可扩展性设计

### 代码质量
- [ ] 命名清晰见名知意
- [ ] 函数不超过50行
- [ ] 嵌套不超过3层
- [ ] 无重复代码（DRY）
- [ ] 完整的错误处理
- [ ] 类型安全

### 安全性
- [ ] 输入验证
- [ ] SQL/命令注入防护
- [ ] XSS 防护
- [ ] 敏感数据保护
- [ ] 权限检查

### 性能
- [ ] 无 N+1 查询
- [ ] 合理的缓存策略
- [ ] 算法复杂度合理
- [ ] 资源及时释放

### 可维护性
- [ ] 复杂逻辑有注释
- [ ] 核心功能有测试
- [ ] 配置与代码分离
- [ ] 日志记录完善

### 规范一致性
- [ ] 命名规范统一
- [ ] 代码风格一致
- [ ] 目录结构符合约定

## 问题分级

| 级别 | 定义 | 处理 |
|------|------|------|
| 🔴 Critical | 安全漏洞、数据丢失、崩溃 | 阻塞合并，立即修复 |
| 🟠 Important | 架构问题、功能缺失 | 修复后合并 |
| 🟡 Minor | 代码风格、优化建议 | 可后续优化 |

## 输出模板

详见 `templates/review-report-template.md`

## 相关资源

- `templates/review-report-template.md` - 审查报告模板
- `templates/checklist.md` - 快速检查清单

---

**技能状态**: 完成 ✅
**适用语言**: 所有编程语言
**审查耗时**: 5-15分钟/次（取决于变更规模）
