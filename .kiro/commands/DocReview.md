本条指令的作用是审查指定的项目文档，评估文档质量，并自动关联相同编号的前置文档进行一致性检查。

## 执行方式

1. 用户指定要审查的文档路径（如 `文档/开发文档/PRD/PRD-00001-悬浮窗功能需求.md`）
2. 自动解析文档编号（如 `00001`）和文档类型（如 `PRD`）
3. 自动查找相同编号的其他文档作为前置参考（如 `FD-00001`、`TDD-00001` 等）
4. 读取对应的文档规范（`Rules/开发文档规范.md` 或 `Rules/项目文档规范.md`）
5. 读取项目架构文档（`.kiro/steering/structure.md`、`.kiro/steering/tech.md`、`.kiro/steering/product.md`）
6. 进行多维度审查并生成报告

## 审查维度

### 1. 格式规范检查
- 文档命名是否符合规范（类型-编号-描述）
- 文档存放路径是否正确
- 编号是否正确（5位数字）
- 文档类型是否正确（PRD/FD/TDD/TP/PA/SA/TSG/CR/DD/RR/SD/AD/API/UM）

### 2. 内容完整性检查
根据文档类型检查必要章节：
- **PRD**: 需求背景、用户故事、验收标准是否完整
- **FD**: 功能说明、业务流程、交互逻辑是否清晰
- **TDD**: 技术架构、API设计、数据库设计是否详细
- **TP**: 测试策略、测试用例、覆盖率要求是否明确
- 其他类型参考对应规范

### 3. 文档质量评估（核心）
**需求文档（PRD/FD）质量：**
- 需求描述是否清晰、无歧义
- 用户故事是否完整（角色、功能、价值）
- 验收标准是否可测试、可验证
- 是否存在需求冲突或矛盾
- 是否遗漏关键功能点

**设计文档（TDD/AD）质量：**
- 技术方案是否可行、合理
- 架构设计是否符合项目的 Clean Architecture + MVVM 模式
- 是否正确使用项目技术栈（Hilt、Room、Retrofit、Compose）
- 数据模型设计是否合理
- 错误处理策略是否完善
- 是否存在过度设计或不必要的复杂度

**测试文档（TP）质量：**
- 测试策略是否覆盖所有关键功能
- 测试用例是否具体可执行
- 是否包含单元测试和集成测试

### 4. 开发可行性评估
- 文档是否提供足够的信息供开发人员实现
- 技术方案是否与现有代码库兼容
- 是否会引入技术债务
- 实现难度评估（简单/中等/复杂）
- 是否需要重构现有代码

### 5. 前置文档一致性检查
- 如果存在相同编号的 PRD，检查当前文档是否与需求一致
- 如果存在相同编号的 FD，检查技术设计是否符合功能定义
- 检查文档之间的描述是否有冲突
- 验证编号使用是否一致

### 6. 项目架构符合性
- 设计是否符合项目的包结构规范（domain/data/presentation/di）
- 依赖方向是否正确（领域层不依赖 Android）
- 命名规范是否一致（PascalCase/camelCase/snake_case）
- 是否遵循项目的设计原则（隐私优先、本地优先等）

## 输出格式

### 📄 文档信息
- 文档类型、编号、标题
- 存放路径
- 关联的前置文档列表

### 📊 质量评分
- 格式规范性：X/10
- 内容完整性：X/10
- 开发可行性：X/10
- 架构符合性：X/10
- 整体评分：X/10

### ✅ 优点
- 文档写得好的方面

### ⚠️ 需要改进项
- 格式问题、内容不完整、描述不清晰等
- 可能存在过度设计的地方
- 架构不符合项目规范的地方

### ❌ 严重问题
- 路径错误、编号错误、与前置文档冲突
- 明显的架构违规
- 需求与设计不匹配
- 无法满足开发需求的问题

### 🔗 前置文档一致性
- 与相同编号文档的一致性检查结果

### 📋 改进建议
- 具体的修改建议和优先级
- 简化建议（如果存在过度设计）
- 补充建议（如果有遗漏）
