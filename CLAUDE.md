# å…±æƒ…AIåŠ©æ‰‹ (Empathy AI Assistant) - é¡¹ç›®æŒ‡ä»¤

## ğŸ”´ å¿…è¯»è§„åˆ™ï¼ˆå¼€å§‹å·¥ä½œå‰å¿…é¡»é˜…è¯»ï¼‰

**åœ¨å¼€å§‹ä»»ä½•å·¥ä½œä¹‹å‰ï¼Œè¯·åŠ¡å¿…å…ˆé˜…è¯»ä»¥ä¸‹æ–‡æ¡£ï¼š**

1. **[Rules/RulesReadMe.md](./Rules/RulesReadMe.md)** - é¡¹ç›®é€šç”¨è§„åˆ™å’Œæ–‡æ¡£è§„èŒƒ
2. **[WORKSPACE.md](./WORKSPACE.md)** - å½“å‰å·¥ä½œçŠ¶æ€å’Œä»»åŠ¡åè°ƒ

è¿™äº›æ–‡æ¡£åŒ…å«äº†æ‰€æœ‰AIå·¥å…·çš„å…±åŒè§„åˆ™ã€æ–‡æ¡£å‘½åè§„èŒƒã€å·¥ä½œæµç¨‹å’Œå½“å‰é¡¹ç›®çŠ¶æ€ã€‚

---

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€æ¬¾åŸºäº Android å¹³å°çš„å…±æƒ… AI åŠ©æ‰‹åº”ç”¨,æ—¨åœ¨é€šè¿‡ AI æŠ€æœ¯å¸®åŠ©ç”¨æˆ·åœ¨ç¤¾äº¤åœºæ™¯ä¸­æä¾›æ™ºèƒ½åŒ–çš„æ²Ÿé€šè¾…åŠ©ã€‚é¡¹ç›®é‡‡ç”¨ Clean Architecture + MVVM æ¶æ„æ¨¡å¼,ä¸¥æ ¼éµå¾ªéšç§ä¼˜å…ˆå’Œé›¶åç«¯åŸåˆ™ã€‚

**ç‰ˆæœ¬**: v1.0.3-dev (MVP)
**çŠ¶æ€**: âœ… Phase 1-4 åŸºç¡€è®¾æ–½å®Œæˆï¼ŒUIå±‚å¼€å‘å®Œæˆï¼Œæ•´ä½“æ¶æ„å®Œæ•´
**å®Œæˆåº¦**: çº¦90% (åŒ…å«æ–‡æ¡£å’Œæµ‹è¯•)
**æŠ€æœ¯æ ˆ**: Kotlin + Jetpack Compose + Room + Retrofit + Hilt
**æœ€åæ›´æ–°**: 2025-12-12 (åŸºäºå®é™…ä»£ç æ¶æ„åˆ†ææ›´æ–°)

---

## æ ¸å¿ƒè®¾è®¡åŸåˆ™

### 1. æ¶æ„åŸåˆ™

- **é›¶åç«¯ (Zero-Backend)**: åº”ç”¨ä¸ç»´æŠ¤æœåŠ¡å™¨,æ— ç”¨æˆ·è´¦æˆ·ä½“ç³»
- **BYOK (Bring Your Own Key)**: æ‰€æœ‰ AI èƒ½åŠ›é€šè¿‡ç”¨æˆ·è‡ªå¤‡çš„ API Key ç›´è¿ç¬¬ä¸‰æ–¹æœåŠ¡
- **éšç§ç»å¯¹ä¼˜å…ˆ (Privacy First)**: æ•æ„Ÿæ•°æ®å¿…é¡»åœ¨æœ¬åœ°è„±æ•åæ‰èƒ½å‘é€ç»™ AI,å¯†é’¥é€šè¿‡ç¡¬ä»¶çº§åŠ å¯†å­˜å‚¨
- **æ— æ„Ÿæ¥å…¥ (Passive & Active)**: é€šè¿‡æ‚¬æµ®çª—å’Œæ— éšœç¢æœåŠ¡ä¸å®¿ä¸» App äº¤äº’,ä¸ä¿®æ”¹å®¿ä¸» App æºç 

### 2. ç¼–ç¨‹åŸåˆ™

éµå¾ª SOLIDã€KISSã€DRYã€YAGNI åŸåˆ™:

- **KISS**: ä»£ç å’Œè®¾è®¡è¿½æ±‚æè‡´ç®€æ´,ä¼˜å…ˆé€‰æ‹©æœ€ç›´è§‚çš„è§£å†³æ–¹æ¡ˆ
- **YAGNI**: ä»…å®ç°å½“å‰æ˜ç¡®æ‰€éœ€çš„åŠŸèƒ½,é¿å…è¿‡åº¦è®¾è®¡
- **DRY**: è‡ªåŠ¨è¯†åˆ«é‡å¤ä»£ç æ¨¡å¼,ä¸»åŠ¨å»ºè®®æŠ½è±¡å’Œå¤ç”¨
- **SOLID**:
  - å•ä¸€èŒè´£åŸåˆ™ (S): ç¡®ä¿ç»„ä»¶èŒè´£å•ä¸€
  - å¼€é—­åŸåˆ™ (O): è®¾è®¡å¯æ‰©å±•æ¥å£
  - é‡Œæ°æ›¿æ¢åŸåˆ™ (L): ä¿è¯å­ç±»å‹å¯æ›¿æ¢çˆ¶ç±»å‹
  - æ¥å£éš”ç¦»åŸåˆ™ (I): é¿å…"èƒ–æ¥å£"
  - ä¾èµ–å€’ç½®åŸåˆ™ (D): ä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç°

---

## é¡¹ç›®ç»“æ„è§„èŒƒ

### ç›®å½•ç»„ç»‡

```
com.empathy.ai/
â”œâ”€â”€ app/                                    # âœ… åº”ç”¨å…¥å£
â”‚   â””â”€â”€ EmpathyApplication.kt           # Hilt åº”ç”¨ç±»
â”‚
â”œâ”€â”€ domain/                                 # âœ… é¢†åŸŸå±‚ï¼ˆçº¯ Kotlinï¼Œæ—  Android ä¾èµ–ï¼‰
â”‚   â”œâ”€â”€ model/                            # âœ… ä¸šåŠ¡å®ä½“
â”‚   â”‚   â”œâ”€â”€ AnalysisResult.kt
â”‚   â”‚   â”œâ”€â”€ BrainTag.kt
â”‚   â”‚   â”œâ”€â”€ ChatMessage.kt
â”‚   â”‚   â”œâ”€â”€ ContactProfile.kt
â”‚   â”‚   â”œâ”€â”€ SafetyCheckResult.kt
â”‚   â”‚   â”œâ”€â”€ AiProvider.kt
â”‚   â”‚   â”œâ”€â”€ AiModel.kt
â”‚   â”‚   â”œâ”€â”€ ActionType.kt
â”‚   â”‚   â”œâ”€â”€ FloatingWindowError.kt
â”‚   â”‚   â”œâ”€â”€ MinimizedRequestInfo.kt
â”‚   â”‚   â”œâ”€â”€ MinimizeError.kt
â”‚   â”‚   â””â”€â”€ ExtractedData.kt
â”‚   â”œâ”€â”€ repository/                        # âœ… ä»“åº“æ¥å£
â”‚   â”‚   â”œâ”€â”€ AiRepository.kt
â”‚   â”‚   â”œâ”€â”€ BrainTagRepository.kt
â”‚   â”‚   â”œâ”€â”€ ContactRepository.kt
â”‚   â”‚   â”œâ”€â”€ PrivacyRepository.kt
â”‚   â”‚   â””â”€â”€ SettingsRepository.kt
â”‚   â”œâ”€â”€ usecase/                          # âœ… ä¸šåŠ¡é€»è¾‘ç”¨ä¾‹
â”‚   â”‚   â”œâ”€â”€ AnalyzeChatUseCase.kt
â”‚   â”‚   â”œâ”€â”€ CheckDraftUseCase.kt
â”‚   â”‚   â”œâ”€â”€ FeedTextUseCase.kt
â”‚   â”‚   â”œâ”€â”€ SaveProfileUseCase.kt
â”‚   â”‚   â”œâ”€â”€ GetAllContactsUseCase.kt
â”‚   â”‚   â”œâ”€â”€ GetContactUseCase.kt
â”‚   â”‚   â”œâ”€â”€ DeleteContactUseCase.kt
â”‚   â”‚   â”œâ”€â”€ DeleteBrainTagUseCase.kt
â”‚   â”‚   â”œâ”€â”€ SaveBrainTagUseCase.kt
â”‚   â”‚   â”œâ”€â”€ SaveProviderUseCase.kt
â”‚   â”‚   â”œâ”€â”€ DeleteProviderUseCase.kt
â”‚   â”‚   â”œâ”€â”€ GetProvidersUseCase.kt
â”‚   â”‚   â””â”€â”€ TestConnectionUseCase.kt
â”‚   â”œâ”€â”€ service/                          # âœ… é¢†åŸŸæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ PrivacyEngine.kt
â”‚   â”‚   â”œâ”€â”€ RuleEngine.kt
â”‚   â”‚   â””â”€â”€ FloatingWindowService.kt
â”‚   â””â”€â”€ util/                            # âœ… é¢†åŸŸå·¥å…·ç±»
â”‚       â”œâ”€â”€ ErrorHandler.kt
â”‚       â”œâ”€â”€ ErrorMapper.kt
â”‚       â”œâ”€â”€ FallbackStrategy.kt
â”‚       â”œâ”€â”€ FloatingView.kt
â”‚       â”œâ”€â”€ FloatingWindowManager.kt
â”‚       â”œâ”€â”€ OperationExecutor.kt
â”‚       â”œâ”€â”€ PerformanceMonitor.kt
â”‚       â”œâ”€â”€ PerformanceTracker.kt
â”‚       â”œâ”€â”€ RetryConfig.kt
â”‚       â””â”€â”€ WeChatDetector.kt
â”‚
â”œâ”€â”€ data/                                   # âœ… æ•°æ®å±‚ï¼ˆå®ç°ï¼‰
â”‚   â”œâ”€â”€ local/                          # âœ… æœ¬åœ°å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ AppDatabase.kt              # Room æ•°æ®åº“é…ç½®
â”‚   â”‚   â”œâ”€â”€ ApiKeyStorage.kt
â”‚   â”‚   â”œâ”€â”€ FloatingWindowPreferences.kt
â”‚   â”‚   â”œâ”€â”€ converter/                # âœ… Room ç±»å‹è½¬æ¢å™¨
â”‚   â”‚   â”‚   â””â”€â”€ RoomTypeConverters.kt
â”‚   â”‚   â”œâ”€â”€ dao/                    # âœ… æ•°æ®è®¿é—®å¯¹è±¡
â”‚   â”‚   â”‚   â”œâ”€â”€ AiProviderDao.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ BrainTagDao.kt
â”‚   â”‚   â”‚   â””â”€â”€ ContactDao.kt
â”‚   â”‚   â””â”€â”€ entity/                 # âœ… æ•°æ®åº“å®ä½“
â”‚   â”‚       â”œâ”€â”€ AiProviderEntity.kt
â”‚   â”‚       â”œâ”€â”€ BrainTagEntity.kt
â”‚   â”‚       â””â”€â”€ ContactProfileEntity.kt
â”‚   â”œâ”€â”€ remote/                         # âœ… ç½‘ç»œå±‚
â”‚   â”‚   â”œâ”€â”€ api/                    # âœ… Retrofit API æ¥å£
â”‚   â”‚   â”‚   â””â”€â”€ OpenAiApi.kt
â”‚   â”‚   â””â”€â”€ model/                  # âœ… DTOï¼ˆæ•°æ®ä¼ è¾“å¯¹è±¡ï¼‰
â”‚   â”‚       â”œâ”€â”€ ChatRequestDto.kt
â”‚   â”‚       â”œâ”€â”€ ChatResponseDto.kt
â”‚   â”‚       â””â”€â”€ MessageDto.kt
â”‚   â”œâ”€â”€ repository/                     # âœ… ä»“åº“å®ç°
â”‚   â”‚   â”œâ”€â”€ AiRepositoryImpl.kt
â”‚   â”‚   â”œâ”€â”€ BrainTagRepositoryImpl.kt
â”‚   â”‚   â”œâ”€â”€ ContactRepositoryImpl.kt
â”‚   â”‚   â”œâ”€â”€ PrivacyRepositoryImpl.kt
â”‚   â”‚   â”œâ”€â”€ AiProviderRepositoryImpl.kt
â”‚   â”‚   â””â”€â”€ settings/
â”‚   â”‚       â””â”€â”€ SettingsRepositoryImpl.kt
â”‚   â””â”€â”€ parser/                         # âœ… AIå“åº”è§£æå™¨
â”‚       â”œâ”€â”€ AiResponseParser.kt
â”‚       â”œâ”€â”€ EnhancedJsonCleaner.kt
â”‚       â”œâ”€â”€ FallbackHandler.kt
â”‚       â”œâ”€â”€ FieldMapper.kt
â”‚       â””â”€â”€ JsonCleaner.kt
â”‚
â”œâ”€â”€ presentation/                            # âœ… è¡¨ç°å±‚
â”‚   â”œâ”€â”€ navigation/                     # âœ… å¯¼èˆªç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ NavGraph.kt
â”‚   â”‚   â””â”€â”€ NavRoutes.kt
â”‚   â”œâ”€â”€ theme/                          # âœ… Compose ä¸»é¢˜
â”‚   â”‚   â”œâ”€â”€ Color.kt
â”‚   â”‚   â”œâ”€â”€ Theme.kt
â”‚   â”‚   â””â”€â”€ Type.kt
â”‚   â”œâ”€â”€ ui/                             # âœ… UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ MainActivity.kt
â”‚   â”‚   â”œâ”€â”€ component/               # âœ… å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ button/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PrimaryButton.kt
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SecondaryButton.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ card/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AnalysisCard.kt
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProfileCard.kt
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProviderCard.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ chip/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TagChip.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ dialog/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AddContactDialog.kt
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AddTagDialog.kt
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DeleteTagConfirmDialog.kt
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PermissionRequestDialog.kt
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProviderFormDialog.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ContactSearchBar.kt
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CustomTextField.kt
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TagSearchBar.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ list/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ContactListItem.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ message/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MessageBubble.kt
â”‚   â”‚   â”‚   â””â”€â”€ state/
â”‚   â”‚   â”‚       â”œâ”€â”€ EmptyView.kt
â”‚   â”‚   â”‚       â”œâ”€â”€ ErrorView.kt
â”‚   â”‚   â”‚       â””â”€â”€ LoadingIndicator.kt
â”‚   â”‚   â””â”€â”€ screen/               # âœ… åŠŸèƒ½å±å¹•
â”‚   â”‚       â”œâ”€â”€ aiconfig/
â”‚   â”‚       â”‚   â”œâ”€â”€ AiConfigScreen.kt
â”‚   â”‚       â”‚   â”œâ”€â”€ AiConfigUiState.kt
â”‚   â”‚       â”‚   â””â”€â”€ AiConfigUiEvent.kt
â”‚   â”‚       â”œâ”€â”€ chat/
â”‚   â”‚       â”‚   â”œâ”€â”€ ChatScreen.kt
â”‚   â”‚       â”‚   â”œâ”€â”€ ChatUiState.kt
â”‚   â”‚       â”‚   â””â”€â”€ ChatUiEvent.kt
â”‚   â”‚       â”œâ”€â”€ contact/
â”‚   â”‚       â”‚   â”œâ”€â”€ ContactListScreen.kt
â”‚   â”‚       â”‚   â”œâ”€â”€ ContactListUiState.kt
â”‚   â”‚       â”‚   â”œâ”€â”€ ContactListUiEvent.kt
â”‚   â”‚       â”‚   â”œâ”€â”€ ContactDetailScreen.kt
â”‚   â”‚       â”‚   â”œâ”€â”€ ContactDetailUiState.kt
â”‚   â”‚       â”‚   â””â”€â”€ ContactDetailUiEvent.kt
â”‚   â”‚       â”œâ”€â”€ settings/
â”‚   â”‚       â”‚   â”œâ”€â”€ SettingsScreen.kt
â”‚   â”‚       â”‚   â”œâ”€â”€ SettingsUiState.kt
â”‚   â”‚       â”‚   â””â”€â”€ SettingsUiEvent.kt
â”‚   â”‚       â””â”€â”€ tag/
â”‚   â”‚           â”œâ”€â”€ BrainTagScreen.kt
â”‚   â”‚           â”œâ”€â”€ BrainTagUiState.kt
â”‚   â”‚           â””â”€â”€ BrainTagUiEvent.kt
â”‚   â””â”€â”€ viewmodel/                    # âœ… ViewModel
â”‚       â”œâ”€â”€ BaseViewModel.kt
â”‚       â”œâ”€â”€ AiConfigViewModel.kt
â”‚       â”œâ”€â”€ BrainTagViewModel.kt
â”‚       â”œâ”€â”€ ChatViewModel.kt
â”‚       â”œâ”€â”€ ContactDetailViewModel.kt
â”‚       â”œâ”€â”€ ContactListViewModel.kt
â”‚       â””â”€â”€ SettingsViewModel.kt
â”‚
â””â”€â”€ di/                              # âœ… ä¾èµ–æ³¨å…¥
    â”œâ”€â”€ DatabaseModule.kt
    â”œâ”€â”€ NetworkModule.kt
    â”œâ”€â”€ RepositoryModule.kt
    â””â”€â”€ ServiceModule.kt
```

### æ–‡æ¡£è¦æ±‚

1. **æ¯ä¸ªå­ç›®å½•å¿…é¡»åŒ…å« README.md æ–‡ä»¶**,è¯´æ˜è¯¥ç›®å½•çš„èŒè´£å’Œå…³é”®ç±»
2. **é¡¹ç›®æ ¹ç›®å½•ä¿æŒç®€æ´**,è„šæœ¬æ–‡ä»¶ç»Ÿä¸€æ”¾åœ¨ `scripts/` ç›®å½•ä¸‹
3. **æ–‡æ¡£æ–‡ä»¶ç»Ÿä¸€æ”¾åœ¨ `æ–‡æ¡£` ç›®å½•**,åŒ…æ‹¬æ¶æ„è®¾è®¡ã€åŠŸèƒ½è®¾è®¡ç­‰
4. æ¯ä¸€æ¬¡è®¾è®¡åˆ°ä¿®æ”¹å†…å®¹åŠæ—¶å†™å¥½ä»»åŠ¡æ—¥å¿—
5. æ¯ä¸€æ¬¡ä¿®æ”¹å†…å®¹éƒ½è¦åŠæ—¶æ›´æ–°ä¸€ä¸‹æˆ‘ä»¬çš„Workspaceæ–‡ä»¶
6. æ¯ä¸€æ¬¡ä¿®æ”¹å†…å®¹éƒ½è¦åŠæ—¶æ›´æ–°ä¸€ä¸‹æˆ‘ä»¬çš„å¯¹åº”æ–‡ä»¶å¤¹ä¸‹çš„è¯´æ˜ã€‚å³å¯¹åº”è·¯å¾„ä¸‹é¢çš„READMEæ–‡ä»¶

---

## åŠŸèƒ½æ¨¡å—è¯´æ˜

### æ¨¡å—ä¸€: æ ¸å¿ƒå¤§è„‘ (The "Brain")

**èŒè´£**: ä½œä¸ºæ‰€æœ‰åŠŸèƒ½çš„æ ¸å¿ƒæ•°æ®åº“,é€šè¿‡å¤šæ¸ é“æ•°æ®å–‚å…»å®ç°è‡ªæˆ‘è¿›åŒ–

#### 1.1 æ•°æ®å–‚å…»æœºåˆ¶ (The Feeder)

æ”¯æŒä¸‰ç§æ•°æ®å¯¼å…¥æ–¹å¼:

1. **æ‰‹åŠ¨æ·»åŠ æ ‡ç­¾**: ç”¨æˆ·ç›´æ¥è¾“å…¥"é›·åŒº"æˆ–"å–œå¥½"ä½œä¸ºç§å­æ•°æ®
2. **å¯¼å…¥æ–‡æœ¬/ç²˜è´´å†…å®¹**: å¯¼å…¥ .txt èŠå¤©è®°å½•,AI è‡ªåŠ¨æç‚¼æ ‡ç­¾
3. **å¯¼å…¥åª’ä½“æ–‡ä»¶**: æ”¯æŒ .mp3/.mp4 æ–‡ä»¶
   - æœ‰å£°éŸ³è½¨: éŸ³é¢‘æå– â†’ ASRè½¬å½• â†’ LLMåˆ†æ â†’ æç‚¼æ ‡ç­¾
   - æ— å£°éŸ³è½¨: è§†é¢‘æ‹†å¸§ â†’ å¤šæ¨¡æ€æ¨¡å‹(OCR+åˆ†æ) â†’ æç‚¼æ ‡ç­¾

#### 1.2 è”ç³»äººç”»åƒç³»ç»Ÿ (The Profile)

**å­˜å‚¨å†…å®¹**:
- ğŸ”´ æ ¸å¿ƒé›·åŒº (ä¾‹å¦‚: é’±ã€å‰ä»»)
- ğŸŸ¡ æ•æ„Ÿè¯é¢˜ (ä¾‹å¦‚: 14å²ã€å®¶åº­)
- ğŸŸ¢ å–œå¥½ç­–ç•¥ (ä¾‹å¦‚: å¤¸å¥¹ç‹¬ç«‹ã€è€å¿ƒå€¾å¬)
- ğŸ“ åŠ¨æ€æ‘˜è¦ (ä¾‹å¦‚: "çŠ¶æ€:å¯¹æ–¹ç”Ÿç—…,æåº¦ç„¦è™‘")

**é…ç½®å†…å®¹**:
- æˆ‘çš„é•¿æœŸç›®æ ‡ (ä¾‹å¦‚: å»ºç«‹é•¿æœŸä¿¡ä»»)
- ä¸Šä¸‹æ–‡è¯»å–æ·±åº¦ (ä¾‹å¦‚: 10æ¡)

### æ¨¡å—äºŒ: å®æ—¶è¾…åŠ©æ¨¡å— (The Service)

**èŒè´£**: åœ¨å®æ—¶èŠå¤©ä¸­è°ƒç”¨"æ ¸å¿ƒå¤§è„‘"çš„æ•°æ®,æ‰§è¡Œ"è½»é‡åˆ†ç¦»"çš„è¾…åŠ©

#### 2.1 "è¢«åŠ¨å®ˆæŠ¤"æ¨¡å¼ (é˜²è¸©é›· / "è½»"è¾…åŠ©)

- **è§¦å‘**: ç”¨æˆ·åœ¨è¾“å…¥æ¡†æ‰“å­—æ—¶
- **é€»è¾‘**: å®æ—¶ç›‘å¬ â†’ æ„å›¾åˆ†ç±»API(500ms) â†’ å±é™©é¢„è­¦(çº¢æ¡†+éœ‡åŠ¨)
- **ç›®æ ‡**: ä½åŠŸè€—,é˜²æ­¢çŠ¯é”™

#### 2.2 "ä¸»åŠ¨æ±‚åŠ©"æ¨¡å¼ (AIå†›å¸ˆ / "é‡"è¾…åŠ©)

- **è§¦å‘**: ç”¨æˆ·ç‚¹å‡» `[ğŸ’¡ å¸®æˆ‘åˆ†æ]` æŒ‰é’®
- **è¾“å‡º**: AIç­–ç•¥åˆ†æå¡,åŒ…å«:
  1. å¯¹æ–¹çŠ¶æ€åˆ†æ (æƒ…ç»ªã€æ½œåœ¨æ„å›¾)
  2. å…³é”®æ´å¯Ÿ/é™·é˜±
  3. å»ºè®®è¡ŒåŠ¨ç­–ç•¥ (å¤šä¸ªé€‰é¡¹,æ”¯æŒ"å¡«å……å¹¶æ¶¦è‰²")

---

## æŠ€æœ¯å®ç°è¦ç‚¹

### å®‰å…¨ä¸éšç§

1. **æ•°æ®è„±æ•**: æ‰€æœ‰å‘é€ç»™ AI çš„è¯·æ±‚å¿…é¡»ç»è¿‡ `PrivacyEngine` å¤„ç†
   ```kotlin
   // å¼ºåˆ¶è°ƒç”¨é“¾ç¤ºä¾‹
   val maskedText = privacyEngine.mask(rawText, loadPrivacyDict())
   val remoteResult = aiRepository.analyze(maskedText)
   ```

2. **å¯†é’¥å­˜å‚¨**: å¿…é¡»ä½¿ç”¨ `EncryptedSharedPreferences`,ä¸¥ç¦ä½¿ç”¨æ™®é€š SharedPreferences

3. **æ ¸å¿ƒç»„ä»¶**
1. **FloatingWindowService**: ç»§æ‰¿ `LifecycleService`,ä½¿ç”¨ `ComposeView` æ¡¥æ¥ `WindowManager`
2. **ScreenFetcher**: åŸºäº `AccessibilityService` å®ç°æ»šåŠ¨æŠ“å–ç®—æ³•
3. **MediaProcessor**: é›†æˆ `FFmpegKit-Android` å¤„ç†éŸ³è§†é¢‘
4. **AiProviderManager**: æ”¯æŒåŠ¨æ€ BaseURL,ä½¿ç”¨ Retrofit `@Url` æ³¨è§£

### æ•°æ®åº“æ¨¡å‹

```kotlin
// è”ç³»äººç”»åƒ
@Entity(tableName = "profiles")
data class ContactProfile(
    @PrimaryKey val id: String,
    val name: String,
    val targetGoal: String,
    val contextDepth: Int = 10,
    val facts: Map<String, String> = emptyMap()
)

// ç­–ç•¥ä¸é›·åŒº
@Entity(tableName = "brain_tags")
data class BrainTag(
    @PrimaryKey(autoGenerate = true) val id: Long = 0,
    val contactId: String,
    val content: String,
    val type: String, // "RED"(é›·åŒº), "GREEN"(ç­–ç•¥)
    val source: String // "MANUAL" or "AI_AUTO"
)
```

---

## å¼€å‘è·¯çº¿å›¾

| é˜¶æ®µ | å‘¨æœŸ | æ ¸å¿ƒä»»åŠ¡ | äº¤ä»˜ç‰© |
|------|------|----------|--------|
| **Phase 1: éª¨æ¶** | Week 1 | æ„å»º MVVM ç»“æ„ã€FloatingWindowServiceã€åŸºç¡€ Accessibility | èƒ½æ˜¾ç¤ºçš„æ‚¬æµ®çª—ã€èƒ½æŠ“å–å½“å‰å±æ–‡å­—çš„ Log |
| **Phase 2: å¤§è„‘** | Week 2 | Room æ•°æ®åº“ã€Settings é¡µã€EncryptedPrefsã€FFmpeg é›†æˆ | æ”¯æŒé…ç½®ä¿å­˜ã€æ”¯æŒè§†é¢‘/éŸ³é¢‘è½¬æ–‡å­—æµç¨‹ |
| **Phase 3: è¿æ¥** | Week 3 | Retrofit åŠ¨æ€ URLã€PrivacyEngine è„±æ•é€»è¾‘ã€OpenAI/DeepSeek è”è°ƒ | ç‚¹å‡»åˆ†æ â†’ æŠ“å– â†’ è„±æ• â†’ AIè¯·æ±‚ â†’ å¼¹çª—ç»“æœ |
| **Phase 4: ä¼˜åŒ–** | Week 4 | æ»šåŠ¨æŠ“å–ç®—æ³•ä¼˜åŒ–ã€UI åŠ¨ç”»ã€è‡ªåŠ¨å¡«å……æ–‡æœ¬é€»è¾‘ | å®Œæ•´çš„ MVP v2.0 |

---

## ä»£ç å˜æ›´è§„èŒƒ

### æ¯æ¬¡ä»£ç å˜æ›´å¿…é¡»è¯´æ˜:

1. **ä¸ºä»€ä¹ˆæ”¹**: è¯´æ˜å˜æ›´çš„åŸå› å’ŒèƒŒæ™¯
2. **å¦‚ä½•æ”¹**: è¯¦ç»†æè¿°å…·ä½“çš„ä¿®æ”¹æ–¹æ¡ˆ
3. **æ”¹åæ•ˆæœ**: è¯´æ˜å˜æ›´åé¢„æœŸè¾¾åˆ°çš„æ•ˆæœ

### ç¤ºä¾‹:

**ä¸ºä»€ä¹ˆæ”¹**: å½“å‰ç›´æ¥ä½¿ç”¨æ™®é€š SharedPreferences å­˜å‚¨ API Key å­˜åœ¨å®‰å…¨é£é™©
**å¦‚ä½•æ”¹**: ä½¿ç”¨ Jetpack Security çš„ EncryptedSharedPreferences æ›¿æ¢æ™®é€š SharedPreferences
**æ”¹åæ•ˆæœ**: API Key å°†é€šè¿‡ç¡¬ä»¶çº§åŠ å¯†å­˜å‚¨,å¤§å¹…æå‡å®‰å…¨æ€§

---

## å½“å‰å¼€å‘è¿›åº¦

### âœ… å·²å®Œæˆ (2025-12-12)

| æ¨¡å— | å®Œæˆåº¦ | è¯´æ˜ |
|------|--------|----------|
| **Gitç‰ˆæœ¬æ§åˆ¶** | 100% | âœ… åˆå§‹æäº¤å·²å®Œæˆ (commit: 393a0be) |
| **Domain Layer** | 100% | 5 æ¨¡å‹ + 5 æ¥å£ + 13 UseCase + 2 æœåŠ¡ï¼ˆPrivacyEngineå·²æ‰©å±•ï¼‰ |
| **Data Layer - Room** | 100% | å®Œæ•´å®ç°ï¼ŒåŒ…å«Entityã€DAOã€Repository |
| **Data Layer - Retrofit** | 100% | ç½‘ç»œæ¨¡å—å®Œæˆï¼Œæ”¯æŒåŠ¨æ€URLå’Œå¤šæœåŠ¡å•† |
| **Data Layer - Hilt** | 100% | DatabaseModuleã€NetworkModuleã€RepositoryModule |
| **Presentation - ViewModel** | 100% | å®Œå…¨ç¬¦åˆMVVMæ¶æ„ï¼ŒçŠ¶æ€ç®¡ç†è§„èŒƒ |
| **Presentation - UiState/UiEvent** | 100% | å®Œå…¨ç¬¦åˆUIå±‚å¼€å‘è§„èŒƒ |
| **Presentation - Theme** | 100% | âœ… å®Œæ•´çš„Material Design 3ä¸»é¢˜ç³»ç»Ÿ |
| **Presentation - Navigation** | 100% | âœ… ç±»å‹å®‰å…¨çš„å¯¼èˆªç³»ç»Ÿï¼Œå®Œæ•´çš„NavGraph |
| **Presentation - UI Components** | 100% | âœ… Phase 2å®Œæˆï¼š10ä¸ªå¯å¤ç”¨ç»„ä»¶ï¼ˆ7ä¸ªP0 + 3ä¸ªP1ï¼‰ |
| **Presentation - UI Screens** | 100% | âœ… Phase 3å®Œæˆï¼š4ä¸ªæ ¸å¿ƒScreenï¼ˆ3ä¸ªP0 + 1ä¸ªP1ï¼‰ |
| **Presentation - Service** | 100% | âœ… Phase 1ã€2ã€3å…¨éƒ¨å®Œæˆï¼ŒPhase 4å¾…å¼€å§‹ |
| **Clean Architectureåˆè§„** | 100% | âœ… å®Œå…¨åˆè§„ï¼Œ0å¤„Repositoryç›´æ¥è°ƒç”¨ |
| **å•å…ƒæµ‹è¯•** | 100% | 113/114 æµ‹è¯•é€šè¿‡ (99.1%) |
| **é¡¹ç›®æ–‡æ¡£** | 100% | å®Œæ•´çš„æ¶æ„ã€å¼€å‘ã€æµ‹è¯•æ–‡æ¡£ |

### âš ï¸ éƒ¨åˆ†å®ç°/å¾…å®Œå–„

| æ¨¡å— | å®Œæˆåº¦ | è¯´æ˜ |
|------|--------|----------|
| **Data Layer - Parser** | 95% | AiResponseParseræ¥å£å·²å®šä¹‰ï¼Œä½†å®ç°å¯èƒ½ä¸å®Œæ•´ |
| **åª’ä½“å¤„ç†æ¨¡å—** | 90% | FeedTextUseCaseå·²å®ç°ï¼Œä½†AiRepositoryImplä¸­transcribeMediaæ–¹æ³•æœªå®ç° |
| **è§„åˆ™å¼•æ“é›†æˆ** | 90% | RuleEngineåŠŸèƒ½å®Œæ•´ï¼Œä½†ä¸å®é™…ä¸šåŠ¡æµç¨‹çš„é›†æˆçŠ¶æ€ä¸æ˜ |
| **æ— éšœç¢æœåŠ¡é›†æˆ** | 85% | WeChatDetectorç­‰å·¥å…·ç±»å­˜åœ¨ï¼Œä½†å®é™…é›†æˆçŠ¶æ€ä¸æ˜ |

### ğŸ“Š æ•´ä½“è¯„ä¼°

- **æ•´ä½“å®Œæˆåº¦**: çº¦90%
- **æ¶æ„åˆè§„æ€§**: 100% (Clean Architecture + MVVM)
- **ä»£ç è´¨é‡**: Açº§ (å®Œæ•´æ³¨é‡Šã€é”™è¯¯å¤„ç†ã€å•å…ƒæµ‹è¯•è¦†ç›–)
- **æµ‹è¯•è¦†ç›–**: 113/114æµ‹è¯•é€šè¿‡ (99.1%)

### ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

1. **Clean Architectureå®Œç¾è½åœ°** - å››å¤§æ¿å—æ¶æ„å®Œæ•´å®ç°
2. **Roomæ•°æ®åº“è®¾è®¡ç²¾è‰¯** - è¡¨ç»“æ„è§„èŒƒï¼Œç´¢å¼•ä¼˜åŒ–ï¼Œå“åº”å¼æŸ¥è¯¢
3. **ç½‘ç»œæ¨¡å—è®¾è®¡å…ˆè¿›** - åŠ¨æ€URLæ”¯æŒï¼Œå¤šæœåŠ¡å•†å…¼å®¹ï¼Œè¶…æ—¶é…ç½®åˆç†
4. **ä»£ç è´¨é‡æé«˜** - æ³¨é‡Šè¯¦å°½ï¼Œå‘½åè§„èŒƒï¼Œé”™è¯¯å¤„ç†å®Œå–„
5. **å·¥ç¨‹å®è·µä¼˜ç§€** - Hiltä¾èµ–æ³¨å…¥ï¼Œå•å…ƒæµ‹è¯•è¦†ç›–ï¼Œæ„å»ºé…ç½®åˆç†

### âš ï¸ æŠ€æœ¯å€ºåŠ¡

- **åª’ä½“å¤„ç†æ¨¡å—**: transcribeMediaæ–¹æ³•éœ€è¦å®ç°FFmpegé›†æˆ
- **AIå“åº”è§£æå™¨**: éœ€è¦éªŒè¯AiResponseParserçš„å®Œæ•´æ€§å’Œé”™è¯¯å¤„ç†
- **æ— éšœç¢é›†æˆ**: éœ€è¦éªŒè¯WeChatDetectorä¸FloatingWindowServiceçš„å®é™…åä½œ

---

## å‚è€ƒæ–‡æ¡£

### ğŸ“š å¿«é€Ÿå¯¼èˆª

- **[æ–‡æ¡£ä¸­å¿ƒ](./docs/README.md)** - å®Œæ•´æ–‡æ¡£å¯¼èˆª
- **[é¡¹ç›®æ¦‚è§ˆ](./docs/00-é¡¹ç›®æ¦‚è¿°/OVERVIEW.md)** â­ æ–°æˆå‘˜å¿…è¯»
- **[æ¶æ„è®¾è®¡](./docs/01-æ¶æ„è®¾è®¡/é¡¹ç›®æ¶æ„è®¾è®¡.md)** - æŠ€æœ¯æ¶æ„è¯¦è§£
- **[ä¸šåŠ¡å±‚è®¾è®¡](./docs/01-æ¶æ„è®¾è®¡/ä¸šåŠ¡å±‚/)** - æ•°æ®æ¨¡å‹ä¸æ¥å£
- **[å¼€å‘æŒ‡å—](./docs/02-å¼€å‘æŒ‡å—/)** - ä¾èµ–é…ç½®ä¸å¼€å‘è¿›åº¦
- **[æµ‹è¯•æ–‡æ¡£](./docs/03-æµ‹è¯•æ–‡æ¡£/)** - å•å…ƒæµ‹è¯•ä¸é»‘ç›’æµ‹è¯•

### ğŸ¯ æ ¸å¿ƒæ–‡æ¡£

1. **é¡¹ç›®æ¦‚è§ˆ**: `docs/00-é¡¹ç›®æ¦‚è¿°/OVERVIEW.md`
2. **æ¶æ„è®¾è®¡**: `docs/01-æ¶æ„è®¾è®¡/é¡¹ç›®æ¶æ„è®¾è®¡.md`
3. **ä¾èµ–é…ç½®**: `docs/02-å¼€å‘æŒ‡å—/ä¾èµ–é…ç½®è¯´æ˜.md`

---

**æœ€åæ›´æ–°**: 2025-12-12 (åŸºäºå®é™…ä»£ç æ¶æ„åˆ†ææ›´æ–°)
**ç»´æŠ¤è€…**: hushaokang
**æ–‡æ¡£ç‰ˆæœ¬**: v2.0.0
**Gitæäº¤**: 393a0be - ğŸ‰ åˆå§‹æäº¤ï¼šå…±æƒ…AIåŠ©æ‰‹é¡¹ç›®åŸºç¡€æ¶æ„å®Œæˆ
**æ¶æ„çŠ¶æ€**: âœ… Clean Architectureå®Œå…¨åˆè§„ï¼Œ0å¤„è¿è§„è°ƒç”¨
**ä»Šæ—¥å®Œæˆ**: åŸºäºå®é™…ä»£ç åˆ†æå®Œæˆæ–‡æ¡£æ›´æ–°ï¼Œåæ˜ é¡¹ç›®çœŸå®å®ç°çŠ¶æ€