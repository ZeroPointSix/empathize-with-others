# 黑盒测试指南

**文档版本**: v1.0
**适用阶段**: Domain Layer 完成后
**前置条件**: 需要完成 Data Layer 实现
**测试环境**: Android 真机（推荐）或模拟器

---

## 📋 目录

1. [测试概述](#测试概述)
2. [准备工作](#准备工作)
3. [基础设施测试](#基础设施测试)
4. [核心功能测试](#核心功能测试)
5. [边缘情况测试](#边缘情况测试)
6. [性能与体验测试](#性能与体验测试)
7. [问题排查指南](#问题排查指南)

---

## 测试概述

### 什么是黑盒测试？

黑盒测试是一种**不关注内部实现**的测试方法，只验证：
- 输入 → 输出 是否符合预期
- 用户体验是否流畅
- 功能是否按设计工作

对于本项目，黑盒测试主要验证：
1. ✅ **能否抓取**屏幕文字（ScreenFetcher）
2. ✅ **能否分析**聊天内容（AnalyzeChatUseCase）
3. ✅ **能否检测**雷区（CheckDraftUseCase）
4. ✅ **能否导入**数据（FeedTextUseCase）

---

## 准备工作

### 1. 硬件与软件要求

#### ✅ 必需项

| 项目 | 要求 | 说明 |
|------|------|------|
| **Android 设备** | Android 7.0+ (API 24+) | 推荐使用真机 |
| **开发工具** | Android Studio | 用于编译和安装 APK |
| **测试应用** | 微信/QQ/任意聊天应用 | 用于模拟聊天场景 |
| **API Key** | OpenAI / DeepSeek / Claude | 必须有效的 API Key |

#### 💡 推荐配置

- **真机优先**: 模拟器可能存在权限问题
- **开发者选项**: 启用 USB 调试
- **网络环境**: 稳定的网络连接（AI 请求需要）

---

### 2. 编译与安装

#### Step 1: 编译 Debug APK

```bash
# 在项目根目录执行
./gradlew assembleDebug
```

**预期输出**:
```
BUILD SUCCESSFUL in 2m 33s
生成文件: app/build/outputs/apk/debug/app-debug.apk
```

#### Step 2: 安装到设备

**方法 A: 使用 ADB**
```bash
adb install app/build/outputs/apk/debug/app-debug.apk
```

**方法 B: 使用 Android Studio**
1. 连接设备
2. 点击 "Run" (绿色三角)
3. 选择目标设备

**验证安装**:
- 设备上出现 "共情AI助手" 图标
- 点击能正常启动应用

---

### 3. 权限配置（三件套）

#### ⚠️ 重要: 必须授予以下权限，否则应用无法正常工作

#### 3.1 无障碍服务 (AccessibilityService)

**作用**: 抓取屏幕文字、获取输入框内容

**配置步骤**:
1. 打开 **设置 → 辅助功能**
2. 找到 "**共情AI助手**"
3. 开启服务
4. 授权 "允许查看屏幕内容"

**验证方法**:
```
设置 → 辅助功能 → 已安装的服务
查看 "共情AI助手" 是否显示为 "开启"
```

**常见问题**:
- ❌ 找不到应用: 确认应用已安装
- ❌ 开关无法打开: 检查是否被安全软件拦截

---

#### 3.2 悬浮窗权限 (Overlay Permission)

**作用**: 在其他应用上层显示悬浮窗按钮

**配置步骤**:
1. 打开 **设置 → 应用管理**
2. 找到 "**共情AI助手**"
3. 点击 **权限** 或 **更多设置**
4. 开启 "**显示悬浮窗**" 或 "**在其他应用上层显示**"

**小米/OPPO/vivo 特殊步骤**:
- 小米: 设置 → 应用设置 → 授权管理 → 悬浮窗管理
- OPPO: 设置 → 应用管理 → 权限管理 → 悬浮窗
- vivo: i管家 → 应用管理 → 权限管理 → 悬浮窗

**验证方法**:
- 打开微信后，应该能看到悬浮窗图标
- 悬浮窗可以拖动

---

#### 3.3 后台弹出界面权限（部分手机）

**作用**: 允许应用在后台弹出分析结果卡片

**配置步骤**（小米示例）:
1. 设置 → 应用设置 → 共情AI助手
2. 其他权限 → **后台弹出界面** → 允许

**华为/荣耀**:
- 设置 → 应用 → 权限管理 → 后台弹出界面

**OPPO/vivo**:
- 通常包含在悬浮窗权限中

---

### 4. 基础配置

#### 4.1 配置 API Key

**步骤**:
1. 打开 "共情AI助手" 应用
2. 进入 **设置页面**
3. 选择 **AI 服务商**:
   - OpenAI
   - DeepSeek（推荐，价格便宜）
   - Claude
4. 输入 **API Key**
5. 点击 "**保存**"

**验证方法**:
- 重新打开设置页
- API Key 显示为 `sk-****...****`（已加密）

**获取 API Key**:
- OpenAI: https://platform.openai.com/api-keys
- DeepSeek: https://platform.deepseek.com/api_keys
- Claude: https://console.anthropic.com/settings/keys

---

#### 4.2 创建测试联系人

**步骤**:
1. 主页点击 **[+] 新建联系人**
2. 填写信息:
   - 名称: `测试员A`
   - 攻略目标: `建立长期信任关系`
   - 上下文深度: `10`（默认）
3. 点击 "保存"

**验证方法**:
- 主页列表显示 "测试员A"
- 点击进入详情页能看到完整信息

---

## 基础设施测试

### 测试 1: 权限检查 ⭐ P0

**目标**: 验证所有必需权限是否正确授予

**测试步骤**:

1. **打开共情AI助手**
2. **进入设置页面**
3. 查看 "**权限状态**" 区域

**预期结果**:
```
✅ 无障碍服务: 已开启
✅ 悬浮窗权限: 已授予
✅ 后台弹出: 已授予（部分手机）
```

**失败处理**:
- ❌ 任何一项显示 "未授予"
- → 点击对应项跳转到系统设置
- → 按照上方 "权限配置" 章节重新授权

---

### 测试 2: API Key 验证 ⭐ P0

**目标**: 验证 API Key 是否有效

**测试步骤**:

1. **设置页面** → 点击 "**测试连接**" 按钮
2. 等待请求返回（3-5 秒）

**预期结果**:
```
✅ 连接成功！
模型: gpt-3.5-turbo / deepseek-chat
```

**可能的失败情况**:

| 错误信息 | 原因 | 解决方法 |
|---------|------|---------|
| `401 Unauthorized` | API Key 无效 | 重新输入正确的 Key |
| `Network Error` | 网络问题 | 检查网络连接 |
| `Timeout` | 请求超时 | 重试或切换网络 |
| `Quota Exceeded` | 额度用尽 | 充值或更换 Key |

---

### 测试 3: 数据库读写 ⭐ P0

**目标**: 验证本地数据库是否正常工作

**测试步骤**:

1. **创建联系人**: 按照 4.2 创建 "测试员A"
2. **添加事实信息**:
   - 点击 "测试员A"
   - 点击 **[编辑]**
   - 添加事实: `{"爱好": "钓鱼", "住址": "朝阳区"}`
   - 保存
3. **关闭应用** (从后台完全杀掉)
4. **重新打开应用**
5. **检查数据**:
   - 进入 "测试员A" 详情
   - 确认事实信息依然存在

**预期结果**:
```
✅ 数据持久化成功
✅ 重启后数据不丢失
```

**失败处理**:
- ❌ 数据丢失
- → 检查 Logcat 日志
- → 查找 Room 数据库错误

---

## 核心功能测试

### 测试 4: 数据喂养（文本导入）⭐ P1

**目标**: 验证 AI 能否从文本中提取信息

**前置条件**:
- ✅ API Key 已配置
- ✅ 已创建 "测试员A"

**测试步骤**:

1. **进入 "测试员A" 详情页**
2. **点击 [+] 导入数据**
3. **选择 "粘贴文本"**
4. **输入测试文本**:
```
他叫李四，住在朝阳区，爱好是钓鱼。
他不喜欢吃香菜，也不喜欢别人提起钱的话题。
跟他聊天的时候，要多夸他衣品好。
```
5. **点击 "AI 提取"**
6. **等待 3-5 秒**

**预期结果**:

弹出确认对话框，显示:

```
📋 提取结果预览

【事实信息】
✅ 姓名: 李四
✅ 住址: 朝阳区
✅ 爱好: 钓鱼

【雷区（红灯）】
❌ 不吃香菜
❌ 不要提钱

【策略（绿灯）】
✅ 多夸他衣品好

[全选] [确认] [取消]
```

7. **点击 "确认"**

**验证方法**:
- 返回详情页
- 事实信息中显示: `{"姓名": "李四", "住址": "朝阳区", "爱好": "钓鱼"}`
- 策略标签列表显示:
  - 🔴 不吃香菜 (雷区)
  - 🔴 不要提钱 (雷区)
  - 🟢 多夸他衣品好 (策略)

**可能的失败情况**:

| 现象 | 原因 | 解决方法 |
|------|------|---------|
| 提取结果为空 | AI 未正确解析 | 简化文本，重试 |
| 分类错误 | Prompt 设计问题 | 记录日志，反馈问题 |
| 请求失败 | API 错误 | 检查 Logcat 日志 |

---

### 测试 5: 主动风控（防踩雷）⭐ P0

**目标**: 验证实时雷区检测是否工作

**前置条件**:
- ✅ "测试员A" 已添加雷区: "不要提钱"
- ✅ 悬浮窗权限已授予

**测试步骤**:

1. **打开微信**（或任意聊天应用）
2. **进入 "文件传输助手"**（模拟聊天）
3. **确认悬浮窗显示**:
   - 屏幕右侧应该有一个悬浮按钮
   - 可以拖动
4. **在输入框输入测试文字**:
```
今晚能不能借我点钱？
```
5. **点击悬浮窗上的 [🛡️ 检查] 按钮**
6. **等待 0.5-1 秒**

**预期结果**:

**立即反馈**（本地检测）:
```
⚠️ 检测到风险！

命中雷区:
• 不要提钱

建议: 删除敏感内容
```

- 悬浮窗变红
- 震动提醒（如果开启）
- Toast 提示

**验证 Logcat**:
```
CheckDraftUseCase: Draft check started
CheckDraftUseCase: Local match found - "钱"
CheckDraftUseCase: Result = DANGER
```

**测试安全文本**:

7. **清空输入框，重新输入**:
```
今晚一起吃饭吗？
```
8. **点击 [🛡️ 检查]**

**预期结果**:
```
✅ 检查通过！

未发现风险内容
```

**性能要求**:
- ⏱️ 本地检测响应时间 < 500ms
- ⏱️ 云端检测（如启用）< 3s

---

### 测试 6: 主动分析（AI 军师）⭐ P0

**目标**: 验证 RAG 分析功能是否正常

**前置条件**:
- ✅ "测试员A" 已配置:
  - 目标: "建立长期信任"
  - 事实: {"爱好": "钓鱼"}
  - 雷区: "不要提钱"
  - 策略: "多夸他衣品好"
- ✅ API Key 已配置

**测试步骤**:

1. **打开微信** → **文件传输助手**
2. **构造聊天上下文**（模拟对话）:

```
[我] 你好呀
[对方] 心情不太好
[我] 怎么了？
[对方] 今天钓鱼没收获
```

3. **点击悬浮窗 [💡 分析] 按钮**
4. **等待 3-10 秒**（AI 请求）

**预期结果**:

**悬浮窗展开，显示分析卡片**:

```
━━━━━━━━━━━━━━━━━━━━━━
💭 AI 军师分析
━━━━━━━━━━━━━━━━━━━━━━

【对方状态】
情绪: 略显沮丧
原因: 钓鱼没有收获，可能感到失落

【关键洞察】
• 对方热爱钓鱼（匹配画像）
• 目前需要安慰和鼓励
• 避免提及金钱话题（雷区）

【建议回复】
"没事的，钓鱼本来就看运气。你今天
穿的这身衣服真不错，很精神！下次
换个地方试试，说不定会有惊喜。"

[复制] [填充] [关闭]
━━━━━━━━━━━━━━━━━━━━━━
```

**验证要点**:

5. **检查分析内容是否包含画像信息**:
   - ✅ 提到 "钓鱼"（来自事实槽）
   - ✅ 避免提钱（遵守雷区）
   - ✅ 建议夸衣品（使用策略）

6. **点击 [填充] 按钮**:
   - 建议回复自动填入微信输入框
   - 可以手动编辑后发送

**验证 Logcat**:
```
AnalyzeChatUseCase: Starting analysis for contact_1
ScreenFetcher: Captured 4 messages
PrivacyEngine: Masked text sent to AI
AiRepository: Prompt contains "爱好: 钓鱼"
AiRepository: Response received
UI: Displaying analysis card
```

**性能要求**:
- ⏱️ 屏幕抓取时间 < 2s
- ⏱️ AI 响应时间 < 10s

---

### 测试 7: 隐私脱敏验证 ⭐ P0

**目标**: 验证敏感信息不会泄露给 AI

**前置条件**:
- ✅ 已配置隐私映射规则

**测试步骤**:

1. **设置页面** → **隐私规则**
2. **添加规则**:
```
原始信息: 张三
脱敏后: [NAME_01]

原始信息: 13800138000
脱敏后: [PHONE_01]
```
3. **保存**

4. **创建测试场景**:
   - 打开微信
   - 发送消息: "我是张三，电话是13800138000"

5. **点击 [💡 分析]**

6. **检查网络请求**（使用抓包工具或 Logcat）:

**验证 Logcat**:
```
PrivacyEngine: Original - "我是张三，电话是13800138000"
PrivacyEngine: Masked - "我是[NAME_01]，电话是[PHONE_01]"
AiRepository: Sending to API - "我是[NAME_01]，电话是[PHONE_01]"
```

**预期结果**:
- ✅ 发送给 AI 的内容**不包含**真实姓名和电话
- ✅ 包含占位符 `[NAME_01]` 和 `[PHONE_01]`

**失败情况**:
- ❌ 如果 Logcat 中 `AiRepository` 发送的内容包含 "张三" 或 "13800138000"
- → **严重安全问题！** 立即停止测试并修复代码

---

## 边缘情况测试

### 测试 8: 无权限测试 ⭐ P1

**目标**: 验证权限缺失时的错误处理

**测试步骤**:

1. **关闭无障碍服务**:
   - 设置 → 辅助功能 → 共情AI助手 → 关闭

2. **打开微信，点击 [💡 分析]**

**预期结果**:
```
❌ 权限不足

请先开启无障碍服务才能使用此功能

[去开启] [取消]
```

- ✅ **不应该崩溃**
- ✅ 提示信息清晰
- ✅ [去开启] 按钮跳转到正确的设置页面

---

### 测试 9: 断网测试 ⭐ P1

**目标**: 验证网络异常时的处理

**测试步骤**:

1. **打开飞行模式**
2. **点击 [💡 分析]**

**预期结果**:
```
❌ 网络连接失败

请检查网络设置后重试

[重试] [取消]
```

- ✅ 不崩溃
- ✅ Loading 状态正确结束
- ✅ 提示信息友好

**网络恢复测试**:

3. **关闭飞行模式**
4. **点击 [重试]**

**预期结果**:
- ✅ 正常完成分析请求

---

### 测试 10: API Key 失效测试 ⭐ P1

**目标**: 验证 API 认证失败的处理

**测试步骤**:

1. **设置页面** → **API Key**
2. **故意输入错误的 Key**: `sk-wrong123456`
3. **保存**
4. **点击 [💡 分析]**

**预期结果**:
```
❌ API 认证失败

API Key 无效或已过期
错误代码: 401 Unauthorized

[重新配置] [取消]
```

- ✅ 不崩溃
- ✅ 错误信息包含 HTTP 状态码
- ✅ [重新配置] 跳转到设置页

---

### 测试 11: 空内容测试 ⭐ P1

**目标**: 验证边界输入的处理

**测试场景 1: 空聊天记录**

1. **打开一个空白聊天窗口**
2. **点击 [💡 分析]**

**预期结果**:
```
⚠️ 内容为空

当前聊天记录为空，无法进行分析

[确定]
```

**测试场景 2: 空草稿检查**

1. **输入框为空**
2. **点击 [🛡️ 检查]**

**预期结果**:
```
⚠️ 内容为空

请先输入文字再进行检查

[确定]
```

---

### 测试 12: 超长文本测试 ⭐ P2

**目标**: 验证大量文本的处理

**测试步骤**:

1. **构造超长聊天记录**（50+ 条消息）
2. **点击 [💡 分析]**

**预期行为**:
- ✅ 根据 `contextDepth` 设置（默认 10）只取最近 10 条
- ✅ 不会因为消息过多而卡顿
- ✅ Prompt 长度在合理范围内（< 4000 tokens）

**验证 Logcat**:
```
AnalyzeChatUseCase: Raw context size = 50
AnalyzeChatUseCase: After limit = 10
AiRepository: Prompt length = 1200 characters
```

---

## 性能与体验测试

### 测试 13: 响应时间测试 ⭐ P1

**目标**: 验证各功能的响应速度

| 功能 | 操作 | 预期时间 | 实际时间 | 结果 |
|------|------|---------|---------|------|
| **本地检查** | 点击 [🛡️ 检查] | < 500ms | ____ms | ☐ |
| **屏幕抓取** | 开始分析 → 抓取完成 | < 2s | ____s | ☐ |
| **AI 分析** | 发送请求 → 收到响应 | < 10s | ____s | ☐ |
| **UI 渲染** | 收到响应 → 显示卡片 | < 200ms | ____ms | ☐ |
| **数据导入** | AI 提取 → 返回结果 | < 10s | ____s | ☐ |

**测试工具**: 秒表或 Logcat 时间戳

**不合格标准**:
- ❌ 本地检查 > 1s
- ❌ AI 分析 > 15s
- ❌ 屏幕抓取 > 5s

---

### 测试 14: 内存与流畅度 ⭐ P2

**目标**: 验证应用不会导致卡顿

**测试步骤**:

1. **打开 Android Studio Profiler**
2. **连接设备，选择 "共情AI助手" 进程**
3. **执行以下操作**:
   - 连续点击 [💡 分析] 10 次
   - 快速切换不同联系人
   - 导入大量数据

**监控指标**:
- **内存使用**: < 200MB
- **CPU 占用**: < 30%
- **帧率**: > 30 FPS

**验收标准**:
- ✅ 无 ANR (Application Not Responding)
- ✅ 无明显卡顿
- ✅ 内存稳定（无内存泄漏）

---

### 测试 15: 多设备兼容性 ⭐ P2

**目标**: 验证不同设备的兼容性

**推荐测试设备**:

| 品牌 | 系统版本 | 屏幕尺寸 | 重点测试项 |
|------|---------|---------|----------|
| 小米 | MIUI 14 | 6.67" | 权限管理、后台限制 |
| 华为/荣耀 | HarmonyOS | 6.1" | 悬浮窗权限 |
| OPPO | ColorOS | 6.4" | 后台弹出权限 |
| vivo | OriginOS | 6.5" | 无障碍服务稳定性 |
| 原生 Android | Android 13 | 任意 | 基准测试 |

**关键验证点**:
- ✅ 悬浮窗在所有设备正常显示
- ✅ 无障碍服务不被系统杀掉
- ✅ UI 适配不同屏幕尺寸

---

## 问题排查指南

### 常见问题与解决方案

#### 问题 1: 悬浮窗不显示

**可能原因**:
1. 权限未授予
2. Service 未启动
3. 被系统拦截

**排查步骤**:
```bash
# 1. 检查权限
adb shell dumpsys window | grep -i "shared.ai"

# 2. 检查 Service 状态
adb shell dumpsys activity services | grep -i "FloatingWindow"

# 3. 查看日志
adb logcat | grep -i "FloatingWindow"
```

**解决方法**:
- 重新授予悬浮窗权限
- 重启应用
- 检查代码中 `FloatingWindowService` 是否正确启动

---

#### 问题 2: 无法抓取屏幕文字

**可能原因**:
1. 无障碍服务未开启
2. 目标应用不支持抓取
3. 权限被系统限制

**排查步骤**:
```bash
# 检查无障碍服务
adb shell settings get secure enabled_accessibility_services

# 查看日志
adb logcat | grep -i "AccessibilityService"
```

**Logcat 关键日志**:
```
✅ 正常: AccessibilityService: onAccessibilityEvent
❌ 异常: AccessibilityService: Service not connected
```

**解决方法**:
- 确认无障碍服务在 "设置 → 辅助功能" 中已开启
- 重启无障碍服务
- 某些应用（如银行类）可能禁止抓取，属于正常现象

---

#### 问题 3: AI 请求失败

**可能原因**:
1. API Key 无效
2. 网络问题
3. 服务商限流
4. Prompt 过长

**排查步骤**:

**查看完整错误日志**:
```bash
adb logcat | grep -E "(AiRepository|Retrofit|OkHttp)"
```

**常见错误码**:

| 错误码 | 含义 | 解决方法 |
|-------|------|---------|
| 401 | 认证失败 | 检查 API Key |
| 429 | 请求过多 | 等待或升级套餐 |
| 500 | 服务器错误 | 稍后重试 |
| Timeout | 超时 | 检查网络或增加超时时间 |

---

#### 问题 4: 应用崩溃 (Crash)

**立即操作**:
```bash
# 捕获崩溃日志
adb logcat -d > crash_log.txt

# 或使用过滤
adb logcat -d *:E > error_log.txt
```

**分析日志**:
- 查找 `FATAL EXCEPTION` 关键词
- 定位 Stack Trace 中的关键文件和行号
- 检查是否是空指针 (NullPointerException)

**常见崩溃原因**:
1. Repository 返回 null（应该返回 `Result.failure`）
2. 未检查权限直接调用
3. 主线程执行网络请求

---

#### 问题 5: 数据丢失

**可能原因**:
1. 数据库未正确初始化
2. 事务回滚
3. 应用数据被清除

**排查步骤**:
```bash
# 导出数据库文件
adb exec-out run-as com.empathy.ai cat databases/empathy_db > empathy_db.db

# 使用 SQLite 工具查看
sqlite3 empathy_db.db
sqlite> .tables
sqlite> SELECT * FROM contact_profiles;
```

**验证方法**:
- 检查数据库文件是否存在
- 查询表中是否有数据
- 检查 Room 初始化日志

---

## 测试记录模板

### 测试报告模板

```markdown
# 黑盒测试报告

**测试日期**: 2025-XX-XX
**测试人员**: XXX
**应用版本**: v1.0.0-debug
**测试设备**: 小米 13 (MIUI 14, Android 13)

## 测试环境

- ✅ API Key: DeepSeek (已验证)
- ✅ 网络: Wi-Fi (稳定)
- ✅ 权限: 全部授予

## 测试结果汇总

| 测试项 | 结果 | 备注 |
|-------|------|------|
| 基础设施-权限检查 | ✅ | 全部通过 |
| 基础设施-API验证 | ✅ | 响应时间 1.2s |
| 基础设施-数据库 | ✅ | 数据持久化正常 |
| 核心功能-数据喂养 | ✅ | AI 提取准确 |
| 核心功能-主动风控 | ✅ | 检测响应 < 500ms |
| 核心功能-主动分析 | ✅ | 分析准确，时间 5.3s |
| 核心功能-隐私脱敏 | ✅ | 敏感信息已替换 |
| 边缘情况-无权限 | ✅ | 提示友好 |
| 边缘情况-断网 | ✅ | 错误处理正确 |
| 边缘情况-Key失效 | ✅ | 错误提示清晰 |
| 性能-响应时间 | ✅ | 符合预期 |
| 性能-内存占用 | ✅ | < 150MB |

## 发现的问题

### 问题 1: [标题]
- **严重级别**: P0 / P1 / P2
- **复现步骤**: ...
- **预期结果**: ...
- **实际结果**: ...
- **日志信息**: ...

## 总体评价

- **功能完整性**: ⭐⭐⭐⭐⭐
- **稳定性**: ⭐⭐⭐⭐☆
- **性能**: ⭐⭐⭐⭐☆
- **用户体验**: ⭐⭐⭐⭐☆

## 建议

1. ...
2. ...

```

---

## 附录

### A. 推荐的测试工具

| 工具 | 用途 | 下载链接 |
|------|------|---------|
| **ADB** | 调试与日志 | Android SDK |
| **Charles / Fiddler** | 网络抓包 | https://www.charlesproxy.com |
| **Android Studio Profiler** | 性能分析 | Android Studio 内置 |
| **Logcat Reader** | 日志查看 | Play Store |

---

### B. Logcat 过滤命令

**查看应用日志**:
```bash
adb logcat | grep "com.empathy.ai"
```

**查看错误日志**:
```bash
adb logcat *:E
```

**查看特定标签**:
```bash
adb logcat -s AnalyzeChatUseCase
```

**保存日志到文件**:
```bash
adb logcat -d > test_log.txt
```

---

### C. 快速检查清单

**测试前检查 ✅**
- ☐ 应用已安装
- ☐ 三个权限已授予
- ☐ API Key 已配置且有效
- ☐ 已创建测试联系人
- ☐ 网络连接正常

**测试后检查 ✅**
- ☐ 所有核心功能已测试
- ☐ 至少一个边缘情况已测试
- ☐ 发现的问题已记录
- ☐ 日志已保存

---

## 总结

黑盒测试的目标是：
1. ✅ **验证功能** - 确保所有功能按设计工作
2. ✅ **发现问题** - 在用户使用前发现 Bug
3. ✅ **保证体验** - 确保应用流畅、友好
4. ✅ **积累反馈** - 为后续优化提供依据

**重点测试优先级**:
- **P0 (必须)**: 基础设施、核心功能、隐私脱敏
- **P1 (重要)**: 边缘情况、性能、错误处理
- **P2 (建议)**: 多设备兼容性、极端场景

**下一步**:
- 完成 Data Layer 实现
- 执行本测试指南
- 根据测试结果优化代码
- 准备 MVP 发布

---

**维护者**: hushaokang
**最后更新**: 2025-12-02
