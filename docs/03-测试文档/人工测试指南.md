# Android 应用人工测试指南

## 📋 测试前准备

### 1. 开发环境检查
- ✅ Android Studio 已安装（推荐 Hedgehog 或更新版本）
- ✅ JDK 17 已配置
- ✅ Android SDK 已安装（需要 API 24-35）
- ✅ Gradle 同步成功

### 2. 测试设备准备
选择以下任一方式：

#### 方式A：Android 模拟器（推荐新手）
1. 打开 Android Studio
2. 点击 `Tools` → `Device Manager`
3. 创建虚拟设备：
   - 设备型号：Pixel 5 或更新
   - 系统镜像：Android 11 (API 30) 或更高
   - 点击 `Create Virtual Device`

#### 方式B：真实设备（推荐）
1. 在手机上启用开发者选项：
   - 进入 `设置` → `关于手机`
   - 连续点击 `版本号` 7次
2. 启用 USB 调试：
   - `设置` → `开发者选项` → `USB调试`
3. 用 USB 线连接电脑
4. 手机上授权 USB 调试

---

## 🔨 编译应用

### 方法1：使用 Android Studio（推荐）

#### 调试版本（Debug Build）
1. 打开 Android Studio
2. 打开项目目录：`e:/hushaokang/Data-code/Love`
3. 等待 Gradle 同步完成（首次可能需要几分钟）
4. 点击工具栏的 **绿色三角形（Run）** 按钮
   - 或使用快捷键：`Shift + F10`
5. 选择目标设备（模拟器或真机）
6. 等待编译和安装完成

#### 发布版本（Release Build）
1. 菜单栏：`Build` → `Select Build Variant`
2. 选择 `release`
3. 菜单栏：`Build` → `Build Bundle(s) / APK(s)` → `Build APK(s)`
4. 等待编译完成
5. APK 位置：`app/build/outputs/apk/release/app-release.apk`

### 方法2：使用命令行

#### 调试版本
```bash
# 在项目根目录执行
gradlew assembleDebug
```
输出位置：`app/build/outputs/apk/debug/app-debug.apk`

#### 发布版本
```bash
gradlew assembleRelease
```
输出位置：`app/build/outputs/apk/release/app-release.apk`

#### 直接安装到设备
```bash
# 编译并安装调试版本
gradlew installDebug

# 启动应用
adb shell am start -n com.empathy.ai/.presentation.ui.MainActivity
```

---

## 🧪 功能测试清单

### 测试环境信息
- **应用包名**：`com.empathy.ai`
- **最低 Android 版本**：Android 7.0 (API 24)
- **目标 Android 版本**：Android 14 (API 35)

### 核心功能测试

#### 1. 应用启动测试
- [ ] 冷启动：完全退出后重新打开
- [ ] 热启动：从后台恢复
- [ ] 启动时间：应在 3 秒内显示界面
- [ ] 无崩溃、无 ANR（应用无响应）

#### 2. 联系人列表（ContactListScreen）
- [ ] 空状态显示正确
- [ ] 添加联系人按钮可点击
- [ ] 联系人列表正确显示
- [ ] 搜索功能正常
- [ ] 点击联系人进入详情页
- [ ] 下拉刷新功能
- [ ] 滚动流畅无卡顿

#### 3. 联系人详情（ContactDetailScreen）
- [ ] 联系人信息显示完整
- [ ] 标签显示正确
- [ ] 编辑按钮功能
- [ ] 删除按钮有确认对话框
- [ ] 返回按钮正常
- [ ] 分析对话按钮可用

#### 4. 对话分析（ChatAnalysisScreen）
- [ ] 输入框可输入文本
- [ ] 发送按钮正常
- [ ] 消息显示在列表中
- [ ] 滚动到最新消息
- [ ] AI 分析结果显示（需要网络）
- [ ] 错误处理（网络异常时）

#### 5. 脑标签管理（BrainTagScreen）
- [ ] 标签列表显示
- [ ] 添加新标签
- [ ] 编辑标签
- [ ] 删除标签（有确认）
- [ ] 标签颜色选择
- [ ] 分类筛选

#### 6. 设置页面（SettingsScreen）
- [ ] 隐私设置项
- [ ] AI 模型选择
- [ ] API Key 配置
- [ ] 关于页面

---

## 🎯 UI/UX 测试

### 界面检查
- [ ] Material 3 主题应用正确
- [ ] 颜色方案一致（紫色主色调）
- [ ] 深色模式切换正常
- [ ] 字体清晰可读
- [ ] 图标显示正确
- [ ] 动画流畅自然

### 响应式测试
- [ ] 不同屏幕尺寸适配
- [ ] 横屏/竖屏切换
- [ ] 键盘弹出时布局不错乱
- [ ] 触摸目标足够大（至少 48dp）

### 无障碍测试
- [ ] 内容描述完整
- [ ] 导航清晰
- [ ] 对比度符合标准

---

## 🔍 性能测试

### 基础性能指标
```bash
# 查看应用内存使用
adb shell dumpsys meminfo com.empathy.ai

# 查看 CPU 使用
adb shell top | grep com.empathy.ai

# 查看帧率
adb shell dumpsys gfxinfo com.empathy.ai
```

### 检查项
- [ ] 内存使用 < 200MB（正常使用）
- [ ] 无内存泄漏
- [ ] 帧率 > 50 FPS
- [ ] 应用包大小 < 20MB

---

## 🐛 问题记录模板

### 发现 Bug 时记录

```markdown
### Bug #XX: [简短描述]

**严重程度**：🔴 严重 / 🟡 中等 / 🟢 轻微

**复现步骤**：
1. 打开应用
2. 进入 XXX 页面
3. 点击 XXX 按钮
4. 观察到 XXX 问题

**预期行为**：
[描述应该发生什么]

**实际行为**：
[描述实际发生了什么]

**测试环境**：
- 设备：[如 Pixel 5]
- Android 版本：[如 Android 12]
- 应用版本：1.0.0

**截图/日志**：
[附加截图或 logcat 日志]
```

---

## 📊 测试报告模板

### 测试完成后填写

```markdown
# 人工测试报告

**测试日期**：2025-12-XX
**测试人员**：[姓名]
**应用版本**：1.0.0
**测试设备**：[设备型号 + Android 版本]

## 测试覆盖率
- 功能测试：XX/XX 通过
- UI/UX 测试：XX/XX 通过
- 性能测试：XX/XX 通过

## 发现问题
- 🔴 严重问题：X 个
- 🟡 中等问题：X 个
- 🟢 轻微问题：X 个

## 详细问题列表
[列出所有发现的问题]

## 总体评价
[整体使用体验描述]

## 建议
[改进建议]
```

---

## 🔧 常见问题解决

### 编译失败
```bash
# 清理项目
gradlew clean

# 重新同步依赖
gradlew --refresh-dependencies
```

### 无法连接设备
```bash
# 检查设备连接
adb devices

# 重启 adb
adb kill-server
adb start-server
```

### 应用崩溃
```bash
# 查看实时日志
adb logcat | grep -E "AndroidRuntime|empathy"

# 查看崩溃日志
adb logcat -d > crash_log.txt
```

### Gradle 同步慢
1. 修改 `gradle.properties` 添加：
```properties
org.gradle.daemon=true
org.gradle.parallel=true
org.gradle.caching=true
```

---

## 📱 快速测试流程

### 5分钟快速测试
1. ✅ 安装应用
2. ✅ 打开应用（无崩溃）
3. ✅ 浏览主要页面
4. ✅ 测试一个完整流程（添加联系人 → 分析对话）
5. ✅ 检查无明显 UI 问题

### 30分钟完整测试
1. ✅ 执行所有功能测试
2. ✅ 执行 UI/UX 测试
3. ✅ 检查性能指标
4. ✅ 记录发现的问题
5. ✅ 填写测试报告

---

## 🎬 测试视频录制

```bash
# 录制屏幕（最长 180 秒）
adb shell screenrecord /sdcard/test_video.mp4

# 停止录制（Ctrl+C）

# 下载视频
adb pull /sdcard/test_video.mp4 ./test_video.mp4
```

---

## ✅ 测试通过标准

应用可以发布当满足：
- ✅ 所有核心功能正常
- ✅ 无严重 Bug（🔴）
- ✅ 无崩溃和 ANR
- ✅ UI 无明显问题
- ✅ 性能指标达标

---

## 📞 需要帮助？

遇到问题时：
1. 检查 logcat 日志
2. 查看 `docs/03-测试文档/` 其他文档
3. 参考 Phase4 相关文档

**祝测试顺利！** 🎉