# 微信兼容性测试检查清单

**测试日期**: ___________ 12.7
**测试人员**: ___________  hu
**应用版本**: v1.0.0  
**设备型号**: ___________  oppo reno11 Pro(模拟器
**Android 版本**: ___________12

---

## ⚠️ 重要提示 - 拖动功能已修复

**已知问题**: 悬浮按钮无法拖动（Bug WX-001）  
**修复状态**: ✅ 已修复  
**修复日期**: 2025-12-07

### 如何验证修复

1. **重新构建和安装最新版本**
   ```bash
   ./gradlew assembleDebug
   ./gradlew installDebug
   ```

2. **快速验证**
   - 参考: `docs/05-FixBug/拖动功能快速验证指南.md`
   - 长按悬浮按钮并拖动
   - 确认按钮可以跟随手指移动

3. **如果仍然无法拖动**
   - 清理并重新构建: `./gradlew clean assembleDebug`
   - 重启设备
   - 查看日志: `adb logcat | grep FloatingView`
   - 参考: `docs/05-FixBug/悬浮按钮拖动功能修复报告.md`

---

## 测试前准备

### 环境检查

- [Y] Android 设备已连接
- [Y] 设备 Android 版本 ≥ 8.0
- [Y] 共情 AI 助手已安装
- [ ] 微信已安装（版本: _______）
- [Y] 网络连接正常
- [Y] 已创建测试联系人
- [Y] 已配置 AI 服务（API Key）

### 权限检查

- [ ] 悬浮窗权限已授予
- [Y] 网络权限已授予
- [Y] 前台服务权限已授予

---

## 测试用例 1: 悬浮按钮显示

**需求**: 8.1 - 在微信聊天界面正常显示悬浮按钮

### 测试步骤

1. [ ] 启动悬浮窗服务
2. [ ] 切换到微信应用
3. [ ] 进入聊天界面

### 检查项

- [ ] 悬浮按钮是否显示
- [ ] 悬浮按钮图标是否清晰
- [ ] 悬浮按钮位置是否合理
- [ ] 悬浮按钮是否遮挡重要内容

### 测试结果

- [ ] ✅ 通过
- [ ] ❌ 失败

**问题描述**（如果失败）:
```
[在此记录问题]
```

---

## 测试用例 2: 拖动和点击

**需求**: 8.2 - 在微信中点击悬浮按钮正常展开功能菜单

### 测试步骤

1. [ ] 拖动悬浮按钮到不同位置
2. [ ] 测试边缘吸附功能
3. [ ] 点击悬浮按钮展开菜单
4. [ ] 点击"帮我分析"按钮
5. [ ] 点击"帮我检查"按钮

### 检查项

- [ ] 拖动流畅无卡顿
- [ ] 边缘吸附正常工作
- [ ] 点击响应时间 < 300ms
- [ ] 菜单正常展开/收起
- [ ] 菜单按钮功能正常

### 性能测量

- 点击响应时间: _______ ms (目标: < 300ms)
- 拖动帧率: _______ FPS (目标: 60 FPS)

### 测试结果

- [ ] ✅ 通过
- [ ] ❌ 失败

**问题描述**（如果失败）:
```
[在此记录问题]
```

---

## 测试用例 3: 复制粘贴

**需求**: 8.3 - 从微信复制聊天内容后可以粘贴到输入框

### 测试步骤

1. [ ] 在微信中复制一条消息
2. [ ] 点击悬浮按钮展开菜单
3. [ ] 点击"帮我分析"
4. [ ] 在输入框中粘贴内容
5. [ ] 检查内容完整性
6. [ ] 提交测试

### 检查项

- [ ] 可以复制微信消息
- [ ] 可以粘贴到输入框
- [ ] 内容完整无误
- [ ] 支持多行文本
- [ ] 支持特殊字符（emoji）
- [ ] 字符计数正确
- [ ] 超过 5000 字符时显示警告

### 测试结果

- [ ] ✅ 通过
- [ ] ❌ 失败

**问题描述**（如果失败）:
```
[在此记录问题]
```

---

## 测试用例 4: 后台切换

**需求**: 8.4 - 微信切换到后台时保持悬浮按钮显示

### 测试步骤

1. [ ] 在微信中确认悬浮按钮显示
2. [ ] 按 Home 键返回桌面
3. [ ] 打开其他应用
4. [ ] 切换回微信
5. [ ] 锁屏后解锁
6. [ ] 等待 5 分钟后检查

### 检查项

- [ ] 切换到后台时悬浮按钮保持显示
- [ ] 切换回微信时悬浮按钮仍然显示
- [ ] 悬浮按钮位置保持不变
- [ ] 锁屏后解锁悬浮按钮仍然显示
- [ ] 长时间后台后悬浮按钮仍然显示
- [ ] 通知栏显示服务运行中

### 测试结果

- [ ] ✅ 通过
- [ ] ❌ 失败

**问题描述**（如果失败）:
```
[在此记录问题]
```

---

## 测试用例 5: 多版本兼容性

**需求**: 8.5 - 微信版本更新时保持基本功能可用

### 微信 8.0.48

- [ ] 悬浮按钮显示
- [ ] 拖动和点击
- [ ] 复制粘贴
- [ ] 后台切换

**测试结果**: [ ] ✅ 通过 / [ ] ❌ 失败

### 微信 8.0.47

- [ ] 悬浮按钮显示
- [ ] 拖动和点击
- [ ] 复制粘贴
- [ ] 后台切换

**测试结果**: [ ] ✅ 通过 / [ ] ❌ 失败

### 微信 8.0.46

- [ ] 悬浮按钮显示
- [ ] 拖动和点击
- [ ] 复制粘贴
- [ ] 后台切换

**测试结果**: [ ] ✅ 通过 / [ ] ❌ 失败

---

## 性能测试

### 内存占用

测试方法：
```bash
adb shell dumpsys meminfo com.empathy.ai
```

- 内存占用: _______ MB (目标: < 150MB)
- [ ] ✅ 通过 / [ ] ❌ 失败

### CPU 使用率

测试方法：
```bash
adb shell top -n 1 | grep com.empathy.ai
```

- CPU 使用率: _______ % (目标: < 10%)
- [ ] ✅ 通过 / [ ] ❌ 失败

---

## 可选功能测试

### 微信运行检测

- [ ] 能检测到微信是否安装
- [ ] 能检测到微信是否运行
- [ ] 能获取微信版本信息
- [ ] 能识别支持的微信版本

**测试结果**: [ ] ✅ 通过 / [ ] ❌ 失败 / [ ] ⊘ 跳过

---

## 测试总结

### 通过率

- 总测试用例: 6
- 通过: _______
- 失败: _______
- 跳过: _______
- 通过率: _______ %

### 发现的问题

#### 高优先级

1. ___________________________________________
2. ___________________________________________

#### 中优先级

1. ___________________________________________
2. ___________________________________________

#### 低优先级

1. ___________________________________________
2. ___________________________________________

### 结论

[ ] ✅ 所有测试通过，可以发布  
[ ] ⚠️ 部分测试失败，需要修复  
[ ] ❌ 严重问题，不建议发布

### 建议

```
[在此记录测试建议和改进意见]
```

---

**测试完成时间**: ___________  
**签名**: ___________
