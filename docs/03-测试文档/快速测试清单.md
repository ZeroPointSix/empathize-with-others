# 快速测试清单

**适用场景**: 快速验证应用基本功能
**预计耗时**: 15-20 分钟
**前置条件**: Data Layer 已实现并编译成功

---

## 🚀 准备阶段 (5 分钟)

### 1. 安装应用

```bash
./gradlew assembleDebug
adb install app/build/outputs/apk/debug/app-debug.apk
```

**验证**: 设备上出现 "共情AI助手" 图标 ✅

---

### 2. 授予权限（三件套）

#### ✅ 无障碍服务
```
设置 → 辅助功能 → 共情AI助手 → 开启
```

#### ✅ 悬浮窗权限
```
设置 → 应用管理 → 共情AI助手 → 权限 → 显示悬浮窗 → 允许
```

#### ✅ 后台弹出（小米/OV 手机）
```
设置 → 应用设置 → 共情AI助手 → 其他权限 → 后台弹出界面 → 允许
```

---

### 3. 配置 API Key

1. 打开应用 → 设置
2. 选择服务商: **DeepSeek**（推荐）
3. 输入 API Key: `sk-xxxxx...`
4. 点击 "测试连接"

**验证**: 显示 "✅ 连接成功" ✅

---

### 4. 创建测试联系人

1. 主页 → [+] 新建联系人
2. 填写:
   - 名称: `测试员A`
   - 目标: `建立信任`
3. 保存

**验证**: 主页列表显示 "测试员A" ✅

---

## 🧪 核心功能测试 (10 分钟)

### 测试 1: 数据喂养 (2 分钟)

**步骤**:
1. 点击 "测试员A" → [+] 导入数据 → 粘贴文本
2. 输入:
```
他叫李四，住朝阳区，爱好钓鱼。
不喜欢吃香菜，不要提钱。
要多夸他衣品好。
```
3. 点击 "AI 提取"

**预期结果**: ✅
```
事实: {"姓名":"李四", "住址":"朝阳区", "爱好":"钓鱼"}
雷区: "不吃香菜", "不要提钱"
策略: "多夸他衣品好"
```

**实际结果**: ☐ 通过 / ☐ 失败

---

### 测试 2: 主动风控 (3 分钟)

**步骤**:
1. 打开微信 → 文件传输助手
2. 输入框输入: `今晚能借钱吗？`
3. 点击悬浮窗 [🛡️ 检查]

**预期结果**: ✅
```
⚠️ 检测到风险！
命中雷区: 不要提钱
```

**实际结果**: ☐ 通过 / ☐ 失败

**安全测试**:
4. 清空输入框，输入: `今晚一起吃饭？`
5. 点击 [🛡️ 检查]

**预期结果**: ✅
```
✅ 检查通过！
```

**实际结果**: ☐ 通过 / ☐ 失败

---

### 测试 3: 主动分析 (5 分钟)

**步骤**:
1. 微信聊天窗口构造对话:
```
[我] 你好
[对方] 心情不太好
[我] 怎么了？
[对方] 今天钓鱼没收获
```
2. 点击悬浮窗 [💡 分析]
3. 等待 5-10 秒

**预期结果**: ✅
```
显示分析卡片:
- 对方状态: 略显沮丧
- 关键洞察: 提到钓鱼（匹配画像）
- 建议回复: 包含安慰 + 夸衣品
```

**验证要点**:
- ☐ 分析提到 "钓鱼"（来自事实槽）
- ☐ 建议夸 "衣品"（使用策略）
- ☐ 没有提到 "钱"（遵守雷区）

**实际结果**: ☐ 通过 / ☐ 失败

---

## ⚠️ 边缘情况测试 (5 分钟)

### 测试 4: 断网测试 (2 分钟)

**步骤**:
1. 打开飞行模式
2. 点击 [💡 分析]

**预期结果**: ✅
```
❌ 网络连接失败
请检查网络设置后重试
```

**实际结果**: ☐ 通过 / ☐ 失败

**恢复测试**:
3. 关闭飞行模式
4. 重试

**预期**: 正常完成分析 ✅

---

### 测试 5: 空内容测试 (1 分钟)

**步骤**:
1. 打开空白聊天窗口
2. 点击 [💡 分析]

**预期结果**: ✅
```
⚠️ 内容为空
无法进行分析
```

**实际结果**: ☐ 通过 / ☐ 失败

---

### 测试 6: 无权限测试 (2 分钟)

**步骤**:
1. 设置 → 辅助功能 → 关闭 "共情AI助手"
2. 打开微信，点击 [💡 分析]

**预期结果**: ✅
```
❌ 权限不足
请先开启无障碍服务

[去开启] 按钮
```

**实际结果**: ☐ 通过 / ☐ 失败

**重要**: 测试完记得重新打开权限！

---

## 📊 测试结果汇总

| 测试项 | 结果 | 备注 |
|-------|------|------|
| 1. 数据喂养 | ☐ 通过 ☐ 失败 | |
| 2. 主动风控 | ☐ 通过 ☐ 失败 | |
| 3. 主动分析 | ☐ 通过 ☐ 失败 | |
| 4. 断网处理 | ☐ 通过 ☐ 失败 | |
| 5. 空内容处理 | ☐ 通过 ☐ 失败 | |
| 6. 无权限处理 | ☐ 通过 ☐ 失败 | |

**通过率**: ___/6 ( ___% )

---

## 🐛 问题记录

### 问题 1
- **测试项**: ___________
- **现象**: ___________
- **复现步骤**: ___________
- **日志**: ___________

### 问题 2
- **测试项**: ___________
- **现象**: ___________
- **复现步骤**: ___________
- **日志**: ___________

---

## ✅ 测试通过标准

**最低要求**:
- ✅ 核心功能 (测试 1-3) 全部通过
- ✅ 至少 1 个边缘情况测试通过

**理想标准**:
- ✅ 所有 6 个测试全部通过
- ✅ 无崩溃、无 ANR
- ✅ 性能流畅（本地检查 < 500ms，AI 分析 < 10s）

---

## 📝 下一步

### 如果测试通过 ✅
- 继续完善功能
- 进行完整黑盒测试 (参考《黑盒测试指南.md》)
- 准备用户 Beta 测试

### 如果测试失败 ❌
- 查看 Logcat 日志:
  ```bash
  adb logcat | grep -E "(Error|Exception)"
  ```
- 定位问题代码
- 修复后重新测试

---

**测试日期**: __________
**测试人员**: __________
**测试设备**: __________
**应用版本**: __________

---

**维护者**: hushaokang
**最后更新**: 2025-12-02
