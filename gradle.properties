# Project-wide Gradle settings.
# 编译优化配置 - 2025-12-21 更新
# 硬件: i7-13650HX (14核20线程) + 24GB RAM

# ============================================
# JVM 配置 (针对 24GB 内存优化)
# ============================================
org.gradle.java.home=C:\\Program Files\\Java\\jdk-17

# JVM 参数优化：
# - Xmx4g: 最大堆4GB（降低以适应系统页面文件限制）
# - Xms1g: 初始堆1GB，按需扩展
# - XX:+UseG1GC: G1垃圾收集器，大堆内存更高效
# - XX:MaxGCPauseMillis: 控制GC暂停时间
# - XX:+UseStringDeduplication: 字符串去重，节省内存
org.gradle.jvmargs=-Xmx4g -Xms1g -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+UseStringDeduplication -XX:MaxMetaspaceSize=512m -Dfile.encoding=UTF-8

# ============================================
# 并行构建优化 (针对 14核20线程)
# ============================================
# 启用并行编译
org.gradle.parallel=true

# 设置最大工作线程数（逻辑核心数的一半，留资源给系统）
org.gradle.workers.max=10

# 启用构建缓存
org.gradle.caching=true

# 按需配置
org.gradle.configureondemand=true

# 配置缓存 - Gradle 8.x 新特性
org.gradle.configuration-cache=true

# Daemon 配置
org.gradle.daemon=true
org.gradle.daemon.idletimeout=10800000

# ============================================
# Kotlin 编译优化
# ============================================
kotlin.code.style=official
kotlin.incremental=true
kotlin.incremental.useClasspathSnapshot=true

# Kotlin 编译器守护进程 - 适度内存分配
kotlin.daemon.jvmargs=-Xmx2g -XX:+UseG1GC

# 启用 K2 编译器（Kotlin 2.0 默认，更快）
kotlin.experimental.tryK2=true

# ============================================
# Android 特定优化
# ============================================
android.useAndroidX=true
android.nonTransitiveRClass=true

# 禁用不必要的构建特性
android.defaults.buildfeatures.aidl=false
android.defaults.buildfeatures.renderscript=false

# R8 全模式
android.enableR8.fullMode=true

# 启用 Jetifier 缓存
android.enableJetifier=false