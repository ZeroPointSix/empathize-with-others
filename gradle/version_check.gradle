// AGP ç‰ˆæœ¬å…¼å®¹æ€§æ£€æŸ¥
def agpVersion = com.android.Version.ANDROID_GRADLE_PLUGIN_VERSION
println "ğŸ” æ£€æµ‹åˆ° Android Gradle Plugin ç‰ˆæœ¬: ${agpVersion}"

// åºŸå¼ƒé…ç½®è­¦å‘Šæ˜ å°„
def deprecatedConfigs = [
    "android.enableBuildCache": "å·²åœ¨ AGP 7.0 åºŸå¼ƒï¼Œ8.0 ç§»é™¤",
    "android.buildcache.max-size": "å·²åœ¨ AGP 7.0 åºŸå¼ƒ",
    "android.buildcache.location": "å·²åœ¨ AGP 7.0 åºŸå¼ƒ",
    "android.aapt2.poolSize": "å·²åœ¨ AGP 8.0 åºŸå¼ƒ"
]

// æ£€æŸ¥ gradle.properties ä¸­çš„åºŸå¼ƒé…ç½®
def props = new Properties()
file("${rootDir}/gradle.properties").withInputStream {
    props.load(it)
}

println "âš ï¸  æ£€æŸ¥åºŸå¼ƒé…ç½®..."
deprecatedConfigs.each { config, message ->
    if (props.containsKey(config)) {
        println "âŒ åºŸå¼ƒé…ç½®: ${config} - ${message}"
        println "   å»ºè®®: ç§»é™¤æ­¤é…ç½®é¡¹"
    }
}

// AGP 8.x ä¸“ç”¨å»ºè®®
if (agpVersion.startsWith("8.")) {
    println "âœ… AGP 8.x å…¼å®¹æ€§æ£€æŸ¥é€šè¿‡"
    println "   ä½¿ç”¨ Gradle æ„å»ºç¼“å­˜æ›¿ä»£ Android æ„å»ºç¼“å­˜"
    println "   ç¡®ä¿æ‰€æœ‰ android.* é…ç½®ä¸ AGP 8.x å…¼å®¹"
}