# 微信兼容性测试快速参考

**一页纸快速参考** - 打印此页面随身携带

---

## 🚀 快速开始

### 1. 准备（5 分钟）

```bash
# 运行自动化脚本
scripts\run-wechat-compatibility-tests.bat
```

或手动执行：
```bash
./gradlew assembleDebug
./gradlew installDebug
```

### 2. 配置（3 分钟）

- [ ] 打开共情 AI 助手
- [ ] 设置 → 配置 AI 服务（输入 API Key）
- [ ] 联系人 → 创建测试联系人
- [ ] 设置 → 启用悬浮窗

### 3. 测试（15 分钟）

- [ ] 打开微信
- [ ] 执行 6 个测试用例
- [ ] 记录结果

---

## 📋 6 个核心测试用例

### ✅ 用例 1: 显示测试（2 分钟）
1. 启动悬浮窗服务
2. 切换到微信
3. 检查悬浮按钮是否显示

**检查**: 显示 / 清晰 / 位置合理

---

### ✅ 用例 2: 交互测试（3 分钟）
1. 拖动悬浮按钮
2. 测试边缘吸附
3. 点击展开菜单
4. 点击"帮我分析"和"帮我检查"

**检查**: 流畅 / 响应快 / 功能正常

---

### ✅ 用例 3: 复制粘贴（3 分钟）
1. 在微信中复制消息
2. 点击悬浮按钮 → 帮我分析
3. 粘贴内容
4. 提交测试

**检查**: 可复制 / 可粘贴 / 内容完整

---

### ✅ 用例 4: 后台切换（3 分钟）
1. 确认悬浮按钮显示
2. 按 Home 键
3. 打开其他应用
4. 切换回微信
5. 锁屏后解锁

**检查**: 始终显示 / 位置不变

---

### ✅ 用例 5: 版本兼容（每版本 3 分钟）
对每个微信版本重复用例 1-4

**版本**: 8.0.48 / 8.0.47 / 8.0.46

---

### ✅ 用例 6: 性能测试（3 分钟）

```bash
# 内存占用
adb shell dumpsys meminfo com.empathy.ai

# CPU 使用率
adb shell top -n 1 | grep com.empathy.ai
```

**目标**: 内存 < 150MB / 响应 < 300ms

---

## 🎯 性能指标

| 指标 | 目标 | 实际 | ✓/✗ |
|------|------|------|-----|
| 点击响应 | < 300ms | ___ | [ ] |
| 拖动帧率 | 60 FPS | ___ | [ ] |
| 内存占用 | < 150MB | ___ | [ ] |

---

## 🔧 常用命令

```bash
# 查看日志
adb logcat | grep FloatingWindow

# 查看内存
adb shell dumpsys meminfo com.empathy.ai

# 重启服务
adb shell am stopservice com.empathy.ai/.domain.service.FloatingWindowService
adb shell am startservice com.empathy.ai/.domain.service.FloatingWindowService

# 授予权限（需要 root）
adb shell appops set com.empathy.ai SYSTEM_ALERT_WINDOW allow
```

---

## ⚠️ 常见问题

| 问题 | 解决方案 |
|------|----------|
| 悬浮按钮不显示 | 检查权限 / 重启服务 |
| 拖动卡顿 | 检查硬件加速 |
| 后台消失 | 检查前台服务 |
| 无法粘贴 | 检查输入框焦点 |

---

## 📝 测试结果

### 通过率

- 总用例: 6
- 通过: ___
- 失败: ___
- 通过率: ____%

### 结论

[ ] ✅ 全部通过  
[ ] ⚠️ 部分失败  
[ ] ❌ 严重问题

---

## 📚 完整文档

- **详细指南**: `docs/03-测试文档/微信兼容性测试指南.md`
- **检查清单**: `docs/03-测试文档/微信兼容性测试检查清单.md`
- **完成总结**: `docs/02-开发指南/Task11-微信兼容性测试准备完成总结.md`

---

**测试日期**: ___________  
**测试人员**: ___________  
**签名**: ___________
