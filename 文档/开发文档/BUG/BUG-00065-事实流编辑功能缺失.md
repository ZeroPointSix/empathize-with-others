# BUG-00065：事实流编辑功能缺失

## 问题概述

【问题分类】功能缺失

【优先级】P2-中

【发现版本】未知

【发现时间】2025-01-09

---

## 问题描述

### 现象描述

在事实流模块中，用户添加事实后没有编辑功能。一旦事实被添加，就无法进行修改、删除或重新编辑。这给用户带来了极大的不便。

### 问题表现

1. **添加后不可修改**：用户添加事实后，只能查看，无法编辑
2. **删除困难**：没有提供删除已添加事实的入口
3. **无重新编辑选项**：无法对已添加的事实进行修正或更新

### 期望行为

用户应该能够对已添加的事实进行以下操作：

1. **编辑事实内容**：
   - 修改事实的文本内容
   - 调整事实的时间
   - 更改事实的分类或标签

2. **删除事实**：
   - 提供删除入口
   - 支持删除单个事实
   - 支持批量删除（如需要）

3. **时光轴和清单都支持**：
   - 时光轴视图中的事实可以编辑
   - 清单视图中的事实可以编辑

### 实际行为

- 用户添加事实后，事实被锁定
- 没有编辑按钮或菜单
- 无法删除不需要的事实

---

## 问题分析

### 影响范围

- **功能完整性**：事实流缺少编辑能力
- **用户体验**：用户无法修正错误或更新事实
- **数据管理**：无法维护事实数据的准确性

### 涉及模块

- 事实流模块
- 时光轴视图
- 清单视图
- 事实数据管理

---

## 测试步骤

1. 进入某个联系人的详情页面
2. 切换到「事实流」标签
3. 添加一个新的事实
4. 尝试找到编辑已添加事实的方法
   - 点击事实条目
   - 长按事实条目
   - 右键菜单（如果有）
   - 查看是否有编辑图标
5. 尝试找到删除已添加事实的方法
6. 在时光轴视图中重复以上测试
7. 在清单视图中重复以上测试
8. 记录发现的结果

---

## 实现方案

### 功能需求

#### 1. 编辑功能

- **入口设计**：
  - 点击事实条目展开编辑模式
  - 长按弹出编辑菜单
  - 添加编辑图标按钮

- **编辑内容**：
  - 事实文本编辑
  - 事实时间调整
  - 事实分类调整

- **保存逻辑**：
  - 保存修改后的数据
  - 更新界面显示

#### 2. 删除功能

- **入口设计**：
  - 长按弹出删除选项
  - 编辑模式中的删除按钮
  - 滑动删除（如适用）

- **删除确认**：
  - 二次确认弹窗
  - 防止误删

- **删除逻辑**：
  - 从数据库删除
  - 更新界面显示

#### 3. UI 适配

- 时光轴视图的编辑 UI
- 清单视图的编辑 UI
- 统一的编辑体验

---

## 相关问题

- 来源：BUG-00059 人工测试问题
- 相关模块：事实流
- 相关视图：时光轴、清单

---

## 备注

这是一个**功能完善**需求，需要为事实流添加完整的编辑能力。建议：
1. 先设计编辑和删除的 UI 方案
2. 实现基础的单事实编辑功能
3. 实现删除功能
4. 支持时光轴和清单两种视图
5. 优化编辑体验（如自动保存草稿等）
