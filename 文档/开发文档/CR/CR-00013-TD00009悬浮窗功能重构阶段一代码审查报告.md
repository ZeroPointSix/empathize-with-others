# CR-00013: TD00009æ‚¬æµ®çª—åŠŸèƒ½é‡æ„é˜¶æ®µä¸€ä»£ç å®¡æŸ¥æŠ¥å‘Š

> **æ–‡æ¡£ç±»å‹**: ä»£ç å®¡æŸ¥æŠ¥å‘Š (CR)  
> **ç‰ˆæœ¬**: 1.0  
> **åˆ›å»ºæ—¥æœŸ**: 2025-12-17  
> **å®¡æŸ¥äºº**: Roo  
> **çŠ¶æ€**: âœ… å®Œæˆ  
> **ä¼˜å…ˆçº§**: ğŸ”´ é«˜  
> **å®¡æŸ¥æ–‡æ¡£**: TD-00009-æ‚¬æµ®çª—åŠŸèƒ½é‡æ„ä»»åŠ¡æ¸…å•  
> **å®¡æŸ¥èŒƒå›´**: æ‚¬æµ®çª—åŠŸèƒ½é‡æ„é˜¶æ®µä¸€ï¼ˆUseCaseå±‚ã€Repositoryå±‚ã€æ•°æ®æ¨¡å‹ï¼‰

---

## ğŸ“„ æ–‡æ¡£ä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|------|------|
| æ–‡æ¡£ç±»å‹ | CR (Code Review) |
| æ–‡æ¡£ç¼–å· | CR-00013 |
| åŠŸèƒ½åç§° | TD00009æ‚¬æµ®çª—åŠŸèƒ½é‡æ„é˜¶æ®µä¸€ä»£ç å®¡æŸ¥æŠ¥å‘Š |
| ç‰ˆæœ¬ | 1.0 |
| åˆ›å»ºæ—¥æœŸ | 2025-12-17 |
| ä½œè€… | Roo |
| å®¡æ ¸äºº | - |
| å…³è”æ–‡æ¡£ | TD-00009, TDD-00009, PRD-00009 |

---

## ğŸ“Š è´¨é‡è¯„åˆ†

| è¯„ä¼°ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|---------|------|------|
| æ¶æ„åˆè§„æ€§ | 5.0/10 | å­˜åœ¨UseCaseç›´æ¥ä¾èµ–æœåŠ¡å±‚çš„æ¶æ„è¿è§„ |
| ä»£ç è§„èŒƒ | 8.5/10 | éµå¾ªé¡¹ç›®ç¼–ç è§„èŒƒï¼Œç»“æ„æ¸…æ™° |
| æµ‹è¯•è¦†ç›– | 4.0/10 | æµ‹è¯•è¦†ç›–ä¸è¶³ï¼Œç¼ºå°‘å…³é”®åœºæ™¯æµ‹è¯• |
| é”™è¯¯å¤„ç† | 6.5/10 | åŸºæœ¬é”™è¯¯å¤„ç†åˆ°ä½ï¼Œä½†å¯è¿›ä¸€æ­¥ç»†åŒ– |
| æ€§èƒ½è®¾è®¡ | 7.0/10 | åŸºæœ¬æ€§èƒ½è€ƒè™‘ï¼Œä½†å­˜åœ¨ä¼˜åŒ–ç©ºé—´ |
| æ¥å£ä¸€è‡´æ€§ | 7.5/10 | æ¥å£è®¾è®¡åŸºæœ¬ä¸€è‡´ï¼Œéƒ¨åˆ†ç»†èŠ‚å¯ä¼˜åŒ– |
| **æ•´ä½“è¯„åˆ†** | **7.0/10** | **ä¸­ç­‰** |

---

## å®¡æŸ¥æ¦‚è¿°

æœ¬æ¬¡ä»£ç å®¡æŸ¥é’ˆå¯¹æ‚¬æµ®çª—åŠŸèƒ½é‡æ„é˜¶æ®µä¸€è¿›è¡Œå…¨é¢è¯„ä¼°ï¼Œä¸»è¦åŒ…æ‹¬UseCaseå±‚ã€Repositoryå±‚å’Œæ•°æ®æ¨¡å‹çš„è®¾è®¡ä¸å®ç°ã€‚å®¡æŸ¥å‘ç°æ•´ä½“æ¶æ„åŸºæœ¬åˆç†ï¼Œä½†å­˜åœ¨ä¸€äº›å…³é”®é—®é¢˜éœ€è¦è§£å†³ã€‚

### å®¡æŸ¥ç›®æ ‡

1. è¯„ä¼°æ¶æ„è®¾è®¡çš„åˆè§„æ€§å’Œä¸€è‡´æ€§
2. æ£€æŸ¥ä»£ç è´¨é‡å’Œè§„èŒƒæ€§
3. éªŒè¯æ¥å£è®¾è®¡å’Œæ•°æ®æµ
4. è¯„ä¼°é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæ¡ä»¶
5. æ£€æŸ¥æµ‹è¯•è¦†ç›–ç‡å’Œè´¨é‡
6. è¯†åˆ«è¿‡åº¦è®¾è®¡å’Œæ€§èƒ½é£é™©

---

## å®¡æŸ¥èŒƒå›´

### æ ¸å¿ƒæ–‡ä»¶åˆ—è¡¨

| æ–‡ä»¶è·¯å¾„ | ç±»å‹ | è¯„åˆ† | ä¸»è¦é—®é¢˜ |
|---------|------|------|---------|
| `FloatingWindowModule.kt` | ä¾èµ–æ³¨å…¥ | 8.0/10 | ä¾èµ–æ³¨å…¥é…ç½®åˆç† |
| `RefinementUseCase.kt` | UseCase | 6.5/10 | æ¶æ„è¿è§„ã€é‡å¤ä»£ç  |
| `GenerateReplyUseCase.kt` | UseCase | 7.0/10 | æµç¨‹æ¸…æ™°ä½†ä¾èµ–è¿‡å¤š |
| `PolishDraftUseCase.kt` | UseCase | 7.0/10 | æµç¨‹æ¸…æ™°ä½†ä¾èµ–è¿‡å¤š |
| `AiRepository.kt` | Repositoryæ¥å£ | 8.5/10 | æ¥å£è®¾è®¡è‰¯å¥½ |
| `FloatingWindowError.kt` | é”™è¯¯æ¨¡å‹ | 7.5/10 | é”™è¯¯åˆ†ç±»å®Œæ•´ |
| `FloatingWindowState.kt` | çŠ¶æ€æ¨¡å‹ | 8.0/10 | çŠ¶æ€ç®¡ç†æ¸…æ™° |
| `AiResult.kt` | ç»“æœæ¨¡å‹ | 8.5/10 | å°è£…è‰¯å¥½ |
| `ReplyResult.kt` | ç»“æœæ¨¡å‹ | 8.5/10 | è®¾è®¡ç®€æ´ |
| `ActionType.kt` | æšä¸¾ç±»å‹ | 8.0/10 | è®¾è®¡åˆç† |

---

## ä¸»è¦é—®é¢˜åˆ†æ

### ğŸ”´ é«˜ä¼˜å…ˆçº§é—®é¢˜

#### 1. æ¶æ„è¿è§„ï¼šUseCaseç›´æ¥ä¾èµ–æœåŠ¡å±‚

**é—®é¢˜æè¿°**: [`GenerateReplyUseCase`](app/src/main/java/com/empathy/ai/domain/usecase/GenerateReplyUseCase.kt:39)å’Œ[`PolishDraftUseCase`](app/src/main/java/com/empathy/ai/domain/usecase/PolishDraftUseCase.kt:36)ç›´æ¥ä¾èµ–äº†`PrivacyEngine`æœåŠ¡å±‚ï¼Œè¿åäº†Clean ArchitectureåŸåˆ™ã€‚

**å½±å“**: 
- å¢åŠ äº†é¢†åŸŸå±‚å¯¹åŸºç¡€è®¾æ–½å±‚çš„ä¾èµ–
- é™ä½äº†ä»£ç çš„å¯æµ‹è¯•æ€§å’Œå¯ç»´æŠ¤æ€§
- è¿åäº†ä¾èµ–å€’ç½®åŸåˆ™

**ä»£ç ç¤ºä¾‹**:
```kotlin
// é—®é¢˜ä»£ç ï¼šUseCaseç›´æ¥ä¾èµ–æœåŠ¡å±‚
class GenerateReplyUseCase @Inject constructor(
    // ... å…¶ä»–ä¾èµ–
    private val privacyEngine: PrivacyEngine  // æœåŠ¡å±‚ä¾èµ–
) {
    // ...
}
```

**ä¿®å¤å»ºè®®**:
```kotlin
// ä¿®å¤æ–¹æ¡ˆï¼šé€šè¿‡Repositoryæ¥å£éš”ç¦»
interface PrivacyRepository {
    suspend fun maskText(text: String): String
    suspend fun unmaskText(text: String): String
}

class GenerateReplyUseCase @Inject constructor(
    // ... å…¶ä»–ä¾èµ–
    private val privacyRepository: PrivacyRepository  // é¢†åŸŸå±‚æ¥å£
) {
    // ...
}
```

#### 2. æµ‹è¯•è¦†ç›–ä¸è¶³

**é—®é¢˜æè¿°**: æ ¸å¿ƒUseCaseç±»ç¼ºå°‘å¯¹åº”çš„å•å…ƒæµ‹è¯•ï¼Œæµ‹è¯•è¦†ç›–ç‡ä½äºé¡¹ç›®è¦æ±‚çš„80%ã€‚

**å½±å“**:
- æ— æ³•ä¿è¯ä»£ç è´¨é‡å’ŒåŠŸèƒ½æ­£ç¡®æ€§
- å¢åŠ äº†å›å½’é£é™©
- éš¾ä»¥è¿›è¡Œé‡æ„å’Œä¼˜åŒ–

**ç¼ºå¤±çš„æµ‹è¯•æ–‡ä»¶**:
- `RefinementUseCaseTest.kt`
- `GenerateReplyUseCaseTest.kt`
- `PolishDraftUseCaseTest.kt`

**ä¿®å¤å»ºè®®**:
```kotlin
// ç¤ºä¾‹ï¼šRefinementUseCaseæµ‹è¯•
class RefinementUseCaseTest {
    @Test
    fun `when refinement with instruction, should call ai repository`() {
        // Given
        val request = RefinementRequest(
            originalTask = ActionType.REPLY,
            originalInput = "åŸå§‹è¾“å…¥",
            lastAiResponse = "ä¸Šæ¬¡ç»“æœ",
            refinementInstruction = "æ›´æ­£å¼ä¸€äº›"
        )
        
        // When
        val result = useCase(request)
        
        // Then
        assertTrue(result.isSuccess)
        verify(aiRepository).refineReply(any(), any())
    }
}
```

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§é—®é¢˜

#### 1. ä»£ç é‡å¤

**é—®é¢˜æè¿°**: [`GenerateReplyUseCase`](app/src/main/java/com/empathy/ai/domain/usecase/GenerateReplyUseCase.kt:56-114)å’Œ[`PolishDraftUseCase`](app/src/main/java/com/empathy/ai/domain/usecase/PolishDraftUseCase.kt:52-96)å­˜åœ¨å¤§é‡é‡å¤ä»£ç ï¼ŒåŒ…æ‹¬å‰ç½®æ£€æŸ¥ã€æ•°æ®åŠ è½½ã€æ•°æ®è„±æ•ç­‰é€»è¾‘ã€‚

**å½±å“**:
- å¢åŠ ç»´æŠ¤æˆæœ¬
- å®¹æ˜“å¼•å…¥ä¸ä¸€è‡´æ€§
- è¿åDRYåŸåˆ™

**é‡å¤ä»£ç ç¤ºä¾‹**:
```kotlin
// GenerateReplyUseCaseä¸­çš„é‡å¤é€»è¾‘
val defaultProvider = aiProviderRepository.getDefaultProvider().getOrNull()
    ?: return Result.failure(IllegalStateException("æœªé…ç½®é»˜è®¤ AI æœåŠ¡å•†"))

val profile = contactRepository.getProfile(contactId).getOrNull()
    ?: return Result.failure(IllegalStateException("æœªæ‰¾åˆ°è”ç³»äºº"))

val brainTags = brainTagRepository.getTagsForContact(contactId).first()

// PolishDraftUseCaseä¸­å‡ ä¹ç›¸åŒçš„é€»è¾‘
val defaultProvider = aiProviderRepository.getDefaultProvider().getOrNull()
    ?: return Result.failure(IllegalStateException("æœªé…ç½®é»˜è®¤ AI æœåŠ¡å•†"))

val profile = contactRepository.getProfile(contactId).getOrNull()
    ?: return Result.failure(IllegalStateException("æœªæ‰¾åˆ°è”ç³»äºº"))

val brainTags = brainTagRepository.getTagsForContact(contactId).first()
```

**ä¿®å¤å»ºè®®**:
```kotlin
// åˆ›å»ºæŠ½è±¡åŸºç±»æˆ–ç»„åˆæ¨¡å¼
abstract class BaseAiUseCase {
    protected suspend fun validateAndLoadData(contactId: String): Result<UseCaseData> {
        val defaultProvider = aiProviderRepository.getDefaultProvider().getOrNull()
            ?: return Result.failure(IllegalStateException("æœªé…ç½®é»˜è®¤ AI æœåŠ¡å•†"))
        
        val profile = contactRepository.getProfile(contactId).getOrNull()
            ?: return Result.failure(IllegalStateException("æœªæ‰¾åˆ°è”ç³»äºº"))
        
        val brainTags = brainTagRepository.getTagsForContact(contactId).first()
        
        return Result.success(UseCaseData(defaultProvider, profile, brainTags))
    }
}

class GenerateReplyUseCase : BaseAiUseCase() {
    // ä½¿ç”¨åŸºç±»æ–¹æ³•ï¼Œå‡å°‘é‡å¤ä»£ç 
}
```

#### 2. é”™è¯¯å¤„ç†ä¸å½“

**é—®é¢˜æè¿°**: [`RefinementUseCase`](app/src/main/java/com/empathy/ai/domain/usecase/RefinementUseCase.kt:42-45)ä¸­çš„é”™è¯¯å¤„ç†è¿‡äºç®€å•ï¼Œåªæ˜¯ç®€å•çš„æ—¥å¿—è®°å½•å’ŒResult.failureï¼Œç¼ºå°‘ç»†ç²’åº¦çš„é”™è¯¯åˆ†ç±»ã€‚

**å½±å“**:
- ç”¨æˆ·ä½“éªŒä¸å¤Ÿå‹å¥½
- éš¾ä»¥è¿›è¡Œé’ˆå¯¹æ€§çš„é”™è¯¯å¤„ç†
- ç¼ºå°‘é”™è¯¯æ¢å¤æœºåˆ¶

**ä¿®å¤å»ºè®®**:
```kotlin
// ä½¿ç”¨FloatingWindowErrorè¿›è¡Œç»†ç²’åº¦é”™è¯¯å¤„ç†
suspend operator fun invoke(request: RefinementRequest): Result<AiResult> {
    return try {
        // ... ä¸šåŠ¡é€»è¾‘
    } catch (e: IllegalStateException) {
        Result.failure(FloatingWindowError.NoProviderConfigured)
    } catch (e: Exception) {
        android.util.Log.e("RefinementUseCase", "å¾®è°ƒå¤±è´¥", e)
        Result.failure(FloatingWindowError.fromThrowable(e))
    }
}
```

### ğŸŸ¢ ä½ä¼˜å…ˆçº§é—®é¢˜

#### 1. æ€§èƒ½é£é™©

**é—®é¢˜æè¿°**: [`GenerateReplyUseCase`](app/src/main/java/com/empathy/ai/domain/usecase/GenerateReplyUseCase.kt:69)ä¸­çš„`brainTagRepository.getTagsForContact(contactId).first()`å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨æ ‡ç­¾æ•°é‡è¾ƒå¤šçš„æƒ…å†µä¸‹ã€‚

**å½±å“**:
- å¯èƒ½å¯¼è‡´UIå¡é¡¿
- å¢åŠ å†…å­˜æ¶ˆè€—
- å½±å“ç”¨æˆ·ä½“éªŒ

**ä¿®å¤å»ºè®®**:
```kotlin
// ä½¿ç”¨ç¼“å­˜æˆ–åˆ†é¡µåŠ è½½
private val tagCache = mutableMapOf<String, List<BrainTag>>()

suspend fun getTagsForContactCached(contactId: String): List<BrainTag> {
    return tagCache.getOrPut(contactId) {
        brainTagRepository.getTagsForContact(contactId).first()
    }
}
```

#### 2. è¿‡åº¦è®¾è®¡

**é—®é¢˜æè¿°**: [`FloatingWindowError`](app/src/main/java/com/empathy/ai/domain/model/FloatingWindowError.kt:13-155)ä¸­çš„é”™è¯¯ç±»å‹è¿‡äºç»†è‡´ï¼Œéƒ¨åˆ†é”™è¯¯ç±»å‹ä½¿ç”¨é¢‘ç‡è¾ƒä½ã€‚

**å½±å“**:
- å¢åŠ ä»£ç å¤æ‚åº¦
- å¯èƒ½å¯¼è‡´è¿‡åº¦æŠ½è±¡
- ç»´æŠ¤æˆæœ¬å¢åŠ 

**ä¿®å¤å»ºè®®**:
```kotlin
// ç®€åŒ–é”™è¯¯ç±»å‹ï¼Œåˆå¹¶ç›¸ä¼¼é”™è¯¯
sealed class FloatingWindowError(userMessage: String) : Exception(userMessage) {
    // åˆå¹¶ç½‘ç»œç›¸å…³é”™è¯¯
    sealed class NetworkError(reason: String, userMessage: String) : FloatingWindowError(userMessage) {
        class Timeout : NetworkError("timeout", "ç½‘ç»œè¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•")
        class CallFailed(reason: String) : NetworkError(reason, "ç½‘ç»œè¯·æ±‚å¤±è´¥ï¼š$reason")
    }
    
    // åˆå¹¶éªŒè¯ç›¸å…³é”™è¯¯
    sealed class ValidationError(field: String, userMessage: String) : FloatingWindowError(userMessage) {
        class EmptyInput : ValidationError("input", "è¯·è¾“å…¥å†…å®¹")
        class NoContact : ValidationError("contact", "è¯·é€‰æ‹©è”ç³»äºº")
        class TextTooLong : ValidationError("length", "è¾“å…¥å†…å®¹ä¸èƒ½è¶…è¿‡ 5000 å­—ç¬¦")
    }
}
```

---

## è‰¯å¥½å®è·µ

### âœ… ä¼˜ç‚¹

1. **æ•°æ®æ¨¡å‹è®¾è®¡è‰¯å¥½**
   - [`AiResult`](app/src/main/java/com/empathy/ai/domain/model/AiResult.kt:11-76)ä½¿ç”¨å¯†å°ç±»ç»Ÿä¸€ä¸åŒç±»å‹çš„AIç»“æœ
   - [`FloatingWindowState`](app/src/main/java/com/empathy/ai/domain/model/FloatingWindowState.kt:18-103)çŠ¶æ€ç®¡ç†æ¸…æ™°ï¼ŒåŒ…å«æœ‰ç”¨çš„è¾…åŠ©æ–¹æ³•
   - [`ActionType`](app/src/main/java/com/empathy/ai/domain/model/ActionType.kt:15-74)æšä¸¾è®¾è®¡åˆç†ï¼ŒåŒ…å«å¿…è¦çš„å…ƒæ•°æ®

2. **ä¾èµ–æ³¨å…¥ä½¿ç”¨å¾—å½“**
   - [`FloatingWindowModule`](app/src/main/java/com/empathy/ai/di/FloatingWindowModule.kt:29-105)æ¨¡å—åŒ–ä¾èµ–æ³¨å…¥é…ç½®
   - ä½¿ç”¨`@Singleton`æ³¨è§£ç¡®ä¿å•ä¾‹
   - ä¾èµ–å…³ç³»æ¸…æ™°æ˜ç¡®

3. **æ–‡æ¡£æ³¨é‡Šå®Œæ•´**
   - æ‰€æœ‰ç±»å’Œæ–¹æ³•éƒ½æœ‰è¯¦ç»†çš„KDocæ³¨é‡Š
   - åŒ…å«å‚æ•°è¯´æ˜å’Œè¿”å›å€¼æè¿°
   - å¼•ç”¨ç›¸å…³çš„è®¾è®¡æ–‡æ¡£

---

## ä¿®å¤å»ºè®®ä¼˜å…ˆçº§

### P0ä¼˜å…ˆçº§ï¼ˆå¿…é¡»ä¿®å¤ï¼‰

1. **ä¿®å¤æ¶æ„è¿è§„é—®é¢˜**
   - å°†UseCaseä¸­çš„æœåŠ¡å±‚ä¾èµ–æ”¹ä¸ºRepositoryæ¥å£
   - ç¡®ä¿é¢†åŸŸå±‚ä¸ä¾èµ–åŸºç¡€è®¾æ–½å±‚
   - é‡æ–°è®¾è®¡ä¾èµ–å…³ç³»

2. **å®Œå–„æµ‹è¯•è¦†ç›–**
   - ä¸ºæ‰€æœ‰æ ¸å¿ƒUseCaseç¼–å†™å•å…ƒæµ‹è¯•
   - ç¡®ä¿æµ‹è¯•è¦†ç›–ç‡è¾¾åˆ°80%ä»¥ä¸Š
   - æ·»åŠ è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸åœºæ™¯æµ‹è¯•

### P1ä¼˜å…ˆçº§ï¼ˆå»ºè®®ä¿®å¤ï¼‰

1. **é‡æ„é‡å¤ä»£ç **
   - åˆ›å»ºæŠ½è±¡åŸºç±»æˆ–ç»„åˆæ¨¡å¼
   - æå–å…¬å…±é€»è¾‘åˆ°å…±äº«ç»„ä»¶
   - å‡å°‘ä»£ç é‡å¤

2. **æ”¹è¿›é”™è¯¯å¤„ç†**
   - ä½¿ç”¨ç»†ç²’åº¦é”™è¯¯ç±»å‹
   - æ·»åŠ é”™è¯¯æ¢å¤æœºåˆ¶
   - æä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯

### P2ä¼˜å…ˆçº§ï¼ˆå¯é€‰ä¼˜åŒ–ï¼‰

1. **æ€§èƒ½ä¼˜åŒ–**
   - æ·»åŠ æ•°æ®ç¼“å­˜æœºåˆ¶
   - ä¼˜åŒ–å¤§æ•°æ®é‡åœºæ™¯
   - ç›‘æ§å…³é”®æ€§èƒ½æŒ‡æ ‡

2. **åŠŸèƒ½å®Œå–„**
   - æ·»åŠ æ›´å¤šä¸šåŠ¡åœºæ™¯æ”¯æŒ
   - ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
   - å¢å¼ºç³»ç»Ÿç¨³å®šæ€§

---

## æ€»ä½“è¯„ä»·

### ä»£ç è´¨é‡è¯„ä¼°

**æ•´ä½“è¯„åˆ†**: 70/100ï¼ˆä¸­ç­‰ï¼‰

**ä¼˜ç‚¹**:
- æ•°æ®æ¨¡å‹è®¾è®¡åˆç†ï¼ŒèŒè´£åˆ†ç¦»æ¸…æ™°
- ä¾èµ–æ³¨å…¥é…ç½®è§„èŒƒï¼Œæ¨¡å—åŒ–ç¨‹åº¦é«˜
- æ–‡æ¡£æ³¨é‡Šå®Œæ•´ï¼Œå¯è¯»æ€§è‰¯å¥½
- åŸºæœ¬åŠŸèƒ½å®ç°å®Œæ•´

**éœ€è¦æ”¹è¿›**:
- æ¶æ„åˆè§„æ€§å­˜åœ¨ä¸¥é‡é—®é¢˜
- æµ‹è¯•è¦†ç›–ç‡ä¸¥é‡ä¸è¶³
- ä»£ç é‡å¤è¾ƒå¤šï¼Œç»´æŠ¤æˆæœ¬é«˜
- é”™è¯¯å¤„ç†å¯ä»¥æ›´åŠ ç»†åŒ–

### å‘å¸ƒå»ºè®®

**âŒ ä¸å»ºè®®å‘å¸ƒ**ï¼Œéœ€è¦å…ˆè§£å†³P0ä¼˜å…ˆçº§é—®é¢˜ï¼š

1. å¿…é¡»ä¿®å¤æ¶æ„è¿è§„é—®é¢˜ï¼Œç¡®ä¿Clean ArchitectureåŸåˆ™çš„éµå¾ª
2. å¿…é¡»è¡¥å……å•å…ƒæµ‹è¯•ï¼Œç¡®ä¿ä»£ç è´¨é‡å’ŒåŠŸèƒ½æ­£ç¡®æ€§
3. å»ºè®®é‡æ„é‡å¤ä»£ç ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§

### åç»­å·¥ä½œè®¡åˆ’

1. **ç¬¬ä¸€é˜¶æ®µï¼ˆ1-2å¤©ï¼‰**:
   - ä¿®å¤æ¶æ„è¿è§„é—®é¢˜
   - åˆ›å»ºç¼ºå¤±çš„å•å…ƒæµ‹è¯•
   - éªŒè¯ä¿®å¤æ•ˆæœ

2. **ç¬¬äºŒé˜¶æ®µï¼ˆ2-3å¤©ï¼‰**:
   - é‡æ„é‡å¤ä»£ç 
   - æ”¹è¿›é”™è¯¯å¤„ç†
   - æ€§èƒ½ä¼˜åŒ–

3. **ç¬¬ä¸‰é˜¶æ®µï¼ˆ1-2å¤©ï¼‰**:
   - é›†æˆæµ‹è¯•
   - ä»£ç å®¡æŸ¥
   - æ–‡æ¡£æ›´æ–°

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [TD-00009 - æ‚¬æµ®çª—åŠŸèƒ½é‡æ„ä»»åŠ¡æ¸…å•](../TD/TD-00009-æ‚¬æµ®çª—åŠŸèƒ½é‡æ„ä»»åŠ¡æ¸…å•.md)
- [PRD-00009 - æ‚¬æµ®çª—åŠŸèƒ½é‡æ„éœ€æ±‚](../PRD/PRD-00009-æ‚¬æµ®çª—åŠŸèƒ½é‡æ„éœ€æ±‚.md)
- [TDD-00009 - æ‚¬æµ®çª—åŠŸèƒ½é‡æ„æŠ€æœ¯è®¾è®¡](../TDD/TDD-00009-æ‚¬æµ®çª—åŠŸèƒ½é‡æ„æŠ€æœ¯è®¾è®¡.md)
- [CR-00010 - TD00004é˜¶æ®µ9ä»£ç å®¡æŸ¥æŠ¥å‘Š](./CR-00010-TD00004é˜¶æ®µ9ä»£ç å®¡æŸ¥æŠ¥å‘Š.md)

---

## ğŸ“Š å®¡æŸ¥ç»“æœç»Ÿè®¡

### æŒ‰æ–‡ä»¶ç±»å‹ç»Ÿè®¡

| ç±»å‹ | æ–‡ä»¶æ•° | å¹³å‡è¯„åˆ† | ä¸»è¦é—®é¢˜ |
|------|--------|----------|---------|
| UseCase | 3 | 6.8/10 | æ¶æ„è¿è§„ã€ä»£ç é‡å¤ |
| Repository | 1 | 8.5/10 | æ¥å£è®¾è®¡è‰¯å¥½ |
| æ•°æ®æ¨¡å‹ | 5 | 8.1/10 | è®¾è®¡åˆç† |
| ä¾èµ–æ³¨å…¥ | 1 | 8.0/10 | é…ç½®è§„èŒƒ |
| **æ€»è®¡** | **10** | **7.0/10** | - |

### æŒ‰é—®é¢˜ä¼˜å…ˆçº§ç»Ÿè®¡

| ä¼˜å…ˆçº§ | é—®é¢˜æ•° | è¯´æ˜ |
|--------|--------|------|
| ğŸ”´ é«˜ | 2 | æ¶æ„è¿è§„ã€æµ‹è¯•è¦†ç›–ä¸è¶³ |
| ğŸŸ¡ ä¸­ | 2 | ä»£ç é‡å¤ã€é”™è¯¯å¤„ç†ä¸å½“ |
| ğŸŸ¢ ä½ | 2 | æ€§èƒ½é£é™©ã€è¿‡åº¦è®¾è®¡ |
| **æ€»è®¡** | **6** | - |

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-12-17  
**æ›´æ–°è€…**: Roo  
**çŠ¶æ€**: âœ… å®Œæˆ