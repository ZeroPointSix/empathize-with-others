# FD-00012: äº‹å®æµå†…å®¹ç¼–è¾‘åŠŸèƒ½è®¾è®¡

---
**æ–‡æ¡£ç±»å‹**: FD (Functional Design) - å¼€å‘è¿‡ç¨‹æ–‡æ¡£  
**å­˜æ”¾è§„èŒƒ**: ç¬¦åˆé¡¹ç›®å®ªæ³•ç¬¬IVæ¡ - æ–‡æ¡£è§„èŒƒ  
**ç‰ˆæœ¬æ§åˆ¶**: Gitç®¡ç†ï¼Œè§.commité’©å­  
---

## 1. æ–‡æ¡£ä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|------|------|
| æ–‡æ¡£ç±»å‹ | FD (Functional Design) |
| æ–‡æ¡£ç¼–å· | FD-00012 |
| åŠŸèƒ½åç§° | äº‹å®æµå†…å®¹ç¼–è¾‘åŠŸèƒ½ |
| ç‰ˆæœ¬ | 1.0 |
| åˆ›å»ºæ—¥æœŸ | 2025-12-20 |
| æœ€åæ›´æ–° | 2025-12-20 |
| ä½œè€… | Kiro |
| å®¡æ ¸äºº | å¾…å®š |
| å…³è”æ–‡æ¡£ | PRD-00012 |

---

## 2. åŠŸèƒ½æ¦‚è¿°

### 2.1 åŠŸèƒ½ç›®æ ‡

ä¸ºäº‹å®æµç³»ç»Ÿæä¾›å…¨é¢çš„å†…å®¹ç¼–è¾‘èƒ½åŠ›ï¼Œè§£å†³ä»¥ä¸‹æ ¸å¿ƒé—®é¢˜ï¼š
1. **å†…å®¹å¯ä¿®æ­£**ï¼šå…è®¸ç”¨æˆ·ä¿®æ­£AIæ¨æ–­é”™è¯¯æˆ–è¿‡æ—¶ä¿¡æ¯
2. **ä¿¡æ¯å¯æ›´æ–°**ï¼šæ”¯æŒè”ç³»äººä¿¡æ¯éšå…³ç³»å‘å±•è€Œæ›´æ–°
3. **ä¿®æ”¹å¯è¿½æº¯**ï¼šæ˜ç¡®æ ‡è¯†ç”¨æˆ·ä¿®æ”¹è¿‡çš„å†…å®¹
4. **æ•°æ®å®Œæ•´æ€§**ï¼šç¼–è¾‘æ“ä½œä¸å½±å“ç³»ç»Ÿå…¶ä»–åŠŸèƒ½

### 2.2 åŠŸèƒ½è¾¹ç•Œ

| åŒ…å« (V1) | ä¸åŒ…å« (V2è§„åˆ’) |
|-----------|-----------------|
| äº‹å®(Fact)ç¼–è¾‘ | æ‰¹é‡ç¼–è¾‘æ“ä½œ |
| å¯¹è¯è®°å½•ç¼–è¾‘ | ç¼–è¾‘å†å²è®°å½•æŸ¥çœ‹ |
| AIæ€»ç»“ç¼–è¾‘ | æ¢å¤åŸå§‹å†…å®¹åŠŸèƒ½ |
| è”ç³»äººä¿¡æ¯ç¼–è¾‘ | ç¼–è¾‘æƒé™ç®¡ç† |
| å·²ç¼–è¾‘æ ‡è¯†æ˜¾ç¤º | ç¼–è¾‘å†²çªæ£€æµ‹ |
| æœ€åä¿®æ”¹æ—¶é—´è®°å½• | ç¼–è¾‘å®¡è®¡æ—¥å¿— |


---

## 3. åŠŸèƒ½æµç¨‹è®¾è®¡

### 3.1 æ•´ä½“æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å†…å®¹ç¼–è¾‘æ•´ä½“æµç¨‹                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ äº‹å®æµé¡µé¢   â”‚ â† ç”¨æˆ·æµè§ˆå†…å®¹
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ ç‚¹å‡»å¯ç¼–è¾‘å†…å®¹
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     å†…å®¹ç±»å‹?
  â”‚ ç±»å‹åˆ¤æ–­     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
         â”‚                                              â”‚
    â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
    â”‚    â”‚    â”‚            â”‚            â”‚              â”‚
    â–¼    â–¼    â–¼            â–¼            â–¼              â”‚
  äº‹å®  å¯¹è¯  AIæ€»ç»“    è”ç³»äººå§“å   è”ç³»äººç›®æ ‡         â”‚
    â”‚    â”‚    â”‚            â”‚            â”‚              â”‚
    â–¼    â–¼    â–¼            â–¼            â–¼              â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
  â”‚              æ˜¾ç¤ºå¯¹åº”ç¼–è¾‘å¯¹è¯æ¡†               â”‚     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
         â”‚                                              â”‚
         â”‚ ç”¨æˆ·ç¼–è¾‘å†…å®¹                                 â”‚
         â–¼                                              â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     éªŒè¯é€šè¿‡?      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚ è¾“å…¥éªŒè¯     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ æ˜¾ç¤ºé”™è¯¯æç¤º â”‚ â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        å¦          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
         â”‚                                   â”‚         â”‚
         â”‚ æ˜¯                                â”‚         â”‚
         â–¼                                   â”‚         â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚         â”‚
  â”‚ ä¿å­˜ä¿®æ”¹     â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
  â”‚ æ›´æ–°æ ‡è®°     â”‚                                     â”‚
  â”‚ è®°å½•æ—¶é—´     â”‚                                     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
         â”‚                                              â”‚
         â”‚ ä¿å­˜æˆåŠŸ                                     â”‚
         â–¼                                              â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
  â”‚ åˆ·æ–°UIæ˜¾ç¤º   â”‚                                     â”‚
  â”‚ æ˜¾ç¤ºå·²ç¼–è¾‘   â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚ æ ‡è¯†         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 äº‹å®ç¼–è¾‘æµç¨‹

```
  ç”¨æˆ·ç‚¹å‡»äº‹å®å¡ç‰‡
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚           äº‹å®ç¼–è¾‘å¯¹è¯æ¡†              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ äº‹å®ç±»å‹                        â”‚  â”‚
  â”‚  â”‚ [æ€§æ ¼ç‰¹ç‚¹        â–¼]            â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ äº‹å®å†…å®¹                        â”‚  â”‚
  â”‚  â”‚ [å¤–å‘ã€çƒ­æƒ…ã€å–„äºæ²Ÿé€š_____]    â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ åŸå§‹å†…å®¹ï¼ˆå‚è€ƒï¼‰                â”‚  â”‚
  â”‚  â”‚ æ¥æº: AIæ¨æ–­ | 2025-12-15      â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚       [åˆ é™¤]  [å–æ¶ˆ]  [ä¿å­˜]         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 å¯¹è¯è®°å½•ç¼–è¾‘æµç¨‹

```
  ç”¨æˆ·ç‚¹å‡»å¯¹è¯æ°”æ³¡
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚         å¯¹è¯è®°å½•ç¼–è¾‘å¯¹è¯æ¡†            â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ èº«ä»½: å¯¹æ–¹è¯´çš„                  â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ å¯¹è¯å†…å®¹                        â”‚  â”‚
  â”‚  â”‚ [ä½ æ€ä¹ˆæ‰å›æ¶ˆæ¯ï¼Ÿ_____________] â”‚  â”‚
  â”‚  â”‚ [_____________________________] â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ åŸå§‹å†…å®¹ï¼ˆå‚è€ƒï¼‰                â”‚  â”‚
  â”‚  â”‚ è®°å½•æ—¶é—´: 2025-12-15 14:30     â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚       [åˆ é™¤]  [å–æ¶ˆ]  [ä¿å­˜]         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 AIæ€»ç»“ç¼–è¾‘æµç¨‹

```
  ç”¨æˆ·ç‚¹å‡»AIæ€»ç»“å¡ç‰‡
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚          AIæ€»ç»“ç¼–è¾‘å¯¹è¯æ¡†             â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ æ€»ç»“æ—¥æœŸ: 2025-12-15           â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ æ€»ç»“å†…å®¹                        â”‚  â”‚
  â”‚  â”‚ [è¿™æ®µæ—¶é—´ä½ ä»¬è®¨è®ºäº†é¡¹ç›®è¿›å±•...] â”‚  â”‚
  â”‚  â”‚ [_____________________________] â”‚  â”‚
  â”‚  â”‚ [_____________________________] â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ åŸå§‹å†…å®¹ï¼ˆå‚è€ƒï¼‰                â”‚  â”‚
  â”‚  â”‚ ç”Ÿæˆæ¥æº: è‡ªåŠ¨ | åˆ†æ23æ¡å¯¹è¯   â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚           [å–æ¶ˆ]  [ä¿å­˜]             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```



---

## 4. æ•°æ®æ¨¡å‹è®¾è®¡

### 4.1 Factæ¨¡å‹æ‰©å±•

```kotlin
data class Fact(
    val id: String = UUID.randomUUID().toString(),
    val key: String,
    val value: String,
    val timestamp: Long,
    val source: FactSource,
    // ==================== æ–°å¢å­—æ®µ ====================
    val isUserModified: Boolean = false,        // æ˜¯å¦è¢«ç”¨æˆ·ä¿®æ”¹è¿‡
    val lastModifiedTime: Long = timestamp,     // æœ€åä¿®æ”¹æ—¶é—´
    val originalKey: String? = null,            // åŸå§‹é”®ï¼ˆä¿®æ”¹å‰ï¼‰
    val originalValue: String? = null           // åŸå§‹å€¼ï¼ˆä¿®æ”¹å‰ï¼‰
) {
    init {
        require(id.isNotBlank()) { "Factçš„idä¸èƒ½ä¸ºç©º" }
        require(key.isNotBlank()) { "Factçš„keyä¸èƒ½ä¸ºç©º" }
        require(value.isNotBlank()) { "Factçš„valueä¸èƒ½ä¸ºç©º" }
        require(timestamp > 0) { "Factçš„timestampå¿…é¡»å¤§äº0" }
    }

    /**
     * åˆ›å»ºç¼–è¾‘åçš„å‰¯æœ¬
     */
    fun copyWithEdit(newKey: String, newValue: String): Fact {
        return copy(
            key = newKey,
            value = newValue,
            isUserModified = true,
            lastModifiedTime = System.currentTimeMillis(),
            originalKey = if (originalKey == null) key else originalKey,
            originalValue = if (originalValue == null) value else originalValue
        )
    }
}
```

### 4.2 ConversationLogæ¨¡å‹æ‰©å±•

```kotlin
data class ConversationLog(
    val id: Long = 0,
    val contactId: String,
    val userInput: String,
    val aiResponse: String?,
    val timestamp: Long,
    val isSummarized: Boolean = false,
    // ==================== æ–°å¢å­—æ®µ ====================
    val isUserModified: Boolean = false,        // æ˜¯å¦è¢«ç”¨æˆ·ä¿®æ”¹è¿‡
    val lastModifiedTime: Long = timestamp,     // æœ€åä¿®æ”¹æ—¶é—´
    val originalUserInput: String? = null       // åŸå§‹ç”¨æˆ·è¾“å…¥ï¼ˆä¿®æ”¹å‰ï¼‰
) {
    init {
        require(contactId.isNotBlank()) { "contactIdä¸èƒ½ä¸ºç©º" }
        require(userInput.isNotBlank()) { "userInputä¸èƒ½ä¸ºç©º" }
        require(timestamp > 0) { "timestampå¿…é¡»å¤§äº0" }
    }

    /**
     * åˆ›å»ºç¼–è¾‘åçš„å‰¯æœ¬
     */
    fun copyWithEdit(newUserInput: String): ConversationLog {
        return copy(
            userInput = newUserInput,
            isUserModified = true,
            lastModifiedTime = System.currentTimeMillis(),
            originalUserInput = if (originalUserInput == null) userInput else originalUserInput
        )
    }
}
```

### 4.3 DailySummaryæ¨¡å‹æ‰©å±•

```kotlin
data class DailySummary(
    val id: Long = 0,
    val contactId: String,
    val summaryDate: String,
    val content: String,
    val keyEvents: List<KeyEvent>,
    val newFacts: List<Fact>,
    val updatedTags: List<TagUpdate>,
    val relationshipScoreChange: Int,
    val relationshipTrend: RelationshipTrend,
    val startDate: String? = null,
    val endDate: String? = null,
    val summaryType: SummaryType = SummaryType.DAILY,
    val generationSource: GenerationSource = GenerationSource.AUTO,
    val conversationCount: Int = 0,
    val generatedAt: Long = System.currentTimeMillis(),
    // ==================== æ–°å¢å­—æ®µ ====================
    val isUserModified: Boolean = false,        // æ˜¯å¦è¢«ç”¨æˆ·ä¿®æ”¹è¿‡
    val lastModifiedTime: Long = generatedAt,   // æœ€åä¿®æ”¹æ—¶é—´
    val originalContent: String? = null         // åŸå§‹å†…å®¹ï¼ˆä¿®æ”¹å‰ï¼‰
) {
    /**
     * åˆ›å»ºç¼–è¾‘åçš„å‰¯æœ¬
     */
    fun copyWithEdit(newContent: String): DailySummary {
        return copy(
            content = newContent,
            isUserModified = true,
            lastModifiedTime = System.currentTimeMillis(),
            originalContent = if (originalContent == null) content else originalContent
        )
    }
}
```

### 4.4 ContactProfileæ¨¡å‹æ‰©å±•

```kotlin
data class ContactProfile(
    val id: String,
    val name: String,
    val targetGoal: String,
    val contextDepth: Int = 10,
    val facts: List<Fact> = emptyList(),
    val relationshipScore: Int = MemoryConstants.DEFAULT_RELATIONSHIP_SCORE,
    val lastInteractionDate: String? = null,
    val avatarUrl: String? = null,
    // ==================== æ–°å¢å­—æ®µ ====================
    val isNameUserModified: Boolean = false,    // å§“åæ˜¯å¦è¢«ç”¨æˆ·ä¿®æ”¹è¿‡
    val isGoalUserModified: Boolean = false,    // ç›®æ ‡æ˜¯å¦è¢«ç”¨æˆ·ä¿®æ”¹è¿‡
    val nameLastModifiedTime: Long = 0L,        // å§“åæœ€åä¿®æ”¹æ—¶é—´
    val goalLastModifiedTime: Long = 0L,        // ç›®æ ‡æœ€åä¿®æ”¹æ—¶é—´
    val originalName: String? = null,           // åŸå§‹å§“åï¼ˆä¿®æ”¹å‰ï¼‰
    val originalGoal: String? = null            // åŸå§‹ç›®æ ‡ï¼ˆä¿®æ”¹å‰ï¼‰
) {
    /**
     * åˆ›å»ºå§“åç¼–è¾‘åçš„å‰¯æœ¬
     */
    fun copyWithNameEdit(newName: String): ContactProfile {
        return copy(
            name = newName,
            isNameUserModified = true,
            nameLastModifiedTime = System.currentTimeMillis(),
            originalName = if (originalName == null) name else originalName
        )
    }

    /**
     * åˆ›å»ºç›®æ ‡ç¼–è¾‘åçš„å‰¯æœ¬
     */
    fun copyWithGoalEdit(newGoal: String): ContactProfile {
        return copy(
            targetGoal = newGoal,
            isGoalUserModified = true,
            goalLastModifiedTime = System.currentTimeMillis(),
            originalGoal = if (originalGoal == null) targetGoal else originalGoal
        )
    }
}
```

### 4.5 æ•°æ®åº“è¿ç§»è®¾è®¡

```kotlin
// Migration v9 -> v10: æ·»åŠ ç¼–è¾‘ç›¸å…³å­—æ®µ
val MIGRATION_9_10 = object : Migration(9, 10) {
    override fun migrate(database: SupportSQLiteDatabase) {
        // 1. æ‰©å±• contact_profiles è¡¨
        database.execSQL("""
            ALTER TABLE contact_profiles 
            ADD COLUMN is_name_user_modified INTEGER NOT NULL DEFAULT 0
        """)
        database.execSQL("""
            ALTER TABLE contact_profiles 
            ADD COLUMN is_goal_user_modified INTEGER NOT NULL DEFAULT 0
        """)
        database.execSQL("""
            ALTER TABLE contact_profiles 
            ADD COLUMN name_last_modified_time INTEGER NOT NULL DEFAULT 0
        """)
        database.execSQL("""
            ALTER TABLE contact_profiles 
            ADD COLUMN goal_last_modified_time INTEGER NOT NULL DEFAULT 0
        """)
        database.execSQL("""
            ALTER TABLE contact_profiles 
            ADD COLUMN original_name TEXT DEFAULT NULL
        """)
        database.execSQL("""
            ALTER TABLE contact_profiles 
            ADD COLUMN original_goal TEXT DEFAULT NULL
        """)

        // 2. æ‰©å±• conversation_logs è¡¨
        database.execSQL("""
            ALTER TABLE conversation_logs 
            ADD COLUMN is_user_modified INTEGER NOT NULL DEFAULT 0
        """)
        database.execSQL("""
            ALTER TABLE conversation_logs 
            ADD COLUMN last_modified_time INTEGER NOT NULL DEFAULT 0
        """)
        database.execSQL("""
            ALTER TABLE conversation_logs 
            ADD COLUMN original_user_input TEXT DEFAULT NULL
        """)

        // 3. æ‰©å±• daily_summaries è¡¨
        database.execSQL("""
            ALTER TABLE daily_summaries 
            ADD COLUMN is_user_modified INTEGER NOT NULL DEFAULT 0
        """)
        database.execSQL("""
            ALTER TABLE daily_summaries 
            ADD COLUMN last_modified_time INTEGER NOT NULL DEFAULT 0
        """)
        database.execSQL("""
            ALTER TABLE daily_summaries 
            ADD COLUMN original_content TEXT DEFAULT NULL
        """)
    }
}
```



---

## 5. äº¤äº’è®¾è®¡

### 5.1 ç¼–è¾‘å…¥å£è®¾è®¡

#### 5.1.1 äº‹å®å¡ç‰‡ç¼–è¾‘å…¥å£

| å±æ€§ | å€¼ |
|------|-----|
| è§¦å‘æ–¹å¼ | ç‚¹å‡»äº‹å®å¡ç‰‡ |
| è§†è§‰æç¤º | å¡ç‰‡hoveræ—¶æ˜¾ç¤ºç¼–è¾‘å›¾æ ‡ |
| å›¾æ ‡ | Edit (pencil) å›¾æ ‡ |
| ä½ç½® | å¡ç‰‡å³ä¸Šè§’ |

#### 5.1.2 å¯¹è¯æ°”æ³¡ç¼–è¾‘å…¥å£

| å±æ€§ | å€¼ |
|------|-----|
| è§¦å‘æ–¹å¼ | é•¿æŒ‰å¯¹è¯æ°”æ³¡ |
| è§†è§‰æç¤º | é•¿æŒ‰åæ˜¾ç¤ºä¸Šä¸‹æ–‡èœå• |
| èœå•é€‰é¡¹ | ç¼–è¾‘ã€åˆ é™¤ã€å¤åˆ¶ |
| åŠ¨ç”» | æ°”æ³¡è½»å¾®æ”¾å¤§ + éœ‡åŠ¨åé¦ˆ |

#### 5.1.3 AIæ€»ç»“ç¼–è¾‘å…¥å£

| å±æ€§ | å€¼ |
|------|-----|
| è§¦å‘æ–¹å¼ | ç‚¹å‡»æ€»ç»“å¡ç‰‡çš„ç¼–è¾‘æŒ‰é’® |
| è§†è§‰æç¤º | å¡ç‰‡å³ä¸Šè§’æ˜¾ç¤ºç¼–è¾‘å›¾æ ‡ |
| å›¾æ ‡ | Edit (pencil) å›¾æ ‡ |
| é™åˆ¶ | ä»…å†…å®¹å¯ç¼–è¾‘ï¼Œå…³é”®äº‹ä»¶ä¸å¯ç¼–è¾‘ |

#### 5.1.4 è”ç³»äººä¿¡æ¯ç¼–è¾‘å…¥å£

| å±æ€§ | å€¼ |
|------|-----|
| è§¦å‘æ–¹å¼ | ç‚¹å‡»å§“å/ç›®æ ‡åŒºåŸŸ |
| è§†è§‰æç¤º | æ–‡å­—ä¸‹æ–¹æ˜¾ç¤ºä¸‹åˆ’çº¿ |
| å›¾æ ‡ | æ–‡å­—æ—æ˜¾ç¤ºå°ç¼–è¾‘å›¾æ ‡ |
| ä½ç½® | è”ç³»äººè¯¦æƒ…é¡µå¤´éƒ¨ |

### 5.2 ç¼–è¾‘å¯¹è¯æ¡†è®¾è®¡

#### 5.2.1 é€šç”¨å¯¹è¯æ¡†è§„èŒƒ

| å±æ€§ | å€¼ |
|------|-----|
| å®½åº¦ | å±å¹•å®½åº¦ - 32dp |
| æœ€å¤§é«˜åº¦ | å±å¹•é«˜åº¦çš„70% |
| åœ†è§’ | 16dp |
| èƒŒæ™¯è‰² | Surface |
| é˜´å½± | elevation 8dp |

#### 5.2.2 è¾“å…¥æ¡†è§„èŒƒ

| å±æ€§ | å€¼ |
|------|-----|
| æ ·å¼ | OutlinedTextField |
| æœ€å°è¡Œæ•° | 2è¡Œï¼ˆäº‹å®ï¼‰/ 3è¡Œï¼ˆå¯¹è¯/æ€»ç»“ï¼‰ |
| æœ€å¤§è¡Œæ•° | 6è¡Œï¼ˆäº‹å®ï¼‰/ 10è¡Œï¼ˆå¯¹è¯/æ€»ç»“ï¼‰ |
| å­—ç¬¦é™åˆ¶ | äº‹å®500å­— / å¯¹è¯1000å­— / æ€»ç»“2000å­— |
| å®æ—¶è®¡æ•° | æ˜¾ç¤ºå½“å‰å­—æ•°/æœ€å¤§å­—æ•° |

#### 5.2.3 æŒ‰é’®å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    â”‚
â”‚         [ç¼–è¾‘å†…å®¹åŒºåŸŸ]              â”‚
â”‚                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ—‘ï¸åˆ é™¤    [å–æ¶ˆ]  [ä¿å­˜]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 å·²ç¼–è¾‘æ ‡è¯†è®¾è®¡

#### 5.3.1 æ ‡è¯†æ ·å¼

| å…ƒç´  | æ ·å¼ |
|------|------|
| å›¾æ ‡ | Editå›¾æ ‡ (12dp) |
| æ–‡å­— | "å·²ç¼–è¾‘" |
| é¢œè‰² | OnSurfaceVariant |
| å­—å· | labelSmall |
| ä½ç½® | å†…å®¹å³ä¸‹è§’ |

#### 5.3.2 æ ‡è¯†æ˜¾ç¤ºè§„åˆ™

```kotlin
@Composable
fun EditedBadge(
    lastModifiedTime: Long,
    modifier: Modifier = Modifier
) {
    Row(
        modifier = modifier,
        verticalAlignment = Alignment.CenterVertically,
        horizontalArrangement = Arrangement.spacedBy(4.dp)
    ) {
        Icon(
            imageVector = Icons.Default.Edit,
            contentDescription = "å·²ç¼–è¾‘",
            modifier = Modifier.size(12.dp),
            tint = MaterialTheme.colorScheme.onSurfaceVariant
        )
        Text(
            text = "å·²ç¼–è¾‘ Â· ${formatRelativeTime(lastModifiedTime)}",
            style = MaterialTheme.typography.labelSmall,
            color = MaterialTheme.colorScheme.onSurfaceVariant
        )
    }
}
```

### 5.4 åˆ é™¤ç¡®è®¤è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ ç¡®è®¤åˆ é™¤                        â”‚
â”‚                                    â”‚
â”‚ ç¡®å®šè¦åˆ é™¤è¿™æ¡å†…å®¹å—ï¼Ÿ              â”‚
â”‚ æ­¤æ“ä½œæ— æ³•æ’¤é”€ã€‚                    â”‚
â”‚                                    â”‚
â”‚           [å–æ¶ˆ]  [åˆ é™¤]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| å±æ€§ | å€¼ |
|------|-----|
| åˆ é™¤æŒ‰é’®é¢œè‰² | Errorè‰² |
| å–æ¶ˆæŒ‰é’®æ ·å¼ | TextButton |
| åˆ é™¤æŒ‰é’®æ ·å¼ | TextButton (Errorè‰²) |



---

## 6. ä¸šåŠ¡è§„åˆ™è®¾è®¡

### 6.1 è¾“å…¥éªŒè¯è§„åˆ™

| è§„åˆ™ID | è§„åˆ™æè¿° | å¤„ç†æ–¹å¼ |
|--------|----------|----------|
| VR-001 | äº‹å®é”®ä¸èƒ½ä¸ºç©º | æ˜¾ç¤ºé”™è¯¯æç¤ºï¼Œç¦ç”¨ä¿å­˜æŒ‰é’® |
| VR-002 | äº‹å®å€¼ä¸èƒ½ä¸ºç©º | æ˜¾ç¤ºé”™è¯¯æç¤ºï¼Œç¦ç”¨ä¿å­˜æŒ‰é’® |
| VR-003 | å¯¹è¯å†…å®¹ä¸èƒ½ä¸ºç©º | æ˜¾ç¤ºé”™è¯¯æç¤ºï¼Œç¦ç”¨ä¿å­˜æŒ‰é’® |
| VR-004 | è”ç³»äººå§“åä¸èƒ½ä¸ºç©º | æ˜¾ç¤ºé”™è¯¯æç¤ºï¼Œç¦ç”¨ä¿å­˜æŒ‰é’® |
| VR-005 | è”ç³»äººç›®æ ‡ä¸èƒ½ä¸ºç©º | æ˜¾ç¤ºé”™è¯¯æç¤ºï¼Œç¦ç”¨ä¿å­˜æŒ‰é’® |
| VR-006 | äº‹å®å†…å®¹ä¸è¶…è¿‡500å­— | æ˜¾ç¤ºå­—æ•°è¶…é™æç¤º |
| VR-007 | å¯¹è¯å†…å®¹ä¸è¶…è¿‡1000å­— | æ˜¾ç¤ºå­—æ•°è¶…é™æç¤º |
| VR-008 | æ€»ç»“å†…å®¹ä¸è¶…è¿‡2000å­— | æ˜¾ç¤ºå­—æ•°è¶…é™æç¤º |
| VR-009 | è”ç³»äººå§“åä¸è¶…è¿‡50å­— | æ˜¾ç¤ºå­—æ•°è¶…é™æç¤º |
| VR-010 | è”ç³»äººç›®æ ‡ä¸è¶…è¿‡200å­— | æ˜¾ç¤ºå­—æ•°è¶…é™æç¤º |

### 6.2 ç¼–è¾‘æƒé™è§„åˆ™

| è§„åˆ™ID | è§„åˆ™æè¿° | å¤„ç†æ–¹å¼ |
|--------|----------|----------|
| PR-001 | æ‰€æœ‰äº‹å®å‡å¯ç¼–è¾‘ | æ— é™åˆ¶ |
| PR-002 | æ‰€æœ‰å¯¹è¯è®°å½•å‡å¯ç¼–è¾‘ | æ— é™åˆ¶ |
| PR-003 | AIæ€»ç»“ä»…å†…å®¹å¯ç¼–è¾‘ | å…³é”®äº‹ä»¶ã€æ ‡ç­¾æ›´æ–°ä¸å¯ç¼–è¾‘ |
| PR-004 | è”ç³»äººå§“åå’Œç›®æ ‡å¯ç¼–è¾‘ | æ— é™åˆ¶ |
| PR-005 | å·²åˆ é™¤å†…å®¹ä¸å¯æ¢å¤ | åˆ é™¤å‰äºŒæ¬¡ç¡®è®¤ |

### 6.3 æ•°æ®ä¸€è‡´æ€§è§„åˆ™

| è§„åˆ™ID | è§„åˆ™æè¿° | å¤„ç†æ–¹å¼ |
|--------|----------|----------|
| CR-001 | ç¼–è¾‘åå¿…é¡»æ›´æ–°isUserModifiedæ ‡è®° | è‡ªåŠ¨è®¾ç½®ä¸ºtrue |
| CR-002 | ç¼–è¾‘åå¿…é¡»æ›´æ–°lastModifiedTime | è‡ªåŠ¨è®¾ç½®ä¸ºå½“å‰æ—¶é—´ |
| CR-003 | é¦–æ¬¡ç¼–è¾‘æ—¶ä¿å­˜åŸå§‹å€¼ | ä»…é¦–æ¬¡ç¼–è¾‘æ—¶ä¿å­˜ |
| CR-004 | ç¼–è¾‘ä¸å½±å“åŸå§‹æ—¶é—´æˆ³ | timestampå­—æ®µä¿æŒä¸å˜ |
| CR-005 | ç¼–è¾‘ä¸å½±å“æ¥æºæ ‡è¯† | sourceå­—æ®µä¿æŒä¸å˜ |

### 6.4 èº«ä»½å‰ç¼€å¤„ç†è§„åˆ™ï¼ˆå¯¹è¯è®°å½•ï¼‰

| è§„åˆ™ID | è§„åˆ™æè¿° | å¤„ç†æ–¹å¼ |
|--------|----------|----------|
| IP-001 | åŠ è½½æ—¶è§£æèº«ä»½å‰ç¼€ | ä½¿ç”¨IdentityPrefixHelper.parse() |
| IP-002 | ç¼–è¾‘æ—¶åªæ˜¾ç¤ºçº¯æ–‡æœ¬ | éšè—å‰ç¼€ï¼Œæ˜¾ç¤ºcontentéƒ¨åˆ† |
| IP-003 | ä¿å­˜æ—¶é‡æ–°æ‹¼æ¥å‰ç¼€ | ä½¿ç”¨IdentityPrefixHelper.rebuildWithPrefix() |
| IP-004 | ä¿æŒåŸå§‹èº«ä»½ä¸å˜ | ç¼–è¾‘ä¸æ”¹å˜æ¶ˆæ¯å‘é€è€…èº«ä»½ |



---

## 7. ç»„ä»¶è®¾è®¡

### 7.1 UIç»„ä»¶æ¸…å•

| ç»„ä»¶åç§° | ç±»å‹ | èŒè´£ |
|----------|------|------|
| EditFactDialog | Composable | äº‹å®ç¼–è¾‘å¯¹è¯æ¡† |
| EditConversationDialog | Composable | å¯¹è¯è®°å½•ç¼–è¾‘å¯¹è¯æ¡†ï¼ˆå·²å­˜åœ¨ï¼Œéœ€æ‰©å±•ï¼‰ |
| EditSummaryDialog | Composable | AIæ€»ç»“ç¼–è¾‘å¯¹è¯æ¡† |
| EditContactNameDialog | Composable | è”ç³»äººå§“åç¼–è¾‘å¯¹è¯æ¡† |
| EditContactGoalDialog | Composable | è”ç³»äººç›®æ ‡ç¼–è¾‘å¯¹è¯æ¡† |
| EditedBadge | Composable | å·²ç¼–è¾‘æ ‡è¯†å¾½ç«  |
| DeleteConfirmDialog | Composable | åˆ é™¤ç¡®è®¤å¯¹è¯æ¡† |
| CharacterCounter | Composable | å­—ç¬¦è®¡æ•°å™¨ï¼ˆå¤ç”¨ç°æœ‰ï¼‰ |

### 7.2 ä¸šåŠ¡ç»„ä»¶æ¸…å•

| ç»„ä»¶åç§° | å±‚çº§ | èŒè´£ |
|----------|------|------|
| EditFactUseCase | Domain | äº‹å®ç¼–è¾‘ä¸šåŠ¡é€»è¾‘ |
| EditConversationUseCase | Domain | å¯¹è¯è®°å½•ç¼–è¾‘ä¸šåŠ¡é€»è¾‘ |
| EditSummaryUseCase | Domain | AIæ€»ç»“ç¼–è¾‘ä¸šåŠ¡é€»è¾‘ |
| EditContactInfoUseCase | Domain | è”ç³»äººä¿¡æ¯ç¼–è¾‘ä¸šåŠ¡é€»è¾‘ |
| ContentValidator | Domain | å†…å®¹éªŒè¯æœåŠ¡ |

### 7.3 ç»„ä»¶äº¤äº’å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Presentation Layer                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ FactItem    â”‚â”€â”€â”€â†’â”‚ EditFact    â”‚â”€â”€â”€â†’â”‚ EditedBadge â”‚     â”‚
â”‚  â”‚ (ç‚¹å‡»)      â”‚    â”‚ Dialog      â”‚    â”‚ (æ˜¾ç¤º)      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                  â”‚                                â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                            â–¼                                â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                  â”‚ ContactDetail   â”‚                        â”‚
â”‚                  â”‚ TabViewModel    â”‚                        â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Domain Layer                             â”‚
â”‚                            â–¼                                â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚         â–¼                  â–¼                  â–¼             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ EditFact    â”‚    â”‚ EditConv    â”‚    â”‚ EditSummary â”‚     â”‚
â”‚  â”‚ UseCase     â”‚    â”‚ UseCase     â”‚    â”‚ UseCase     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                  â”‚                  â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                            â–¼                                â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                  â”‚ ContentValidatorâ”‚                        â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Data Layer                               â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚         â–¼                  â–¼                  â–¼             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Contact     â”‚    â”‚ Conversationâ”‚    â”‚ DailySummaryâ”‚     â”‚
â”‚  â”‚ Repository  â”‚    â”‚ Repository  â”‚    â”‚ Repository  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.4 EditFactDialogç»„ä»¶è®¾è®¡

```kotlin
/**
 * äº‹å®ç¼–è¾‘å¯¹è¯æ¡†
 *
 * @param fact è¦ç¼–è¾‘çš„äº‹å®
 * @param onDismiss å…³é—­å¯¹è¯æ¡†å›è°ƒ
 * @param onConfirm ç¡®è®¤ç¼–è¾‘å›è°ƒ
 * @param onDelete åˆ é™¤å›è°ƒ
 */
@Composable
fun EditFactDialog(
    fact: Fact,
    onDismiss: () -> Unit,
    onConfirm: (newKey: String, newValue: String) -> Unit,
    onDelete: () -> Unit,
    modifier: Modifier = Modifier
) {
    var factKey by remember { mutableStateOf(fact.key) }
    var factValue by remember { mutableStateOf(fact.value) }
    var keyError by remember { mutableStateOf<String?>(null) }
    var valueError by remember { mutableStateOf<String?>(null) }
    var showDeleteConfirm by remember { mutableStateOf(false) }

    // é¢„è®¾çš„äº‹å®ç±»å‹ï¼ˆå¤ç”¨AddFactToStreamDialogï¼‰
    val presetKeys = listOf(
        "æ€§æ ¼ç‰¹ç‚¹", "å…´è¶£çˆ±å¥½", "å·¥ä½œä¿¡æ¯", "å®¶åº­æƒ…å†µ",
        "é‡è¦æ—¥æœŸ", "ç¦å¿Œè¯é¢˜", "æ²Ÿé€šç­–ç•¥", "å…¶ä»–"
    )

    // ... å¯¹è¯æ¡†å®ç°
}
```

### 7.5 EditSummaryDialogç»„ä»¶è®¾è®¡

```kotlin
/**
 * AIæ€»ç»“ç¼–è¾‘å¯¹è¯æ¡†
 *
 * @param summary è¦ç¼–è¾‘çš„æ€»ç»“
 * @param onDismiss å…³é—­å¯¹è¯æ¡†å›è°ƒ
 * @param onConfirm ç¡®è®¤ç¼–è¾‘å›è°ƒ
 */
@Composable
fun EditSummaryDialog(
    summary: DailySummary,
    onDismiss: () -> Unit,
    onConfirm: (newContent: String) -> Unit,
    modifier: Modifier = Modifier
) {
    var content by remember { mutableStateOf(summary.content) }
    var contentError by remember { mutableStateOf<String?>(null) }

    AlertDialog(
        onDismissRequest = onDismiss,
        title = { 
            Text("ç¼–è¾‘æ€»ç»“ (${summary.getDisplayDateRange()})") 
        },
        text = {
            Column(
                modifier = Modifier.fillMaxWidth(),
                verticalArrangement = Arrangement.spacedBy(12.dp)
            ) {
                // å…ƒä¿¡æ¯æ˜¾ç¤º
                Row(
                    horizontalArrangement = Arrangement.spacedBy(8.dp)
                ) {
                    SummarySourceBadge(source = summary.generationSource)
                    Text(
                        text = "åˆ†æäº†${summary.conversationCount}æ¡å¯¹è¯",
                        style = MaterialTheme.typography.bodySmall
                    )
                }
                
                // å†…å®¹ç¼–è¾‘æ¡†
                OutlinedTextField(
                    value = content,
                    onValueChange = { 
                        content = it
                        contentError = if (it.length > 2000) "å†…å®¹ä¸èƒ½è¶…è¿‡2000å­—" else null
                    },
                    label = { Text("æ€»ç»“å†…å®¹") },
                    isError = contentError != null,
                    supportingText = {
                        Row(
                            modifier = Modifier.fillMaxWidth(),
                            horizontalArrangement = Arrangement.SpaceBetween
                        ) {
                            contentError?.let { Text(it) }
                            Text("${content.length}/2000")
                        }
                    },
                    minLines = 5,
                    maxLines = 10,
                    modifier = Modifier.fillMaxWidth()
                )
                
                // åŸå§‹å†…å®¹å‚è€ƒï¼ˆå¦‚æœæœ‰ï¼‰
                if (summary.originalContent != null) {
                    Text(
                        text = "åŸå§‹å†…å®¹ï¼š${summary.originalContent.take(100)}...",
                        style = MaterialTheme.typography.bodySmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant
                    )
                }
            }
        },
        confirmButton = {
            TextButton(
                onClick = { onConfirm(content.trim()) },
                enabled = content.isNotBlank() && contentError == null
            ) {
                Text("ä¿å­˜")
            }
        },
        dismissButton = {
            TextButton(onClick = onDismiss) {
                Text("å–æ¶ˆ")
            }
        },
        modifier = modifier
    )
}
```



---

## 8. å¼‚å¸¸å¤„ç†è®¾è®¡

### 8.1 é”™è¯¯åˆ†ç±»ä¸å¤„ç†

| é”™è¯¯ç±»å‹ | é”™è¯¯ç  | ç”¨æˆ·æç¤º | å¤„ç†ç­–ç•¥ |
|----------|--------|----------|----------|
| å†…å®¹ä¸ºç©º | E001 | å†…å®¹ä¸èƒ½ä¸ºç©º | ç¦ç”¨ä¿å­˜æŒ‰é’® |
| å†…å®¹è¶…é•¿ | E002 | å†…å®¹è¶…è¿‡å­—æ•°é™åˆ¶ | æ˜¾ç¤ºå­—æ•°æç¤º |
| ä¿å­˜å¤±è´¥ | E003 | ä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯• | æä¾›é‡è¯•æŒ‰é’® |
| æ•°æ®åº“é”™è¯¯ | E004 | æ•°æ®ä¿å­˜å¼‚å¸¸ | æ˜¾ç¤ºé”™è¯¯Toast |
| æ•°æ®ä¸å­˜åœ¨ | E005 | å†…å®¹å·²è¢«åˆ é™¤ | å…³é—­å¯¹è¯æ¡†ï¼Œåˆ·æ–°åˆ—è¡¨ |
| å¹¶å‘å†²çª | E006 | å†…å®¹å·²è¢«ä¿®æ”¹ | æç¤ºåˆ·æ–°åé‡è¯• |

### 8.2 é”™è¯¯å¤„ç†æµç¨‹

```kotlin
sealed class EditResult {
    object Success : EditResult()
    data class ValidationError(val message: String) : EditResult()
    data class DatabaseError(val exception: Exception) : EditResult()
    object NotFound : EditResult()
    object ConflictError : EditResult()
}

// UseCaseä¸­çš„é”™è¯¯å¤„ç†
suspend fun editFact(
    factId: String,
    newKey: String,
    newValue: String
): Result<EditResult> = runCatching {
    // 1. éªŒè¯è¾“å…¥
    if (newKey.isBlank()) {
        return@runCatching EditResult.ValidationError("äº‹å®ç±»å‹ä¸èƒ½ä¸ºç©º")
    }
    if (newValue.isBlank()) {
        return@runCatching EditResult.ValidationError("äº‹å®å†…å®¹ä¸èƒ½ä¸ºç©º")
    }
    if (newValue.length > 500) {
        return@runCatching EditResult.ValidationError("äº‹å®å†…å®¹ä¸èƒ½è¶…è¿‡500å­—")
    }

    // 2. æ£€æŸ¥æ•°æ®æ˜¯å¦å­˜åœ¨
    val existingFact = factRepository.getFactById(factId)
        ?: return@runCatching EditResult.NotFound

    // 3. æ‰§è¡Œæ›´æ–°
    val updatedFact = existingFact.copyWithEdit(newKey, newValue)
    factRepository.updateFact(updatedFact)

    EditResult.Success
}
```

### 8.3 ç”¨æˆ·åé¦ˆè®¾è®¡

| åœºæ™¯ | åé¦ˆæ–¹å¼ | æŒç»­æ—¶é—´ |
|------|----------|----------|
| ä¿å­˜æˆåŠŸ | Toast "å·²ä¿å­˜" | 2ç§’ |
| åˆ é™¤æˆåŠŸ | Toast "å·²åˆ é™¤" | 2ç§’ |
| éªŒè¯å¤±è´¥ | è¾“å…¥æ¡†ä¸‹æ–¹é”™è¯¯æç¤º | æŒç»­æ˜¾ç¤º |
| ä¿å­˜å¤±è´¥ | Snackbar + é‡è¯•æŒ‰é’® | 5ç§’ |
| ç½‘ç»œé”™è¯¯ | Snackbar + é‡è¯•æŒ‰é’® | 5ç§’ |



---

## 9. æ€§èƒ½è®¾è®¡

### 9.1 æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹æ³• |
|------|--------|----------|
| å¯¹è¯æ¡†æ‰“å¼€å“åº” | < 100ms | ä»ç‚¹å‡»åˆ°æ˜¾ç¤º |
| è¾“å…¥å“åº” | < 16ms | æ¯æ¬¡æŒ‰é”®å“åº” |
| ä¿å­˜æ“ä½œ | < 500ms | æ•°æ®åº“å†™å…¥æ—¶é—´ |
| åˆ—è¡¨åˆ·æ–° | < 200ms | ä¿å­˜åUIæ›´æ–° |
| å†…å­˜å¢é‡ | < 2MB | ç¼–è¾‘æ“ä½œæœŸé—´ |

### 9.2 ä¼˜åŒ–ç­–ç•¥

#### 9.2.1 æ‡’åŠ è½½åŸå§‹å†…å®¹

```kotlin
// ä»…åœ¨éœ€è¦æ—¶åŠ è½½åŸå§‹å†…å®¹
@Composable
fun EditFactDialog(fact: Fact, ...) {
    // åŸå§‹å†…å®¹æ‡’åŠ è½½
    var showOriginal by remember { mutableStateOf(false) }
    
    if (showOriginal && fact.originalValue != null) {
        Text(
            text = "åŸå§‹å†…å®¹ï¼š${fact.originalValue}",
            style = MaterialTheme.typography.bodySmall
        )
    }
    
    TextButton(onClick = { showOriginal = !showOriginal }) {
        Text(if (showOriginal) "éšè—åŸå§‹å†…å®¹" else "æŸ¥çœ‹åŸå§‹å†…å®¹")
    }
}
```

#### 9.2.2 é˜²æŠ–è¾“å…¥éªŒè¯

```kotlin
// è¾“å…¥é˜²æŠ–ï¼Œé¿å…é¢‘ç¹éªŒè¯
val debouncedValidation = remember {
    Debouncer(delayMs = 300)
}

OutlinedTextField(
    value = content,
    onValueChange = { newValue ->
        content = newValue
        debouncedValidation.debounce {
            contentError = validateContent(newValue)
        }
    }
)
```

#### 9.2.3 å±€éƒ¨æ›´æ–°

```kotlin
// ä»…æ›´æ–°ä¿®æ”¹çš„å­—æ®µï¼Œé¿å…å…¨é‡æ›´æ–°
@Update(onConflict = OnConflictStrategy.REPLACE)
suspend fun updateFactContent(
    factId: String,
    newKey: String,
    newValue: String,
    isUserModified: Boolean,
    lastModifiedTime: Long,
    originalKey: String?,
    originalValue: String?
)
```



---

## 10. éªŒæ”¶æ ‡å‡†

### 10.1 åŠŸèƒ½éªŒæ”¶

#### P0 - æ ¸å¿ƒåŠŸèƒ½ï¼ˆå¿…é¡»é€šè¿‡ï¼‰

- [ ] äº‹å®(Fact)å¯ä»¥ç¼–è¾‘é”®å’Œå€¼
- [ ] å¯¹è¯è®°å½•å¯ä»¥ç¼–è¾‘å†…å®¹
- [ ] AIæ€»ç»“å¯ä»¥ç¼–è¾‘å†…å®¹
- [ ] è”ç³»äººå§“åå¯ä»¥ç¼–è¾‘
- [ ] è”ç³»äººç›®æ ‡å¯ä»¥ç¼–è¾‘
- [ ] ç¼–è¾‘åæ­£ç¡®æ˜¾ç¤º"å·²ç¼–è¾‘"æ ‡è¯†
- [ ] æœ€åä¿®æ”¹æ—¶é—´æ­£ç¡®æ›´æ–°
- [ ] æ•°æ®æ­£ç¡®ä¿å­˜åˆ°æ•°æ®åº“
- [ ] åˆ é™¤åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] åˆ é™¤å‰æœ‰äºŒæ¬¡ç¡®è®¤

#### P1 - å¢å¼ºåŠŸèƒ½ï¼ˆåº”è¯¥é€šè¿‡ï¼‰

- [ ] è¾“å…¥éªŒè¯è§„åˆ™æ­£ç¡®æ‰§è¡Œ
- [ ] å­—ç¬¦è®¡æ•°æ­£ç¡®æ˜¾ç¤º
- [ ] åŸå§‹å†…å®¹å¯æŸ¥çœ‹
- [ ] å¯¹è¯è®°å½•ç¼–è¾‘ä¿æŒèº«ä»½å‰ç¼€
- [ ] ç¼–è¾‘å¯¹è¯æ¡†æ ·å¼ç»Ÿä¸€

#### P2 - ä¼˜åŒ–åŠŸèƒ½ï¼ˆå¯ä»¥é€šè¿‡ï¼‰

- [ ] ç¼–è¾‘æ“ä½œå“åº”æµç•…
- [ ] é”™è¯¯æç¤ºå‹å¥½æ¸…æ™°
- [ ] ä¿å­˜æˆåŠŸæœ‰åé¦ˆæç¤º

### 10.2 æ€§èƒ½éªŒæ”¶

- [ ] å¯¹è¯æ¡†æ‰“å¼€å“åº”æ—¶é—´ < 100ms
- [ ] ä¿å­˜æ“ä½œæ—¶é—´ < 500ms
- [ ] åˆ—è¡¨åˆ·æ–°æ—¶é—´ < 200ms
- [ ] å†…å­˜å¢é‡ < 2MB

### 10.3 å…¼å®¹æ€§éªŒæ”¶

- [ ] ä¸ç°æœ‰äº‹å®æµç³»ç»Ÿå…¼å®¹
- [ ] æ•°æ®åº“è¿ç§»æ­£ç¡®æ‰§è¡Œ
- [ ] æ—§æ•°æ®æ­£å¸¸æ˜¾ç¤ºï¼ˆisUserModifiedé»˜è®¤falseï¼‰
- [ ] ä¸åŒå±å¹•å°ºå¯¸é€‚é…æ­£å¸¸



---

## 11. å¼€å‘ä¼˜å…ˆçº§

### 11.1 é˜¶æ®µåˆ’åˆ†

#### é˜¶æ®µä¸€ï¼šæ•°æ®æ¨¡å‹æ‰©å±•ï¼ˆ1-2å¤©ï¼‰

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | é¢„ä¼°å·¥æ—¶ |
|------|--------|----------|
| Factæ¨¡å‹æ‰©å±• | P0 | 1h |
| ConversationLogæ¨¡å‹æ‰©å±• | P0 | 1h |
| DailySummaryæ¨¡å‹æ‰©å±• | P0 | 1h |
| ContactProfileæ¨¡å‹æ‰©å±• | P0 | 1h |
| æ•°æ®åº“Migrationè„šæœ¬ | P0 | 2h |
| Entityç±»æ›´æ–° | P0 | 2h |
| æ¨¡å‹å•å…ƒæµ‹è¯• | P0 | 2h |

#### é˜¶æ®µäºŒï¼šç¼–è¾‘åŠŸèƒ½å®ç°ï¼ˆ3-4å¤©ï¼‰

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | é¢„ä¼°å·¥æ—¶ |
|------|--------|----------|
| EditFactDialogç»„ä»¶ | P0 | 3h |
| EditFactUseCase | P0 | 2h |
| EditSummaryDialogç»„ä»¶ | P0 | 3h |
| EditSummaryUseCase | P0 | 2h |
| EditContactNameDialogç»„ä»¶ | P0 | 2h |
| EditContactGoalDialogç»„ä»¶ | P0 | 2h |
| EditContactInfoUseCase | P0 | 2h |
| æ‰©å±•EditConversationDialog | P1 | 2h |
| EditConversationUseCase | P1 | 2h |
| ContentValidatoræœåŠ¡ | P1 | 2h |

#### é˜¶æ®µä¸‰ï¼šUIé›†æˆä¸ä¼˜åŒ–ï¼ˆ2-3å¤©ï¼‰

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | é¢„ä¼°å·¥æ—¶ |
|------|--------|----------|
| EditedBadgeç»„ä»¶ | P1 | 2h |
| FactItemé›†æˆç¼–è¾‘å…¥å£ | P1 | 2h |
| ConversationCardé›†æˆç¼–è¾‘å…¥å£ | P1 | 2h |
| AiSummaryCardé›†æˆç¼–è¾‘å…¥å£ | P1 | 2h |
| ContactDetailHeaderé›†æˆç¼–è¾‘å…¥å£ | P1 | 2h |
| ViewModeläº‹ä»¶å¤„ç† | P1 | 3h |
| é”™è¯¯å¤„ç†ä¸ç”¨æˆ·åé¦ˆ | P2 | 2h |

#### é˜¶æ®µå››ï¼šæµ‹è¯•ä¸å®Œå–„ï¼ˆ1-2å¤©ï¼‰

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | é¢„ä¼°å·¥æ—¶ |
|------|--------|----------|
| UseCaseå•å…ƒæµ‹è¯• | P0 | 3h |
| Dialogç»„ä»¶æµ‹è¯• | P1 | 2h |
| é›†æˆæµ‹è¯• | P1 | 2h |
| æ•°æ®åº“è¿ç§»æµ‹è¯• | P0 | 2h |
| æ€§èƒ½æµ‹è¯• | P2 | 1h |

### 11.2 ä¾èµ–å…³ç³»

```
é˜¶æ®µä¸€
  â”‚
  â”œâ”€â”€ æ•°æ®æ¨¡å‹æ‰©å±• â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                          â”‚
  â”œâ”€â”€ æ•°æ®åº“Migration â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â†’ é˜¶æ®µäºŒ
  â”‚                          â”‚      â”‚
  â””â”€â”€ Entityç±»æ›´æ–° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                                    â”‚
                              â”Œâ”€â”€â”€â”€â”€â”˜
                              â”‚
é˜¶æ®µäºŒ                        â–¼
  â”‚
  â”œâ”€â”€ EditFactDialog â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                          â”‚
  â”œâ”€â”€ EditSummaryDialog â”€â”€â”€â”€â”€â”¼â”€â”€â†’ é˜¶æ®µä¸‰
  â”‚                          â”‚
  â”œâ”€â”€ EditContactDialogs â”€â”€â”€â”€â”¤
  â”‚                          â”‚
  â””â”€â”€ UseCases â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚
é˜¶æ®µä¸‰                        â–¼
  â”‚
  â”œâ”€â”€ EditedBadge â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                          â”‚
  â”œâ”€â”€ ç¼–è¾‘å…¥å£é›†æˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â†’ é˜¶æ®µå››
  â”‚                          â”‚
  â””â”€â”€ ViewModelé›†æˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```



---

## 12. é£é™©è¯„ä¼°

### 12.1 æŠ€æœ¯é£é™©

| é£é™© | å¯èƒ½æ€§ | å½±å“ | ç¼“è§£æªæ–½ |
|------|--------|------|----------|
| æ•°æ®åº“è¿ç§»å¤±è´¥ | ä½ | é«˜ | å®Œæ•´çš„è¿ç§»æµ‹è¯•ï¼Œå¤‡ä»½æœºåˆ¶ |
| æ•°æ®ä¸€è‡´æ€§é—®é¢˜ | ä¸­ | é«˜ | äº‹åŠ¡å¤„ç†ï¼Œä¹è§‚é” |
| æ€§èƒ½ä¸‹é™ | ä½ | ä¸­ | å±€éƒ¨æ›´æ–°ï¼Œæ‡’åŠ è½½ |
| ä¸ç°æœ‰åŠŸèƒ½å†²çª | ä½ | ä¸­ | å……åˆ†æµ‹è¯•ï¼Œæ¸è¿›å¼å‘å¸ƒ |

### 12.2 äº§å“é£é™©

| é£é™© | å¯èƒ½æ€§ | å½±å“ | ç¼“è§£æªæ–½ |
|------|--------|------|----------|
| ç”¨æˆ·è¯¯æ“ä½œåˆ é™¤æ•°æ® | ä¸­ | é«˜ | äºŒæ¬¡ç¡®è®¤ï¼Œä¿ç•™åŸå§‹å€¼ |
| ç¼–è¾‘å…¥å£ä¸æ˜æ˜¾ | ä¸­ | ä½ | æ·»åŠ è§†è§‰æç¤º |
| ç¼–è¾‘ä½“éªŒä¸ä½³ | ä½ | ä¸­ | ç”¨æˆ·æµ‹è¯•ï¼Œè¿­ä»£ä¼˜åŒ– |

### 12.3 èµ„æºé£é™©

| é£é™© | å¯èƒ½æ€§ | å½±å“ | ç¼“è§£æªæ–½ |
|------|--------|------|----------|
| å¼€å‘æ—¶é—´è¶…é¢„æœŸ | ä¸­ | ä¸­ | åˆ†é˜¶æ®µäº¤ä»˜ï¼Œä¼˜å…ˆæ ¸å¿ƒåŠŸèƒ½ |
| æµ‹è¯•è¦†ç›–ä¸è¶³ | ä½ | ä¸­ | è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä»£ç å®¡æŸ¥ |

---

## 13. ç›¸å…³æ–‡æ¡£

- [PRD-00012-äº‹å®æµå†…å®¹ç¼–è¾‘åŠŸèƒ½éœ€æ±‚](../PRD/PRD-00012-äº‹å®æµå†…å®¹ç¼–è¾‘åŠŸèƒ½éœ€æ±‚.md)
- [FD-00004-è”ç³»äººç”»åƒè®°å¿†ç³»ç»ŸUIåŠŸèƒ½è®¾è®¡](./FD-00004-è”ç³»äººç”»åƒè®°å¿†ç³»ç»ŸUIåŠŸèƒ½è®¾è®¡.md)
- [FD-00008-è¾“å…¥å†…å®¹èº«ä»½è¯†åˆ«ä¸åŒå‘å¯¹è¯å†å²åŠŸèƒ½è®¾è®¡](./FD-00008-è¾“å…¥å†…å®¹èº«ä»½è¯†åˆ«ä¸åŒå‘å¯¹è¯å†å²åŠŸèƒ½è®¾è®¡.md)
- [TDD-00004-è”ç³»äººç”»åƒè®°å¿†ç³»ç»ŸUIæ¶æ„è®¾è®¡](../TDD/TDD-00004-è”ç³»äººç”»åƒè®°å¿†ç³»ç»ŸUIæ¶æ„è®¾è®¡.md)

---

## 14. ä¿®è®¢å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | ä¿®æ”¹å†…å®¹ |
|------|------|------|----------|
| 1.0 | 2025-12-20 | Kiro | åˆå§‹ç‰ˆæœ¬ |

