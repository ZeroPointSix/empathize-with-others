# FD-00021: 设置界面UI优化功能设计

> **文档类型**: 功能设计文档 (FD)
> **版本**: 1.1
> **创建日期**: 2025-12-26
> **更新日期**: 2025-12-26
> **负责人**: Kiro
> **关联PRD**: PRD-00021
> **关联调研**: RESEARCH-00056
> **关联审查**: DR-00021
> **状态**: ✅ 审查通过

---

## 1. 功能概述

### 1.1 功能目标

将设置界面中三个关键页面从Material Design 3风格重构为iOS原生Inset Grouped风格，提升视觉一致性和用户体验。

### 1.2 涉及页面

| 页面 | 当前实现 | 目标实现 | 设计稿 |
|------|----------|----------|--------|
| AI配置页面 | AiConfigScreen.kt | iOS Inset Grouped | AI配置-iOS风格.html |
| 添加服务商页面 | ProviderFormDialog.kt | 全屏iOS风格 | 添加服务商-iOS风格.html |
| 个人画像页面 | UserProfileScreen.kt | iOS Inset Grouped | 个人画像-iOS风格.html |

---

## 2. 组件设计

### 2.1 可复用现有组件

| 组件 | 文件路径 | 用途 |
|------|----------|------|
| IOSSettingsItem | `component/ios/IOSSettingsItem.kt` | 设置项（通用选项、高级设置） |
| IOSSettingsSection | `component/ios/IOSSettingsSection.kt` | 分组卡片容器 |
| IOSNavigationBar | `component/ios/IOSNavigationBar.kt` | 添加服务商页面导航栏 |
| IOSSearchBar | `component/ios/IOSSearchBar.kt` | AI配置页面搜索栏 |
| IOSSwitch | `component/ios/IOSSwitch.kt` | 开关组件 |

### 2.2 需要新建的组件

#### 2.2.1 IOSLargeTitleBar（大标题导航栏）

**用途**: AI配置页面顶部导航栏

**设计规格**:
- 大标题: 34sp, Bold, 黑色
- 返回按钮: iOS蓝色, chevron_left图标
- 添加按钮: iOS蓝色, add图标
- 背景: iOSBackground (#F2F2F7) + 模糊效果

```kotlin
@Composable
fun IOSLargeTitleBar(
    title: String,
    onBackClick: () -> Unit,
    onAddClick: (() -> Unit)? = null,
    modifier: Modifier = Modifier
)
```

#### 2.2.2 IOSProviderCard（服务商卡片）

**用途**: AI配置页面服务商列表项

**设计规格**:
- 图标容器: 40x40dp, 圆角10dp, 带背景色
- 标题: 17sp, SemiBold
- 描述: 15sp, 灰色
- 默认标记: 蓝色勾选图标
- 分隔线: 从图标右侧开始

```kotlin
@Composable
fun IOSProviderCard(
    provider: AiProvider,
    isDefault: Boolean,
    onClick: () -> Unit,
    modifier: Modifier = Modifier
)
```

#### 2.2.3 IOSFormField（表单输入）

**用途**: 添加服务商页面表单

**设计规格**:
- 高度: 44dp
- 标签: 固定宽度64dp, 17sp
- 输入框: 右对齐, 17sp
- 分隔线: 从标签右侧开始

```kotlin
@Composable
fun IOSFormField(
    label: String,
    value: String,
    onValueChange: (String) -> Unit,
    placeholder: String = "",
    isPassword: Boolean = false,
    showDivider: Boolean = true,
    trailingIcon: @Composable (() -> Unit)? = null,
    modifier: Modifier = Modifier
)
```

#### 2.2.4 IOSTestConnectionButton（测试连接按钮）

**用途**: 添加服务商页面测试连接

**设计规格**:
- 高度: 44dp
- 文字: iOS蓝色, 17sp
- 图标: wifi_tethering
- 成功状态: iOS绿色 + check_circle图标
- 加载状态: 旋转sync图标

```kotlin
@Composable
fun IOSTestConnectionButton(
    isLoading: Boolean,
    isSuccess: Boolean?,
    onClick: () -> Unit,
    modifier: Modifier = Modifier
)
```

#### 2.2.5 IOSModelListItem（模型列表项）

**用途**: 添加服务商页面模型列表

**设计规格**:
- 高度: 52dp
- 模型名: 17sp
- 默认标记: 蓝色背景标签
- 拖拽手柄: drag_handle图标, 灰色

```kotlin
@Composable
fun IOSModelListItem(
    modelId: String,
    isDefault: Boolean,
    onClick: () -> Unit,
    modifier: Modifier = Modifier
)
```

#### 2.2.6 ProfileCompletionCard（画像完整度卡片）

**用途**: 个人画像页面顶部

**设计规格**:
- 圆角: 12dp
- 标题: 13sp, 灰色
- 百分比: 28sp, Bold, iOS蓝色
- 进度条: 6dp高度, iOS蓝色
- 标签数: 11sp, 灰色

```kotlin
@Composable
fun ProfileCompletionCard(
    completeness: Int,
    tagCount: Int,
    modifier: Modifier = Modifier
)
```

#### 2.2.7 IOSTabSwitcher（Tab切换器）

**用途**: 个人画像页面Tab切换

**设计规格**:
- 圆角: 12dp
- Tab文字: 15sp
- 选中态: iOS蓝色, SemiBold
- 未选中: 灰色
- 下划线: 2dp高度, iOS蓝色, 动画300ms

```kotlin
@Composable
fun IOSTabSwitcher(
    tabs: List<String>,
    selectedIndex: Int,
    onTabSelected: (Int) -> Unit,
    modifier: Modifier = Modifier
)
```

#### 2.2.8 DimensionCard（维度卡片）

**用途**: 个人画像页面维度展示

**设计规格**:
- 圆角: 12dp
- 图标容器: 36x36dp, 圆角10dp
- 标题: 17sp, SemiBold
- 描述: 13sp, 灰色
- 展开图标: expand_less, 旋转动画
- 展开/收起动画: 200ms

```kotlin
@Composable
fun DimensionCard(
    icon: ImageVector,
    iconBackgroundColor: Color,
    title: String,
    description: String,
    tags: List<String>,
    presetTags: List<String>,
    isExpanded: Boolean,
    onToggleExpand: () -> Unit,
    onAddTag: () -> Unit,
    onEditTag: (String) -> Unit,
    onSelectPresetTag: (String) -> Unit,
    modifier: Modifier = Modifier
)
```

#### 2.2.9 EditableTag（可编辑标签）

**用途**: 个人画像页面已添加标签

**设计规格**:
- 背景: #F2F2F7
- 边框: #E5E5EA
- 圆角: 8dp
- 文字: 15sp
- 编辑图标: 16dp, 灰色

```kotlin
@Composable
fun EditableTag(
    text: String,
    onClick: () -> Unit,
    modifier: Modifier = Modifier
)
```

#### 2.2.10 AddTagButton（添加标签按钮）

**用途**: 个人画像页面添加标签

**设计规格**:
- 边框: 虚线, #C7C7CC
- 圆角: 8dp
- 图标: add, 16dp
- 文字: 15sp, 灰色

```kotlin
@Composable
fun AddTagButton(
    onClick: () -> Unit,
    modifier: Modifier = Modifier
)
```

#### 2.2.11 QuickSelectTags（快速选择标签）

**用途**: 个人画像页面预设标签

**设计规格**:
- 横向滚动
- 背景: #E5E5EA
- 圆角: 8dp
- 文字: 14sp, 灰色
- 点击态: iOS蓝色背景

```kotlin
@Composable
fun QuickSelectTags(
    tags: List<String>,
    onTagClick: (String) -> Unit,
    modifier: Modifier = Modifier
)
```

---

## 3. 页面设计

### 3.1 AI配置页面 (AiConfigScreen)

#### 3.1.1 页面结构

```
┌─────────────────────────────────┐
│ IOSLargeTitleBar                │
│ ├── 返回按钮                    │
│ ├── 大标题 "AI 配置"            │
│ └── 添加按钮                    │
├─────────────────────────────────┤
│ IOSSearchBar                    │
├─────────────────────────────────┤
│ IOSSettingsSection "推理引擎"   │
│ ├── IOSProviderCard (默认)      │
│ ├── IOSProviderCard             │
│ └── IOSProviderCard             │
│ Footer: "向左滑动..."           │
├─────────────────────────────────┤
│ IOSSettingsSection "通用选项"   │
│ ├── IOSSettingsItem (网络代理)  │
│ └── IOSSettingsItem (用量统计)  │
├─────────────────────────────────┤
│ IOSSettingsSection "高级设置"   │
│ ├── IOSSettingsItem (请求超时)  │
│ └── IOSSettingsItem (最大Token) │
└─────────────────────────────────┘
```

#### 3.1.2 交互设计

| 交互 | 行为 |
|------|------|
| 点击服务商卡片 | 设为默认服务商，显示蓝色勾选 |
| 左滑服务商卡片 | 显示编辑/删除按钮（P1） |
| 点击添加按钮 | 跳转到添加服务商页面 |
| 搜索输入 | 过滤服务商列表 |

### 3.2 添加服务商页面 (AddProviderScreen)

#### 3.2.1 页面结构

```
┌─────────────────────────────────┐
│ IOSNavigationBar                │
│ ├── 取消按钮                    │
│ ├── 标题 "添加服务商"           │
│ └── 完成按钮                    │
├─────────────────────────────────┤
│ IOSSettingsSection "基础信息"   │
│ ├── IOSFormField (名称)         │
│ ├── IOSFormField (端点)         │
│ └── IOSFormField (密钥)         │
│ Footer: "API密钥将使用加密..."  │
├─────────────────────────────────┤
│ IOSSettingsSection              │
│ └── IOSTestConnectionButton     │
├─────────────────────────────────┤
│ IOSSettingsSection "模型列表"   │
│ ├── 自动获取按钮                │
│ ├── 手动添加按钮                │
│ ├── IOSModelListItem (默认)     │
│ ├── IOSModelListItem            │
│ └── IOSModelListItem            │
│ Footer: "拖拽调整模型顺序..."   │
├─────────────────────────────────┤
│ IOSSettingsSection "高级选项"   │
│ ├── IOSSettingsItem (Temperature)│
│ └── IOSSettingsItem (最大Token) │
└─────────────────────────────────┘
```

#### 3.2.2 交互设计

| 交互 | 行为 |
|------|------|
| 点击取消 | 返回上一页，不保存 |
| 点击完成 | 验证表单，保存并返回 |
| 点击测试连接 | 显示加载动画，成功/失败反馈 |
| 点击模型项 | 设为默认模型 |
| 左滑模型项 | 显示删除按钮（P1） |
| 密钥显示/隐藏 | 切换密码可见性 |

### 3.3 个人画像页面 (UserProfileScreen)

#### 3.3.1 页面结构

```
┌─────────────────────────────────┐
│ TopAppBar                       │
│ ├── 返回按钮                    │
│ ├── 标题 "个人画像"             │
│ ├── 分享按钮                    │
│ └── 刷新按钮                    │
├─────────────────────────────────┤
│ ProfileCompletionCard           │
│ ├── 画像完整度                  │
│ ├── 进度条                      │
│ └── 标签数量                    │
├─────────────────────────────────┤
│ IOSTabSwitcher                  │
│ ├── 基础信息                    │
│ └── 自定义维度                  │
├─────────────────────────────────┤
│ DimensionCard (性格特点)        │
│ ├── 已添加标签                  │
│ ├── 添加标签按钮                │
│ └── 快速选择                    │
├─────────────────────────────────┤
│ DimensionCard (价值观)          │
├─────────────────────────────────┤
│ DimensionCard (兴趣爱好)        │
├─────────────────────────────────┤
│ DimensionCard (沟通风格)        │
├─────────────────────────────────┤
│ DimensionCard (社交偏好)        │
└─────────────────────────────────┘
```

#### 3.3.2 交互设计

| 交互 | 行为 |
|------|------|
| 点击Tab | 切换基础信息/自定义维度，下划线动画 |
| 点击维度卡片头部 | 展开/收起内容，旋转图标动画 |
| 点击已添加标签 | 显示编辑对话框 |
| 点击添加标签按钮 | 显示添加对话框 |
| 点击快速选择标签 | 直接添加到已添加列表 |

---

## 6. 组件交互关系

### 6.1 数据流图

```
┌─────────────────────────────────────────────────────────────┐
│                      AiConfigScreen                          │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐      │
│  │IOSLargeTitle│    │IOSSearchBar │    │IOSSettings  │      │
│  │    Bar      │    │             │    │  Section    │      │
│  └──────┬──────┘    └──────┬──────┘    └──────┬──────┘      │
│         │                  │                  │              │
│         │ onBackClick      │ onQueryChange    │              │
│         │ onAddClick       │                  │              │
│         ▼                  ▼                  ▼              │
│  ┌──────────────────────────────────────────────────┐       │
│  │              AiConfigViewModel                    │       │
│  │  ┌─────────────────────────────────────────┐     │       │
│  │  │           AiConfigUiState               │     │       │
│  │  │  - providers: List<AiProvider>          │     │       │
│  │  │  - searchQuery: String                  │     │       │
│  │  │  - filteredProviders: List<AiProvider>  │     │       │
│  │  └─────────────────────────────────────────┘     │       │
│  └──────────────────────────────────────────────────┘       │
└─────────────────────────────────────────────────────────────┘
```

### 6.2 事件传递流程

#### AI配置页面事件流

```
用户操作                    事件                         处理
─────────────────────────────────────────────────────────────
点击返回按钮      →    onBackClick()           →    导航返回
点击添加按钮      →    onAddClick()            →    导航到AddProviderScreen
输入搜索文字      →    UpdateSearchQuery(q)    →    过滤providers列表
点击服务商卡片    →    SetDefaultProvider(id)  →    更新默认服务商
```

#### 添加服务商页面事件流

```
用户操作                    事件                         处理
─────────────────────────────────────────────────────────────
点击取消按钮      →    onCancel()              →    导航返回，不保存
点击完成按钮      →    onDone()                →    验证→保存→导航返回
输入表单字段      →    UpdateFormField(f,v)    →    更新表单状态
点击测试连接      →    TestConnection          →    执行测试→更新结果
点击模型项        →    SetDefaultModel(id)     →    更新默认模型
```

#### 个人画像页面事件流

```
用户操作                    事件                         处理
─────────────────────────────────────────────────────────────
点击Tab           →    SwitchTab(index)        →    切换Tab，动画
点击维度卡片头部  →    ToggleDimension(key)    →    展开/收起，动画
点击已添加标签    →    ShowEditTagDialog(t)    →    显示编辑对话框
点击添加标签按钮  →    ShowAddTagDialog(d)     →    显示添加对话框
点击快速选择标签  →    AddTag(dimension, tag)  →    添加标签到列表
```

### 6.3 组件依赖关系

```
IOSLargeTitleBar
    └── 无依赖

IOSProviderCard
    └── 依赖: AiProvider (domain model)

IOSFormField
    └── 无依赖

IOSTestConnectionButton
    └── 无依赖

IOSModelListItem
    └── 无依赖

ProfileCompletionCard
    └── 无依赖

IOSTabSwitcher
    └── 无依赖

DimensionCard
    ├── 依赖: EditableTag
    ├── 依赖: AddTagButton
    └── 依赖: QuickSelectTags

EditableTag
    └── 无依赖

AddTagButton
    └── 无依赖

QuickSelectTags
    └── 无依赖
```

---

## 7. 性能优化策略

### 7.1 列表性能优化

| 优化项 | 策略 | 适用场景 |
|--------|------|----------|
| LazyColumn | 使用key参数确保正确复用 | 服务商列表、模型列表 |
| remember | 缓存计算结果 | 过滤后的列表 |
| derivedStateOf | 派生状态优化 | 搜索过滤 |

```kotlin
// 示例：搜索过滤优化
val filteredProviders by remember(providers, searchQuery) {
    derivedStateOf {
        if (searchQuery.isBlank()) providers
        else providers.filter { it.name.contains(searchQuery, ignoreCase = true) }
    }
}
```

### 7.2 动画性能优化

| 优化项 | 策略 | 适用场景 |
|--------|------|----------|
| animateContentSize | 使用spring动画 | 维度卡片展开/收起 |
| animateFloatAsState | 避免重组 | Tab下划线移动 |
| Modifier.graphicsLayer | GPU加速 | 旋转动画 |

```kotlin
// 示例：展开动画优化
val rotationAngle by animateFloatAsState(
    targetValue = if (isExpanded) 0f else 180f,
    animationSpec = tween(durationMillis = 200),
    label = "rotation"
)

Icon(
    modifier = Modifier.graphicsLayer { rotationZ = rotationAngle }
)
```

### 7.3 内存优化

| 优化项 | 策略 | 说明 |
|--------|------|------|
| 图标缓存 | 使用ImageVector而非Painter | 减少内存占用 |
| 状态提升 | 避免不必要的状态 | 减少重组范围 |
| 组件拆分 | 细粒度组件 | 局部重组 |

### 7.4 性能监控指标

| 指标 | 目标值 | 测量方法 |
|------|--------|----------|
| 页面加载时间 | < 500ms | Compose Metrics |
| 滚动帧率 | ≥ 60fps | Android Profiler |
| 内存占用增量 | < 10MB | Memory Profiler |
| 动画流畅度 | 无卡顿 | 视觉检查 |

---

## 8. 导航设计

### 8.1 新增导航路由

```kotlin
// NavRoutes.kt
object NavRoutes {
    // 现有路由...
    
    // 新增: 添加服务商页面
    const val ADD_PROVIDER = "add_provider"
    
    // 新增: 编辑服务商页面（可选，复用AddProviderScreen）
    const val EDIT_PROVIDER = "edit_provider/{providerId}"
}
```

### 8.2 导航流程

```
设置页面
    │
    ├── AI配置 ──────────────────┐
    │       │                    │
    │       ├── 点击添加 ────────┼──→ 添加服务商页面
    │       │                    │         │
    │       ├── 点击服务商 ──────┼──→ 编辑服务商页面
    │       │                    │
    │       └── 返回 ←───────────┘
    │
    └── 个人画像 ────────────────→ 个人画像页面
```

---

## 9. 状态管理

### 9.1 AiConfigUiState 扩展

```kotlin
data class AiConfigUiState(
    // 现有字段...
    
    // 新增: 搜索相关
    val searchQuery: String = "",
    val filteredProviders: List<AiProvider> = emptyList(),
    
    // 新增: 高级设置
    val requestTimeout: Int = 30,
    val maxTokens: Int = 4096
)
```

### 9.2 AiConfigUiEvent 扩展

```kotlin
sealed class AiConfigUiEvent {
    // 现有事件...
    
    // 新增: 搜索
    data class UpdateSearchQuery(val query: String) : AiConfigUiEvent()
    
    // 新增: 高级设置
    data class UpdateRequestTimeout(val timeout: Int) : AiConfigUiEvent()
    data class UpdateMaxTokens(val tokens: Int) : AiConfigUiEvent()
}
```

---

## 10. 文件结构

### 10.1 新建文件

```
presentation/src/main/kotlin/com/empathy/ai/presentation/
├── ui/
│   ├── component/
│   │   └── ios/
│   │       ├── IOSLargeTitleBar.kt      # 大标题导航栏
│   │       ├── IOSProviderCard.kt       # 服务商卡片
│   │       ├── IOSFormField.kt          # 表单输入
│   │       ├── IOSTestConnectionButton.kt # 测试连接按钮
│   │       ├── IOSModelListItem.kt      # 模型列表项
│   │       ├── IOSTabSwitcher.kt        # Tab切换器
│   │       ├── ProfileCompletionCard.kt # 画像完整度卡片
│   │       ├── DimensionCard.kt         # 维度卡片
│   │       ├── EditableTag.kt           # 可编辑标签
│   │       ├── AddTagButton.kt          # 添加标签按钮
│   │       └── QuickSelectTags.kt       # 快速选择标签
│   └── screen/
│       └── aiconfig/
│           └── AddProviderScreen.kt     # 添加服务商页面
```

### 10.2 修改文件

```
presentation/src/main/kotlin/com/empathy/ai/presentation/
├── ui/
│   └── screen/
│       ├── aiconfig/
│       │   ├── AiConfigScreen.kt        # 重构为iOS风格
│       │   ├── AiConfigUiState.kt       # 扩展状态
│       │   └── AiConfigUiEvent.kt       # 扩展事件
│       └── userprofile/
│           └── UserProfileScreen.kt     # 重构为iOS风格
├── navigation/
│   ├── NavGraph.kt                      # 添加新路由
│   └── NavRoutes.kt                     # 添加路由常量
└── theme/
    └── Dimensions.kt                    # 添加iOS尺寸常量（可选）
```

---

## 11. 实施计划

### Phase 1: AI配置页面优化（1天）

| 任务ID | 任务描述 | 预估时间 | 优先级 |
|--------|----------|----------|--------|
| T1-01 | 创建IOSLargeTitleBar组件 | 2h | P0 |
| T1-02 | 创建IOSProviderCard组件 | 3h | P0 |
| T1-03 | 重构AiConfigScreen布局 | 3h | P0 |
| T1-04 | 添加搜索过滤功能 | 1h | P0 |
| T1-05 | 添加通用选项和高级设置区域 | 1h | P1 |
| T1-06 | **编写Phase 1单元测试** | 1h | P0 |
| T1-07 | **编写Phase 1 UI测试** | 1h | P1 |

### Phase 2: 添加服务商页面优化（1天）

| 任务ID | 任务描述 | 预估时间 | 优先级 |
|--------|----------|----------|--------|
| T2-01 | 创建IOSFormField组件 | 2h | P0 |
| T2-02 | 创建IOSTestConnectionButton组件 | 1h | P0 |
| T2-03 | 创建IOSModelListItem组件 | 2h | P0 |
| T2-04 | 创建AddProviderScreen页面 | 3h | P0 |
| T2-05 | 添加导航路由 | 1h | P0 |
| T2-06 | 添加高级选项区域 | 1h | P1 |
| T2-07 | **编写Phase 2单元测试** | 1h | P0 |
| T2-08 | **编写Phase 2 UI测试** | 1h | P1 |

### Phase 3: 个人画像页面优化（1.5天）

| 任务ID | 任务描述 | 预估时间 | 优先级 |
|--------|----------|----------|--------|
| T3-01 | 创建ProfileCompletionCard组件 | 2h | P0 |
| T3-02 | 创建IOSTabSwitcher组件 | 2h | P0 |
| T3-03 | 创建DimensionCard组件 | 3h | P0 |
| T3-04 | 创建EditableTag组件 | 1h | P0 |
| T3-05 | 创建AddTagButton组件 | 0.5h | P0 |
| T3-06 | 创建QuickSelectTags组件 | 1h | P0 |
| T3-07 | 重构UserProfileScreen | 3h | P0 |
| T3-08 | **编写Phase 3单元测试** | 1h | P0 |
| T3-09 | **编写Phase 3 UI测试** | 1h | P1 |

### Phase 4: 收尾与优化（0.5天）

| 任务ID | 任务描述 | 预估时间 | 优先级 |
|--------|----------|----------|--------|
| T4-01 | **性能测试与优化** | 1h | P0 |
| T4-02 | **代码审查与重构** | 1h | P0 |
| T4-03 | **集成测试** | 1h | P0 |
| T4-04 | **文档更新** | 0.5h | P1 |
| T4-05 | **验收检查清单确认** | 0.5h | P0 |

### 测试策略

#### 单元测试覆盖

| 组件/模块 | 测试文件 | 测试用例 |
|-----------|----------|----------|
| IOSLargeTitleBar | IOSLargeTitleBarTest.kt | 渲染、点击回调 |
| IOSProviderCard | IOSProviderCardTest.kt | 默认标记、点击事件 |
| IOSFormField | IOSFormFieldTest.kt | 输入、验证、密码切换 |
| ProfileCompletionCard | ProfileCompletionCardTest.kt | 进度计算、动画 |
| DimensionCard | DimensionCardTest.kt | 展开/收起、标签操作 |
| AiConfigViewModel | AiConfigViewModelTest.kt | 搜索过滤、状态更新 |

#### UI测试覆盖

| 页面 | 测试文件 | 测试场景 |
|------|----------|----------|
| AiConfigScreen | AiConfigScreenTest.kt | 列表显示、搜索、导航 |
| AddProviderScreen | AddProviderScreenTest.kt | 表单填写、验证、保存 |
| UserProfileScreen | UserProfileScreenTest.kt | Tab切换、标签管理 |

---

## 12. 验收标准

### 12.1 视觉验收

- [ ] AI配置页面与设计稿一致度 ≥ 95%
- [ ] 添加服务商页面与设计稿一致度 ≥ 95%
- [ ] 个人画像页面与设计稿一致度 ≥ 95%
- [ ] 使用iOS系统色，无自定义主题色
- [ ] 字体规格符合设计规范

### 12.2 交互验收

- [ ] 所有可点击元素有按下态反馈
- [ ] 动画流畅，时长200-300ms
- [ ] Tab切换下划线平滑移动
- [ ] 维度卡片展开/收起动画流畅

### 12.3 功能验收

- [ ] 搜索功能正常过滤服务商
- [ ] 默认服务商显示蓝色勾选
- [ ] 测试连接显示正确状态
- [ ] 标签管理功能正常

### 12.4 技术验收

- [ ] 代码符合Clean Architecture规范
- [ ] 新组件放置在正确目录
- [ ] 无编译错误和警告
- [ ] 性能：页面加载 < 500ms

### 12.5 测试验收

- [ ] 单元测试覆盖率 ≥ 80%
- [ ] UI测试覆盖关键交互流程
- [ ] 所有测试用例通过
- [ ] 无内存泄漏

---

## 13. 附录

### 13.1 设计稿位置

```
文档/开发文档/UI-原型/PRD21/
├── index.html                    # 设计稿索引
├── AI配置-iOS风格.html           # AI配置页面
├── 添加服务商-iOS风格.html       # 添加服务商页面
└── 个人画像-iOS风格.html         # 个人画像页面
```

### 13.2 相关文档

- [PRD-00021-设置界面UI优化.md](../PRD/PRD-00021-设置界面UI优化.md)
- [RESEARCH-00056-PRD00021设置界面UI优化前置调研报告.md](../RE/RESEARCH-00056-PRD00021设置界面UI优化前置调研报告.md)
- [CN-00004-prd21-settings-ui-optimization.md](../CN/CN-00004-prd21-settings-ui-optimization.md)
- [DR-00021-FD00021文档审查报告.md](../DR/DR-00021-FD00021文档审查报告.md)

---

## 14. 变更记录

| 版本 | 日期 | 变更内容 | 变更人 |
|------|------|----------|--------|
| v1.0 | 2025-12-26 | 初始版本 | Kiro |
| v1.1 | 2025-12-26 | 根据DR-00021审查报告修改：添加负责人、测试任务、收尾阶段、组件交互关系、性能优化策略 | Kiro |

---

**文档版本**: 1.1
**最后更新**: 2025-12-26
**文档状态**: ✅ 审查通过
