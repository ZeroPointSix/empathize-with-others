# FD-00029 AIå†›å¸ˆUIæ¶æ„ä¼˜åŒ–åŠŸèƒ½è®¾è®¡

## æ–‡æ¡£ä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|------|------|
| æ–‡æ¡£ç¼–å· | FD-00029 |
| åˆ›å»ºæ—¥æœŸ | 2026-01-06 |
| æ›´æ–°æ—¥æœŸ | 2026-01-06 |
| çŠ¶æ€ | å·²å®¡æŸ¥é€šè¿‡ |
| å…³è”PRD | PRD-00029 |
| å…³è”TDD | TDD-00029 |
| å…³è”æ–‡æ¡£ | PRD-00026ã€FD-00026ã€TDD-00026 |

### ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | å˜æ›´è¯´æ˜ |
|------|------|------|----------|
| 1.0 | 2026-01-06 | Kiro | åˆå§‹ç‰ˆæœ¬ |
| 1.1 | 2026-01-06 | Kiro | æ ¹æ®å®¡æŸ¥æŠ¥å‘Šè¡¥å……ï¼šé£é™©è¯„ä¼°ã€æµ‹è¯•ç”¨ä¾‹ã€æ€§èƒ½æŒ‡æ ‡ç»†åŒ–ã€é”™è¯¯å¤„ç†ä»£ç ç¤ºä¾‹ã€UIç»„ä»¶å®ç°ã€éªŒæ”¶æ ‡å‡† |

---

## 1. åŠŸèƒ½æ¦‚è¿°

### 1.1 åŠŸèƒ½ç›®æ ‡

é‡æ„AIå†›å¸ˆUIæ¶æ„ï¼Œå®ç°**ä¸‰ä¸ªç‹¬ç«‹å…¨å±é¡µé¢**çš„å¯¼èˆªä½“ç³»ï¼Œæå‡ç”¨æˆ·ä½“éªŒå’ŒåŠŸèƒ½å¯ç”¨æ€§ã€‚

### 1.2 æ ¸å¿ƒåŠŸèƒ½ç‚¹

| åŠŸèƒ½ç‚¹ | æè¿° |
|-------|------|
| å¯¹è¯ç•Œé¢ | AIå†›å¸ˆä¸»ç•Œé¢ï¼Œä¸AIè¿›è¡Œå¯¹è¯äº¤äº’ |
| ä¼šè¯å†å²é¡µé¢ | æ˜¾ç¤ºå½“å‰è”ç³»äººçš„æ‰€æœ‰å†å²ä¼šè¯åˆ—è¡¨ |
| è”ç³»äººé€‰æ‹©é¡µé¢ | åˆ‡æ¢ä¸åŒè”ç³»äººï¼Œé€‰æ‹©åè‡ªåŠ¨å¼€å¯æ–°ä¼šè¯ |
| è‡ªåŠ¨æ¢å¤è”ç³»äºº | è¿›å…¥AIå†›å¸ˆæ—¶è‡ªåŠ¨æ¢å¤ä¸Šæ¬¡ä½¿ç”¨çš„è”ç³»äºº |
| é¦–æ¬¡ä½¿ç”¨å¼•å¯¼ | æ— å†å²è”ç³»äººæ—¶è‡ªåŠ¨è¿›å…¥è”ç³»äººé€‰æ‹©é¡µé¢ |

### 1.3 ä¸PRD-00026çš„åŒºåˆ«

| ç»´åº¦ | PRD-00026ï¼ˆåŸç‰ˆï¼‰ | PRD-00029ï¼ˆæœ¬æ¬¡ä¼˜åŒ–ï¼‰ |
|------|------------------|---------------------|
| é¡µé¢æ¶æ„ | å•é¡µé¢+å¼¹çª— | ä¸‰ä¸ªç‹¬ç«‹å…¨å±é¡µé¢ |
| è”ç³»äººåˆ‡æ¢ | Dialogå¼¹çª—é€‰æ‹© | ç‹¬ç«‹è”ç³»äººé€‰æ‹©é¡µé¢ |
| ä¼šè¯å†å² | æ— ç‹¬ç«‹å…¥å£ | ç‹¬ç«‹ä¼šè¯å†å²é¡µé¢ |
| è‡ªåŠ¨æ¢å¤ | æ—  | è‡ªåŠ¨æ¢å¤ä¸Šæ¬¡è”ç³»äºº |
| é¦–æ¬¡ä½¿ç”¨ | ç›´æ¥è¿›å…¥ç©ºå¯¹è¯ | å¼•å¯¼åˆ°è”ç³»äººé€‰æ‹©é¡µé¢ |
| UIé£æ ¼ | Material Design | iOSé£æ ¼è®¾è®¡ |

---

## 2. ç³»ç»Ÿæ¶æ„è®¾è®¡

### 2.1 ä¸‰é¡µé¢æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ç”¨æˆ·ç‚¹å‡»"AIå†›å¸ˆ"Tab                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AiAdvisorScreen (å…¥å£é¡µé¢)                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ£€æŸ¥ AiAdvisorPreferences.lastContactId             â”‚   â”‚
â”‚  â”‚ â”œâ”€â”€ æœ‰å€¼ â†’ å¯¼èˆªåˆ° AiAdvisorChatScreen(contactId)    â”‚   â”‚
â”‚  â”‚ â”‚         + è‡ªåŠ¨åˆ›å»ºæ–°ä¼šè¯                          â”‚   â”‚
â”‚  â”‚ â””â”€â”€ æ— å€¼ â†’ å¯¼èˆªåˆ° ContactSelectScreen               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AiAdvisorChat    â”‚ â”‚ SessionHistory   â”‚ â”‚ ContactSelect    â”‚
â”‚ Screen           â”‚ â”‚ Screen           â”‚ â”‚ Screen           â”‚
â”‚ (å¯¹è¯ç•Œé¢)       â”‚ â”‚ (ä¼šè¯å†å²é¡µé¢)   â”‚ â”‚ (è”ç³»äººé€‰æ‹©é¡µé¢) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [â˜°]  AIå†›å¸ˆ [ğŸ‘¤] â”‚ â”‚ [<] ä¼šè¯å†å²     â”‚ â”‚ [<] é€‰æ‹©è”ç³»äºº   â”‚
â”‚                  â”‚ â”‚                  â”‚ â”‚                  â”‚
â”‚ å¯¹è¯æ¶ˆæ¯åˆ—è¡¨     â”‚ â”‚ ä¼šè¯åˆ—è¡¨         â”‚ â”‚ è”ç³»äººåˆ—è¡¨       â”‚
â”‚                  â”‚ â”‚                  â”‚ â”‚                  â”‚
â”‚ [è¾“å…¥æ¡†]         â”‚ â”‚                  â”‚ â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ¨¡å—åˆ†å¸ƒï¼ˆéµå¾ªClean Architectureï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Presentation Layer                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   :presentation æ¨¡å—                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚AiAdvisorScreen â”‚ â”‚AiAdvisorChatScreen         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  (å…¥å£é¡µé¢)    â”‚ â”‚  (å¯¹è¯ç•Œé¢-ä¿®æ”¹)           â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚SessionHistory  â”‚ â”‚ContactSelectScreen         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Screen(æ–°å¢)  â”‚ â”‚  (æ–°å¢)                    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚SessionHistory  â”‚ â”‚ContactSelectViewModel      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  ViewModel(æ–°) â”‚ â”‚  (æ–°å¢)                    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Data Layer                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     :data æ¨¡å—                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
â”‚  â”‚  â”‚AiAdvisorPreferences (æ–°å¢)                       â”‚â”‚  â”‚
â”‚  â”‚  â”‚  - lastContactId: String                         â”‚â”‚  â”‚
â”‚  â”‚  â”‚  - lastSessionId: String?                        â”‚â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 æ•°æ®æµè®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     é¡µé¢å¯¼èˆªæ•°æ®æµ                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ç”¨æˆ·ç‚¹å‡»AIå†›å¸ˆTab
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ AiAdvisor    â”‚ â† å…¥å£é¡µé¢
  â”‚   Screen     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ AiAdvisor    â”‚ â† è¯»å–åå¥½è®¾ç½®
  â”‚ Preferences  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚æœ‰è”ç³»äººâ”‚ â”‚æ— è”ç³»äººâ”‚
â”‚è®°å½•    â”‚ â”‚è®°å½•    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚         â”‚
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚å¯¼èˆªåˆ°  â”‚ â”‚å¯¼èˆªåˆ°  â”‚
â”‚å¯¹è¯ç•Œé¢â”‚ â”‚è”ç³»äºº  â”‚
â”‚+æ–°ä¼šè¯ â”‚ â”‚é€‰æ‹©é¡µé¢â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. é¡µé¢åŠŸèƒ½è®¾è®¡

### 3.1 å¯¹è¯ç•Œé¢ï¼ˆAiAdvisorChatScreenï¼‰

#### 3.1.1 UIåŸå‹å‚è€ƒ

> ğŸ”´ **å¿…é¡»å‚è€ƒåŸå‹**: `æ–‡æ¡£/å¼€å‘æ–‡æ¡£/UI-åŸå‹/PRD29/geminiå¯¹è¯ç•Œé¢.html`

#### 3.1.2 é¡µé¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            çŠ¶æ€æ  (11dp)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [â˜°]         AI å†›å¸ˆ          [ğŸ‘¤]     â”‚  â† å¯¼èˆªæ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚     â”‚   å…±æƒ… Logo (æ¸å˜å¿ƒå½¢)   â”‚        â”‚  â† ç©ºçŠ¶æ€æ¬¢è¿åŒº
â”‚     â”‚       "å…±æƒ…"            â”‚        â”‚
â”‚     â”‚  "æ‡‚ä½ æ‰€æƒ³ï¼ŒåŠ©ä½ è¡¨è¾¾"    â”‚        â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [AI] AIå›å¤å†…å®¹...              â”‚   â”‚  â† å¯¹è¯æ¶ˆæ¯
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           ç”¨æˆ·æ¶ˆæ¯å†…å®¹ [ç”¨æˆ·]   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚[+] è¾“å…¥æ¶ˆæ¯æˆ–ç²˜è´´èŠå¤©è®°å½• [ğŸ¤][â¤]â”‚   â”‚  â† æ‚¬æµ®è¾“å…¥æ¡†
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Home Indicator (8dp)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.1.3 å¯¼èˆªæ è®¾è®¡

| å…ƒç´  | ä½ç½® | å›¾æ ‡ | ç‚¹å‡»è¡Œä¸º |
|------|------|------|----------|
| èœå•æŒ‰é’® | å·¦ä¾§ | `menu` (â˜°) | è¿›å…¥ä¼šè¯å†å²é¡µé¢ |
| æ ‡é¢˜ | ä¸­é—´ | - | "AI å†›å¸ˆ" |
| è”ç³»äººæŒ‰é’® | å³ä¾§ | `person` (ğŸ‘¤) | è¿›å…¥è”ç³»äººé€‰æ‹©é¡µé¢ |

#### 3.1.4 åŠŸèƒ½éœ€æ±‚

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| F-029-01 | å·¦ä¸Šè§’â˜°å›¾æ ‡ç‚¹å‡»è¿›å…¥ä¼šè¯å†å²é¡µé¢ | P0 |
| F-029-02 | å³ä¸Šè§’ğŸ‘¤å›¾æ ‡ç‚¹å‡»è¿›å…¥è”ç³»äººé€‰æ‹©é¡µé¢ | P0 |
| F-029-03 | è‡ªåŠ¨æ¢å¤ä¸Šæ¬¡è”ç³»äººå¹¶å¼€å¯æ–°ä¼šè¯ | P0 |
| F-029-04 | æ— å¯¹è¯æ—¶æ˜¾ç¤ºå…±æƒ…Logoæ¬¢è¿åŒºåŸŸ | P1 |
| F-029-05 | æ‚¬æµ®è¾“å…¥æ¡†ï¼ˆåœ†è§’22dpï¼Œå¸¦é˜´å½±ï¼‰ | P0 |
| F-029-06 | æµå¼AIå›å¤ï¼ˆæ‰“å­—æœºæ•ˆæœ+åœæ­¢æŒ‰é’®ï¼‰ | P0 |

### 3.2 ä¼šè¯å†å²é¡µé¢ï¼ˆSessionHistoryScreenï¼‰

#### 3.2.1 UIåŸå‹å‚è€ƒ

> ğŸ”´ **å¿…é¡»å‚è€ƒåŸå‹**: `æ–‡æ¡£/å¼€å‘æ–‡æ¡£/UI-åŸå‹/PRD29/ai-advisor-home-ios.html`
> 
> å‚è€ƒåŸå‹ä¸­"æœ€è¿‘å¯¹è¯"åŒºåŸŸçš„åˆ—è¡¨æ ·å¼ã€‚

#### 3.2.2 é¡µé¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            çŠ¶æ€æ  (11dp)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [<]         ä¼šè¯å†å²          [æ–°å»º]   â”‚  â† å¯¼èˆªæ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ” æœç´¢ä¼šè¯                     â”‚   â”‚  â† æœç´¢æ¡†
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¸ å¼ ä¸‰ çš„å¯¹è¯                         â”‚  â† åˆ†ç»„æ ‡é¢˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ä¼šè¯æ ‡é¢˜A              10:30  > â”‚   â”‚
â”‚  â”‚ æœ€åä¸€æ¡æ¶ˆæ¯é¢„è§ˆ...              â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚  â† ä¼šè¯åˆ—è¡¨
â”‚  â”‚ ä¼šè¯æ ‡é¢˜B              æ˜¨å¤©   > â”‚   â”‚
â”‚  â”‚ æœ€åä¸€æ¡æ¶ˆæ¯é¢„è§ˆ...              â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ä¼šè¯æ ‡é¢˜C              12/28  > â”‚   â”‚
â”‚  â”‚ æœ€åä¸€æ¡æ¶ˆæ¯é¢„è§ˆ...              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Home Indicator (8dp)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.3 ä¼šè¯åˆ—è¡¨é¡¹è®¾è®¡

| å…ƒç´  | è¯´æ˜ |
|------|------|
| ä¼šè¯æ ‡é¢˜ | 15sp, é»‘è‰², å•è¡Œæˆªæ–­ |
| æ—¶é—´ | 11sp, ç°è‰²ï¼ˆç›¸å¯¹æ—¶é—´ï¼š10:30/æ˜¨å¤©/12/28ï¼‰ |
| æ¶ˆæ¯é¢„è§ˆ | 13sp, ç°è‰², å•è¡Œæˆªæ–­ |
| ç®­å¤´ | ç°è‰² > ç¬¦å·ï¼Œè¡¨ç¤ºå¯ç‚¹å‡» |

#### 3.2.4 åŠŸèƒ½éœ€æ±‚

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| F-029-10 | æ˜¾ç¤ºå½“å‰è”ç³»äººçš„æ‰€æœ‰å†å²ä¼šè¯ï¼ˆæŒ‰æ—¶é—´å€’åºï¼‰ | P0 |
| F-029-11 | ç‚¹å‡»ä¼šè¯é¡¹åŠ è½½è¯¥ä¼šè¯å¹¶è¿”å›å¯¹è¯ç•Œé¢ | P0 |
| F-029-12 | å³ä¸Šè§’"æ–°å»º"æŒ‰é’®åˆ›å»ºæ–°ä¼šè¯å¹¶è¿”å› | P0 |
| F-029-13 | è¿”å›æŒ‰é’®è¿”å›å¯¹è¯ç•Œé¢ | P0 |
| F-029-14 | æœç´¢ä¼šè¯åŠŸèƒ½ | P2 |
| F-029-15 | å·¦æ»‘åˆ é™¤ä¼šè¯ | P1 |
| F-029-16 | ç©ºçŠ¶æ€å‹å¥½æç¤º | P1 |

### 3.3 è”ç³»äººé€‰æ‹©é¡µé¢ï¼ˆContactSelectScreenï¼‰

#### 3.3.1 UIåŸå‹å‚è€ƒ

> ğŸ”´ **å¿…é¡»å‚è€ƒåŸå‹**: `æ–‡æ¡£/å¼€å‘æ–‡æ¡£/UI-åŸå‹/PRD29/ai-advisor-home-ios.html`
> 
> å‚è€ƒåŸå‹ä¸­è”ç³»äººåˆ—è¡¨çš„æ ·å¼ï¼ˆå¤´åƒã€å§“åã€å…³ç³»æ ‡ç­¾ã€æ—¶é—´ã€æ¶ˆæ¯é¢„è§ˆï¼‰ã€‚

#### 3.3.2 é¡µé¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            çŠ¶æ€æ  (11dp)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [<]         é€‰æ‹©è”ç³»äºº                 â”‚  â† å¯¼èˆªæ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ” æœç´¢è”ç³»äºº                   â”‚   â”‚  â† æœç´¢æ¡†
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è”ç³»äºº                                 â”‚  â† åˆ†ç»„æ ‡é¢˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [å¼ ] å¼ ä¸‰        äº²å¯†    10:30 >â”‚   â”‚
â”‚  â”‚      æœ€è¿‘å·¥ä½œå¥½ç´¯å•Š...           â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚  â† è”ç³»äººåˆ—è¡¨
â”‚  â”‚ [æ] æå››        ç†Ÿæ‚‰    æ˜¨å¤©  >â”‚   â”‚
â”‚  â”‚      å‘¨æœ«æœ‰ç©ºå—ï¼Ÿ                â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ [ç‹] ç‹äº”        æ™®é€š    å‘¨ä¸€  >â”‚   â”‚
â”‚  â”‚      é¡¹ç›®è¿›åº¦æ€ä¹ˆæ ·äº†ï¼Ÿ          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Home Indicator (8dp)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.3.3 è”ç³»äººåˆ—è¡¨é¡¹è®¾è®¡

| å…ƒç´  | è¯´æ˜ |
|------|------|
| å¤´åƒ | 44dpæ–¹å½¢åœ†è§’ï¼Œå½©è‰²èƒŒæ™¯+å§“æ°é¦–å­— |
| å§“å | 15sp, é»‘è‰² |
| å…³ç³»æ ‡ç­¾ | 11sp, ç°è‰²ï¼ˆäº²å¯†/ç†Ÿæ‚‰/æ™®é€š/æ–°è®¤è¯†ï¼‰ |
| æ—¶é—´ | 11sp, ç°è‰²ï¼ˆç›¸å¯¹æ—¶é—´ï¼‰ |
| æ¶ˆæ¯é¢„è§ˆ | 13sp, ç°è‰², å•è¡Œæˆªæ–­ |

#### 3.3.4 åŠŸèƒ½éœ€æ±‚

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| F-029-20 | æ˜¾ç¤ºæ‰€æœ‰è”ç³»äººï¼ˆæŒ‰æœ€åå¯¹è¯æ—¶é—´å€’åºï¼‰ | P0 |
| F-029-21 | ç‚¹å‡»è”ç³»äººåˆ‡æ¢+å¼€å¯æ–°ä¼šè¯+è¿”å›å¯¹è¯ç•Œé¢ | P0 |
| F-029-22 | è¿”å›æŒ‰é’®è¿”å›å¯¹è¯ç•Œé¢ | P0 |
| F-029-23 | æ˜¾ç¤ºå…³ç³»æ ‡ç­¾å’Œæœ€åæ¶ˆæ¯é¢„è§ˆ | P1 |
| F-029-24 | æœç´¢è”ç³»äººåŠŸèƒ½ | P2 |
| F-029-25 | ç©ºçŠ¶æ€å¼•å¯¼æ·»åŠ è”ç³»äºº | P1 |

---

## 4. äº¤äº’æµç¨‹è®¾è®¡

### 4.1 è¿›å…¥AIå†›å¸ˆæµç¨‹

```
ç”¨æˆ·ç‚¹å‡»"AIå†›å¸ˆ"Tab
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AiAdvisorScreen (å…¥å£é¡µé¢)              â”‚
â”‚ è¯»å– AiAdvisorPreferences.lastContactId â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â”€ æœ‰å€¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                      â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚   â”‚ 1. ä¿å­˜lastContactIdåˆ°åå¥½è®¾ç½®          â”‚
    â”‚   â”‚ 2. åˆ›å»ºæ–°ä¼šè¯                           â”‚
    â”‚   â”‚ 3. å¯¼èˆªåˆ° AiAdvisorChatScreen(contactId)â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â””â”€â”€ æ— å€¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
        â”‚ å¯¼èˆªåˆ° ContactSelectScreen              â”‚
        â”‚ (é¦–æ¬¡ä½¿ç”¨å¼•å¯¼)                          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 åˆ‡æ¢è”ç³»äººæµç¨‹

```
ç”¨æˆ·åœ¨å¯¹è¯ç•Œé¢ç‚¹å‡»å³ä¸Šè§’ğŸ‘¤
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¼èˆªåˆ° ContactSelectScreen              â”‚
â”‚ (ç‹¬ç«‹å…¨å±é¡µé¢)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
ç”¨æˆ·ç‚¹å‡»æŸä¸ªè”ç³»äºº
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ä¿å­˜ lastContactId åˆ°åå¥½è®¾ç½®        â”‚
â”‚ 2. åˆ›å»ºæ–°ä¼šè¯                           â”‚
â”‚ 3. å¯¼èˆªåˆ° AiAdvisorChatScreen(contactId)â”‚
â”‚    (popUpToæ¸…é™¤å†å²æ ˆ)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 æŸ¥çœ‹å†å²ä¼šè¯æµç¨‹

```
ç”¨æˆ·åœ¨å¯¹è¯ç•Œé¢ç‚¹å‡»å·¦ä¸Šè§’â˜°
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¼èˆªåˆ° SessionHistoryScreen(contactId)  â”‚
â”‚ (æ˜¾ç¤ºå½“å‰è”ç³»äººçš„ä¼šè¯åˆ—è¡¨)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â”€ ç‚¹å‡»æŸä¸ªä¼šè¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                      â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚   â”‚ 1. åŠ è½½è¯¥ä¼šè¯å†…å®¹                       â”‚
    â”‚   â”‚ 2. å¯¼èˆªåˆ° AiAdvisorChatScreen           â”‚
    â”‚   â”‚    (popUpToæ¸…é™¤å†å²æ ˆ)                  â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â”€ ç‚¹å‡»"æ–°å»º"æŒ‰é’® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                      â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚   â”‚ 1. åˆ›å»ºæ–°ä¼šè¯                           â”‚
    â”‚   â”‚ 2. å¯¼èˆªåˆ° AiAdvisorChatScreen           â”‚
    â”‚   â”‚    (popUpToæ¸…é™¤å†å²æ ˆ)                  â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â””â”€â”€ ç‚¹å‡»è¿”å›æŒ‰é’® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
        â”‚ è¿”å›å¯¹è¯ç•Œé¢ (navigateUp)               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. UIç»„ä»¶è®¾è®¡

### 5.1 iOSé£æ ¼å¯¼èˆªæ 

```kotlin
/**
 * iOSé£æ ¼å¯¼èˆªæ 
 *
 * ç‰¹ç‚¹ï¼š
 * - å±…ä¸­æ ‡é¢˜
 * - è“è‰²è¿”å›æŒ‰é’®å’Œæ“ä½œæŒ‰é’®
 * - æµ…ç°è‰²èƒŒæ™¯ (#F2F2F7)
 */
@Composable
fun IosStyleTopBar(
    title: String,
    onNavigateBack: (() -> Unit)? = null,
    navigationIcon: @Composable (() -> Unit)? = null,
    actions: @Composable RowScope.() -> Unit = {}
)
```

### 5.2 ä¼šè¯åˆ—è¡¨é¡¹ç»„ä»¶

```kotlin
/**
 * ä¼šè¯åˆ—è¡¨é¡¹ç»„ä»¶
 *
 * æ˜¾ç¤ºä¼šè¯æ ‡é¢˜ã€æœ€åæ¶ˆæ¯é¢„è§ˆã€æ—¶é—´
 *
 * @param session ä¼šè¯æ•°æ®
 * @param lastMessage æœ€åä¸€æ¡æ¶ˆæ¯å†…å®¹
 * @param onClick ç‚¹å‡»å›è°ƒ
 */
@Composable
fun SessionListItem(
    session: AiAdvisorSession,
    lastMessage: String?,
    onClick: () -> Unit
) {
    val iosBlue = Color(0xFF007AFF)
    val iosGray = Color(0xFF8E8E93)

    Card(
        modifier = Modifier
            .fillMaxWidth()
            .clickable(onClick = onClick)
            .padding(horizontal = 16.dp, vertical = 4.dp),
        colors = CardDefaults.cardColors(containerColor = Color.White),
        elevation = CardDefaults.cardElevation(defaultElevation = 0.dp)
    ) {
        Row(
            modifier = Modifier
                .fillMaxWidth()
                .padding(16.dp),
            horizontalArrangement = Arrangement.SpaceBetween,
            verticalAlignment = Alignment.CenterVertically
        ) {
            Column(modifier = Modifier.weight(1f)) {
                Text(
                    text = session.title,
                    fontSize = 15.sp,
                    fontWeight = FontWeight.Medium,
                    color = Color(0xFF1C1C1E)
                )
                Spacer(modifier = Modifier.height(4.dp))
                Text(
                    text = lastMessage ?: "æš‚æ— æ¶ˆæ¯",
                    fontSize = 13.sp,
                    color = iosGray,
                    maxLines = 1,
                    overflow = TextOverflow.Ellipsis
                )
            }
            Text(
                text = formatRelativeTime(session.updatedAt),
                fontSize = 11.sp,
                color = iosGray
            )
            Icon(
                imageVector = Icons.Default.ChevronRight,
                contentDescription = null,
                tint = iosGray,
                modifier = Modifier.size(20.dp)
            )
        }
    }
}

/**
 * æ ¼å¼åŒ–ç›¸å¯¹æ—¶é—´
 */
private fun formatRelativeTime(timestamp: Long): String {
    val now = System.currentTimeMillis()
    val diff = now - timestamp
    return when {
        diff < 60 * 1000 -> "åˆšåˆš"
        diff < 60 * 60 * 1000 -> "${diff / (60 * 1000)}åˆ†é’Ÿå‰"
        diff < 24 * 60 * 60 * 1000 -> {
            val sdf = SimpleDateFormat("HH:mm", Locale.getDefault())
            sdf.format(Date(timestamp))
        }
        diff < 2 * 24 * 60 * 60 * 1000 -> "æ˜¨å¤©"
        else -> {
            val sdf = SimpleDateFormat("MM/dd", Locale.getDefault())
            sdf.format(Date(timestamp))
        }
    }
}
```

### 5.3 è”ç³»äººåˆ—è¡¨é¡¹ç»„ä»¶

```kotlin
/**
 * è”ç³»äººåˆ—è¡¨é¡¹ç»„ä»¶
 *
 * æ˜¾ç¤ºå¤´åƒã€å§“åã€å…³ç³»æ ‡ç­¾ã€æ—¶é—´ã€æ¶ˆæ¯é¢„è§ˆ
 *
 * @param contact è”ç³»äººæ•°æ®
 * @param lastMessage æœ€åä¸€æ¡æ¶ˆæ¯å†…å®¹
 * @param onClick ç‚¹å‡»å›è°ƒ
 */
@Composable
fun ContactListItem(
    contact: ContactProfile,
    lastMessage: String?,
    onClick: () -> Unit
) {
    val iosGray = Color(0xFF8E8E93)
    
    // å¤´åƒèƒŒæ™¯è‰²åˆ—è¡¨
    val avatarColors = listOf(
        Color(0xFFFF6B6B), Color(0xFF4ECDC4), Color(0xFF45B7D1),
        Color(0xFFFFA07A), Color(0xFF98D8C8), Color(0xFFF7DC6F)
    )
    val avatarColor = avatarColors[contact.name.hashCode().absoluteValue % avatarColors.size]

    Card(
        modifier = Modifier
            .fillMaxWidth()
            .clickable(onClick = onClick)
            .padding(horizontal = 16.dp, vertical = 4.dp),
        colors = CardDefaults.cardColors(containerColor = Color.White),
        elevation = CardDefaults.cardElevation(defaultElevation = 0.dp)
    ) {
        Row(
            modifier = Modifier
                .fillMaxWidth()
                .padding(12.dp),
            verticalAlignment = Alignment.CenterVertically
        ) {
            // å¤´åƒ
            Box(
                modifier = Modifier
                    .size(44.dp)
                    .clip(RoundedCornerShape(8.dp))
                    .background(avatarColor),
                contentAlignment = Alignment.Center
            ) {
                Text(
                    text = contact.name.firstOrNull()?.toString() ?: "?",
                    fontSize = 18.sp,
                    fontWeight = FontWeight.Bold,
                    color = Color.White
                )
            }
            
            Spacer(modifier = Modifier.width(12.dp))
            
            // ä¿¡æ¯åŒºåŸŸ
            Column(modifier = Modifier.weight(1f)) {
                Row(verticalAlignment = Alignment.CenterVertically) {
                    Text(
                        text = contact.name,
                        fontSize = 15.sp,
                        fontWeight = FontWeight.Medium,
                        color = Color(0xFF1C1C1E)
                    )
                    Spacer(modifier = Modifier.width(8.dp))
                    Text(
                        text = contact.relationshipStage,
                        fontSize = 11.sp,
                        color = iosGray
                    )
                }
                Spacer(modifier = Modifier.height(4.dp))
                Text(
                    text = lastMessage ?: "æš‚æ— æ¶ˆæ¯",
                    fontSize = 13.sp,
                    color = iosGray,
                    maxLines = 1,
                    overflow = TextOverflow.Ellipsis
                )
            }
            
            // æ—¶é—´å’Œç®­å¤´
            Column(horizontalAlignment = Alignment.End) {
                Text(
                    text = formatRelativeTime(contact.updatedAt),
                    fontSize = 11.sp,
                    color = iosGray
                )
                Icon(
                    imageVector = Icons.Default.ChevronRight,
                    contentDescription = null,
                    tint = iosGray,
                    modifier = Modifier.size(20.dp)
                )
            }
        }
    }
}
```

### 5.4 ç©ºçŠ¶æ€ç»„ä»¶

```kotlin
/**
 * ç©ºçŠ¶æ€è§†å›¾
 *
 * æ˜¾ç¤ºå‹å¥½æç¤ºå’Œæ“ä½œæŒ‰é’®
 */
@Composable
fun EmptyStateView(
    message: String,
    actionText: String? = null,
    onAction: (() -> Unit)? = null
)
```

### 5.5 æœç´¢æ¡†ç»„ä»¶

```kotlin
/**
 * iOSé£æ ¼æœç´¢æ¡†
 *
 * åœ†è§’çŸ©å½¢ï¼Œç°è‰²èƒŒæ™¯ï¼Œæœç´¢å›¾æ ‡
 */
@Composable
fun IosSearchBar(
    query: String,
    onQueryChange: (String) -> Unit,
    placeholder: String
)
```

---

## 6. æ•°æ®å­˜å‚¨è®¾è®¡

### 6.1 AiAdvisorPreferences

**æ–‡ä»¶ä½ç½®**ï¼š`:data/local/AiAdvisorPreferences.kt`

```kotlin
/**
 * AIå†›å¸ˆåå¥½è®¾ç½®å­˜å‚¨
 *
 * ä½¿ç”¨EncryptedSharedPreferencesåŠ å¯†å­˜å‚¨ç”¨æˆ·åå¥½è®¾ç½®
 */
@Singleton
class AiAdvisorPreferences @Inject constructor(
    @ApplicationContext private val context: Context
) {
    companion object {
        private const val PREFS_NAME = "ai_advisor_preferences"
        private const val KEY_LAST_CONTACT_ID = "last_contact_id"
        private const val KEY_LAST_SESSION_ID = "last_session_id"
    }

    private val masterKey = MasterKey.Builder(context)
        .setKeyScheme(MasterKey.KeyScheme.AES256_GCM)
        .build()

    private val prefs = EncryptedSharedPreferences.create(
        context,
        PREFS_NAME,
        masterKey,
        EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,
        EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM
    )

    /** è·å–ä¸Šæ¬¡ä½¿ç”¨çš„è”ç³»äººID */
    fun getLastContactId(): String? = prefs.getString(KEY_LAST_CONTACT_ID, null)

    /** ä¿å­˜ä¸Šæ¬¡ä½¿ç”¨çš„è”ç³»äººID */
    fun setLastContactId(contactId: String) {
        prefs.edit().putString(KEY_LAST_CONTACT_ID, contactId).apply()
    }

    /** è·å–ä¸Šæ¬¡ä½¿ç”¨çš„ä¼šè¯ID */
    fun getLastSessionId(): String? = prefs.getString(KEY_LAST_SESSION_ID, null)

    /** ä¿å­˜ä¸Šæ¬¡ä½¿ç”¨çš„ä¼šè¯ID */
    fun setLastSessionId(sessionId: String?) {
        if (sessionId != null) {
            prefs.edit().putString(KEY_LAST_SESSION_ID, sessionId).apply()
        } else {
            prefs.edit().remove(KEY_LAST_SESSION_ID).apply()
        }
    }

    /** æ¸…é™¤æ‰€æœ‰åå¥½è®¾ç½® */
    fun clear() {
        prefs.edit().clear().apply()
    }
}
```

### 6.2 æ•°æ®åº“å˜æ›´

æœ¬æ¬¡ä¼˜åŒ–**ä¸éœ€è¦**ä¿®æ”¹æ•°æ®åº“ç»“æ„ï¼Œå¤ç”¨ç°æœ‰çš„ï¼š
- `AiAdvisorSessionEntity` - ä¼šè¯å®ä½“
- `AiAdvisorConversationEntity` - å¯¹è¯è®°å½•å®ä½“
- `AiAdvisorDao` - æ•°æ®è®¿é—®å¯¹è±¡

---

## 7. è·¯ç”±è®¾è®¡

### 7.1 è·¯ç”±å®šä¹‰

| è·¯ç”±å | è·¯å¾„ | å‚æ•° | è¯´æ˜ |
|--------|------|------|------|
| `AI_ADVISOR` | `ai_advisor` | æ—  | å…¥å£é¡µé¢ï¼ˆè‡ªåŠ¨è·¯ç”±ï¼‰ |
| `AI_ADVISOR_CHAT` | `ai_advisor_chat/{contactId}` | contactId | å¯¹è¯ç•Œé¢ |
| `AI_ADVISOR_SESSIONS` | `ai_advisor_sessions/{contactId}` | contactId | ä¼šè¯å†å²é¡µé¢ |
| `AI_ADVISOR_CONTACTS` | `ai_advisor_contacts` | æ—  | è”ç³»äººé€‰æ‹©é¡µé¢ |

### 7.2 NavRoutes.kt æ‰©å±•

```kotlin
object NavRoutes {
    // ... ç°æœ‰è·¯ç”± ...

    /** AIå†›å¸ˆä¼šè¯å†å²é¡µé¢ */
    const val AI_ADVISOR_SESSIONS = "ai_advisor_sessions/{contactId}"
    const val AI_ADVISOR_SESSIONS_ARG_ID = "contactId"

    /** AIå†›å¸ˆè”ç³»äººé€‰æ‹©é¡µé¢ */
    const val AI_ADVISOR_CONTACTS = "ai_advisor_contacts"

    /** åˆ›å»ºAIå†›å¸ˆä¼šè¯å†å²è·¯ç”± */
    fun aiAdvisorSessions(contactId: String): String {
        return "ai_advisor_sessions/$contactId"
    }
}
```

### 7.3 å¯¼èˆªå›¾é…ç½®

```kotlin
// AIå†›å¸ˆä¼šè¯å†å²é¡µé¢
composable(
    route = NavRoutes.AI_ADVISOR_SESSIONS,
    arguments = listOf(
        navArgument(NavRoutes.AI_ADVISOR_SESSIONS_ARG_ID) {
            type = NavType.StringType
        }
    )
) { backStackEntry ->
    val contactId = backStackEntry.arguments
        ?.getString(NavRoutes.AI_ADVISOR_SESSIONS_ARG_ID) ?: ""
    SessionHistoryScreen(
        contactId = contactId,
        onNavigateBack = { navController.navigateUp() },
        onNavigateToChat = { sessionId ->
            navController.navigate(NavRoutes.aiAdvisorChat(contactId)) {
                popUpTo(NavRoutes.AI_ADVISOR_SESSIONS) { inclusive = true }
            }
        },
        onCreateNewSession = {
            navController.navigate(NavRoutes.aiAdvisorChat(contactId)) {
                popUpTo(NavRoutes.AI_ADVISOR_SESSIONS) { inclusive = true }
            }
        }
    )
}

// AIå†›å¸ˆè”ç³»äººé€‰æ‹©é¡µé¢
composable(route = NavRoutes.AI_ADVISOR_CONTACTS) {
    ContactSelectScreen(
        onNavigateBack = { navController.navigateUp() },
        onSelectContact = { contactId ->
            navController.navigate(NavRoutes.aiAdvisorChat(contactId)) {
                popUpTo(NavRoutes.AI_ADVISOR) { inclusive = true }
            }
        }
    )
}
```

---

## 8. ViewModelè®¾è®¡

### 8.1 SessionHistoryViewModel

```kotlin
/**
 * ä¼šè¯å†å²é¡µé¢ViewModel
 */
@HiltViewModel
class SessionHistoryViewModel @Inject constructor(
    private val aiAdvisorRepository: AiAdvisorRepository,
    private val contactRepository: ContactRepository,
    savedStateHandle: SavedStateHandle
) : ViewModel() {

    private val contactId: String = savedStateHandle[NavRoutes.AI_ADVISOR_SESSIONS_ARG_ID] ?: ""

    private val _uiState = MutableStateFlow(SessionHistoryUiState())
    val uiState: StateFlow<SessionHistoryUiState> = _uiState.asStateFlow()

    init {
        loadContactInfo()
        loadSessions()
    }

    /** åŠ è½½è”ç³»äººä¿¡æ¯ */
    private fun loadContactInfo() { /* ... */ }

    /** åŠ è½½ä¼šè¯åˆ—è¡¨ */
    private fun loadSessions() { /* ... */ }

    /** åˆ é™¤ä¼šè¯ */
    fun deleteSession(sessionId: String) { /* ... */ }

    /** æ¸…é™¤é”™è¯¯ */
    fun clearError() { /* ... */ }
}

/**
 * ä¼šè¯å†å²UIçŠ¶æ€
 */
data class SessionHistoryUiState(
    val isLoading: Boolean = false,
    val contactName: String = "",
    val sessions: List<AiAdvisorSession> = emptyList(),
    val isEmpty: Boolean = false,
    val error: String? = null
)
```

### 8.2 ContactSelectViewModel

```kotlin
/**
 * è”ç³»äººé€‰æ‹©é¡µé¢ViewModel
 */
@HiltViewModel
class ContactSelectViewModel @Inject constructor(
    private val contactRepository: ContactRepository,
    private val aiAdvisorPreferences: AiAdvisorPreferences
) : ViewModel() {

    private val _uiState = MutableStateFlow(ContactSelectUiState())
    val uiState: StateFlow<ContactSelectUiState> = _uiState.asStateFlow()

    init {
        loadContacts()
    }

    /** åŠ è½½è”ç³»äººåˆ—è¡¨ */
    private fun loadContacts() { /* ... */ }

    /** é€‰æ‹©è”ç³»äººï¼ˆä¿å­˜åˆ°åå¥½è®¾ç½®ï¼‰ */
    fun selectContact(contactId: String) {
        aiAdvisorPreferences.setLastContactId(contactId)
        _uiState.update { it.copy(selectedContactId = contactId) }
    }

    /** æœç´¢è”ç³»äºº */
    fun searchContacts(query: String) { /* ... */ }

    /** æ¸…é™¤é”™è¯¯ */
    fun clearError() { /* ... */ }
}

/**
 * è”ç³»äººé€‰æ‹©UIçŠ¶æ€
 */
data class ContactSelectUiState(
    val isLoading: Boolean = false,
    val contacts: List<ContactProfile> = emptyList(),
    val isEmpty: Boolean = false,
    val searchQuery: String = "",
    val selectedContactId: String? = null,
    val error: String? = null
)
```

### 8.3 AiAdvisorChatViewModel ä¿®æ”¹

éœ€è¦åœ¨ç°æœ‰ViewModelä¸­æ·»åŠ ä»¥ä¸‹åŠŸèƒ½ï¼š

```kotlin
@HiltViewModel
class AiAdvisorChatViewModel @Inject constructor(
    // ... ç°æœ‰ä¾èµ– ...
    private val aiAdvisorPreferences: AiAdvisorPreferences, // æ–°å¢
    savedStateHandle: SavedStateHandle
) : ViewModel() {

    init {
        // ä¿å­˜å½“å‰è”ç³»äººIDåˆ°åå¥½è®¾ç½®
        aiAdvisorPreferences.setLastContactId(contactId)
        
        // åˆ›å»ºæ–°ä¼šè¯ï¼ˆå¦‚æœéœ€è¦ï¼‰
        createNewSessionIfNeeded()
    }

    /** å¯¼èˆªåˆ°ä¼šè¯å†å²é¡µé¢ */
    fun navigateToSessionHistory() {
        _uiState.update { it.copy(navigateToSessionHistory = true) }
    }

    /** å¯¼èˆªåˆ°è”ç³»äººé€‰æ‹©é¡µé¢ */
    fun navigateToContactSelect() {
        _uiState.update { it.copy(navigateToContactSelect = true) }
    }

    /** é‡ç½®å¯¼èˆªçŠ¶æ€ */
    fun resetNavigationState() {
        _uiState.update {
            it.copy(
                navigateToSessionHistory = false,
                navigateToContactSelect = false
            )
        }
    }
}
```

---

## 9. è°ƒç”¨é“¾è®¾è®¡

### 9.1 ä¼šè¯å†å²é¡µé¢è°ƒç”¨é“¾

```
SessionHistoryScreen
    â†“ (é€šè¿‡hiltViewModel()æ³¨å…¥)
SessionHistoryViewModel
    â†“ (è°ƒç”¨Repository)
AiAdvisorRepository.getSessions(contactId)
    â†“ (è°ƒç”¨DAO)
AiAdvisorDao.getSessionsByContact(contactId)
    â†“
è¿”å› List<AiAdvisorSession>
```

### 9.2 è”ç³»äººé€‰æ‹©é¡µé¢è°ƒç”¨é“¾

```
ContactSelectScreen
    â†“ (é€šè¿‡hiltViewModel()æ³¨å…¥)
ContactSelectViewModel
    â†“ (è°ƒç”¨Repository)
ContactRepository.getAllProfiles()
    â†“ (è°ƒç”¨DAO)
ContactDao.getAllProfiles()
    â†“
è¿”å› Flow<List<ContactProfile>>
```

### 9.3 è‡ªåŠ¨æ¢å¤è”ç³»äººè°ƒç”¨é“¾

```
AiAdvisorScreen (å…¥å£é¡µé¢)
    â†“ (è¯»å–åå¥½è®¾ç½®)
AiAdvisorPreferences.getLastContactId()
    â†“
â”œâ”€â”€ æœ‰å€¼ â†’ å¯¼èˆªåˆ° AiAdvisorChatScreen(contactId)
â”‚           â†“
â”‚         AiAdvisorChatViewModel.init()
â”‚           â†“
â”‚         aiAdvisorPreferences.setLastContactId(contactId)
â”‚           â†“
â”‚         createNewSessionIfNeeded()
â”‚
â””â”€â”€ æ— å€¼ â†’ å¯¼èˆªåˆ° ContactSelectScreen
            â†“
          ç”¨æˆ·é€‰æ‹©è”ç³»äºº
            â†“
          ContactSelectViewModel.selectContact(contactId)
            â†“
          aiAdvisorPreferences.setLastContactId(contactId)
            â†“
          å¯¼èˆªåˆ° AiAdvisorChatScreen(contactId)
```

---

## 10. å­—ç¬¦ä¸²èµ„æº

### 10.1 æ–°å¢å­—ç¬¦ä¸²èµ„æº

```xml
<!-- AIå†›å¸ˆUIä¼˜åŒ–ç›¸å…³ (PRD-00029) -->
<string name="ai_advisor_title">AI å†›å¸ˆ</string>
<string name="session_history_title">ä¼šè¯å†å²</string>
<string name="select_contact_title">é€‰æ‹©è”ç³»äºº</string>
<string name="new_session">æ–°å»º</string>
<string name="search_sessions">æœç´¢ä¼šè¯</string>
<string name="search_contacts">æœç´¢è”ç³»äºº</string>
<string name="empty_sessions_hint">æš‚æ— å†å²ä¼šè¯</string>
<string name="empty_sessions_action">å‘èµ·æ–°å¯¹è¯</string>
<string name="empty_contacts_hint">æš‚æ— è”ç³»äºº</string>
<string name="empty_contacts_action">æ·»åŠ è”ç³»äºº</string>
<string name="welcome_title">å…±æƒ…</string>
<string name="welcome_subtitle">æ‡‚ä½ æ‰€æƒ³ï¼ŒåŠ©ä½ è¡¨è¾¾</string>
<string name="input_hint">è¾“å…¥æ¶ˆæ¯æˆ–ç²˜è´´èŠå¤©è®°å½•...</string>
<string name="conversation_with">ä¸ %s çš„å¯¹è¯</string>
<string name="contacts_section_title">è”ç³»äºº</string>
<string name="delete_session_confirm">ç¡®å®šåˆ é™¤æ­¤ä¼šè¯ï¼Ÿ</string>
<string name="delete_session_confirm_message">åˆ é™¤åæ— æ³•æ¢å¤</string>
```

---

## 11. æ–‡ä»¶æ¸…å•

### 11.1 æ–°å¢æ–‡ä»¶

| æ¨¡å— | æ–‡ä»¶è·¯å¾„ | è¯´æ˜ |
|------|---------|------|
| :data | `local/AiAdvisorPreferences.kt` | AIå†›å¸ˆåå¥½è®¾ç½®å­˜å‚¨ |
| :presentation | `ui/screen/advisor/SessionHistoryScreen.kt` | ä¼šè¯å†å²é¡µé¢ |
| :presentation | `ui/screen/advisor/ContactSelectScreen.kt` | è”ç³»äººé€‰æ‹©é¡µé¢ |
| :presentation | `ui/screen/advisor/component/SessionListItem.kt` | ä¼šè¯åˆ—è¡¨é¡¹ç»„ä»¶ |
| :presentation | `ui/screen/advisor/component/ContactListItem.kt` | è”ç³»äººåˆ—è¡¨é¡¹ç»„ä»¶ |
| :presentation | `ui/screen/advisor/component/IosStyleTopBar.kt` | iOSé£æ ¼å¯¼èˆªæ ç»„ä»¶ |
| :presentation | `ui/screen/advisor/component/IosSearchBar.kt` | iOSé£æ ¼æœç´¢æ¡†ç»„ä»¶ |
| :presentation | `ui/screen/advisor/component/EmptyStateView.kt` | ç©ºçŠ¶æ€è§†å›¾ç»„ä»¶ |
| :presentation | `viewmodel/SessionHistoryViewModel.kt` | ä¼šè¯å†å²ViewModel |
| :presentation | `viewmodel/ContactSelectViewModel.kt` | è”ç³»äººé€‰æ‹©ViewModel |

### 11.2 ä¿®æ”¹æ–‡ä»¶

| æ¨¡å— | æ–‡ä»¶è·¯å¾„ | ä¿®æ”¹å†…å®¹ |
|------|---------|----------|
| :presentation | `ui/screen/advisor/AiAdvisorScreen.kt` | æ·»åŠ è‡ªåŠ¨æ¢å¤è”ç³»äººé€»è¾‘ |
| :presentation | `ui/screen/advisor/AiAdvisorChatScreen.kt` | å¯¼èˆªæ æ”¹ä¸ºâ˜°å’ŒğŸ‘¤å›¾æ ‡ |
| :presentation | `viewmodel/AiAdvisorChatViewModel.kt` | æ·»åŠ åå¥½è®¾ç½®ä¿å­˜å’Œå¯¼èˆªçŠ¶æ€ |
| :presentation | `navigation/NavGraph.kt` | æ–°å¢ä¸‰ä¸ªè·¯ç”±é…ç½® |
| :presentation | `navigation/NavRoutes.kt` | æ–°å¢è·¯ç”±å¸¸é‡ |
| :app | `res/values/strings.xml` | æ–°å¢å­—ç¬¦ä¸²èµ„æº |

---

## 12. é”™è¯¯å¤„ç†è®¾è®¡

### 12.1 é”™è¯¯åœºæ™¯ä¸å¤„ç†

| é”™è¯¯åœºæ™¯ | å¤„ç†æ–¹å¼ | ç”¨æˆ·æç¤º |
|---------|---------|---------|
| è”ç³»äººä¸å­˜åœ¨ | æ¸…é™¤åå¥½è®¾ç½®ï¼Œè¿›å…¥è”ç³»äººé€‰æ‹©é¡µé¢ | "è”ç³»äººä¸å­˜åœ¨ï¼Œè¯·é‡æ–°é€‰æ‹©" |
| ä¼šè¯åŠ è½½å¤±è´¥ | æ˜¾ç¤ºé”™è¯¯ï¼Œå…è®¸é‡è¯• | "åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•" |
| è”ç³»äººåˆ—è¡¨ä¸ºç©º | æ˜¾ç¤ºç©ºçŠ¶æ€ï¼Œå¼•å¯¼æ·»åŠ è”ç³»äºº | "æš‚æ— è”ç³»äººï¼Œè¯·å…ˆæ·»åŠ " |
| ä¼šè¯åˆ—è¡¨ä¸ºç©º | æ˜¾ç¤ºç©ºçŠ¶æ€ï¼Œå¼•å¯¼åˆ›å»ºæ–°ä¼šè¯ | "æš‚æ— å†å²ä¼šè¯" |
| åå¥½è®¾ç½®è¯»å–å¤±è´¥ | ä½¿ç”¨é»˜è®¤å€¼ï¼ˆæ— è”ç³»äººï¼‰ | æ— æç¤ºï¼Œé™é»˜å¤„ç† |

### 12.2 è¾¹ç•Œæƒ…å†µå¤„ç†

| è¾¹ç•Œæƒ…å†µ | å¤„ç†æ–¹å¼ |
|---------|---------|
| è”ç³»äººè¢«åˆ é™¤åè¿›å…¥AIå†›å¸ˆ | æ£€æµ‹åˆ°è”ç³»äººä¸å­˜åœ¨ï¼Œæ¸…é™¤åå¥½è®¾ç½®ï¼Œè¿›å…¥è”ç³»äººé€‰æ‹©é¡µé¢ |
| ä¼šè¯è¢«åˆ é™¤åè¿”å›å¯¹è¯ç•Œé¢ | è‡ªåŠ¨åˆ›å»ºæ–°ä¼šè¯ |
| ç½‘ç»œé”™è¯¯å¯¼è‡´AIå›å¤å¤±è´¥ | æ˜¾ç¤ºé”™è¯¯æç¤ºï¼Œå…è®¸é‡è¯• |
| å¿«é€Ÿè¿ç»­ç‚¹å‡»è”ç³»äºº | é˜²æŠ–å¤„ç†ï¼Œåªå“åº”ç¬¬ä¸€æ¬¡ç‚¹å‡» |

### 12.3 é”™è¯¯å¤„ç†ä»£ç ç¤ºä¾‹

```kotlin
/**
 * SessionHistoryViewModelä¸­çš„é”™è¯¯å¤„ç†ç¤ºä¾‹
 */
private fun loadSessions() {
    viewModelScope.launch {
        _uiState.update { it.copy(isLoading = true, error = null) }
        aiAdvisorRepository.getSessions(contactId)
            .onSuccess { sessions ->
                _uiState.update {
                    it.copy(
                        isLoading = false,
                        sessions = sessions,
                        isEmpty = sessions.isEmpty()
                    )
                }
            }
            .onFailure { error ->
                when (error) {
                    is NetworkException -> {
                        _uiState.update {
                            it.copy(
                                isLoading = false,
                                error = "ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®"
                            )
                        }
                    }
                    is DatabaseException -> {
                        _uiState.update {
                            it.copy(
                                isLoading = false,
                                error = "æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•"
                            )
                        }
                    }
                    else -> {
                        _uiState.update {
                            it.copy(
                                isLoading = false,
                                error = "æœªçŸ¥é”™è¯¯ï¼š${error.message}"
                            )
                        }
                    }
                }
            }
    }
}

/**
 * ContactSelectViewModelä¸­çš„è”ç³»äººä¸å­˜åœ¨å¤„ç†
 */
private fun handleContactNotFound() {
    viewModelScope.launch {
        // æ¸…é™¤åå¥½è®¾ç½®ä¸­çš„æ— æ•ˆè”ç³»äººID
        aiAdvisorPreferences.setLastContactId("")
        aiAdvisorPreferences.setLastSessionId(null)
        
        // æ›´æ–°UIçŠ¶æ€ï¼Œæ˜¾ç¤ºé”™è¯¯æç¤º
        _uiState.update {
            it.copy(
                error = "è”ç³»äººä¸å­˜åœ¨ï¼Œè¯·é‡æ–°é€‰æ‹©",
                shouldNavigateToContactSelect = true
            )
        }
    }
}
```

---

## 13. æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹æ³• | éªŒæ”¶æ ‡å‡† |
|------|-------|---------|----------|
| é¡µé¢åˆ‡æ¢æ—¶é—´ | < 200ms | ä»ç‚¹å‡»å¯¼èˆªæŒ‰é’®åˆ°ç›®æ ‡é¡µé¢å®Œå…¨æ¸²æŸ“çš„æ—¶é—´ï¼ˆä½¿ç”¨Compose Tracingï¼‰ | 95%çš„åˆ‡æ¢æ“ä½œ<200ms |
| ä¼šè¯åˆ—è¡¨åŠ è½½æ—¶é—´ | < 500ms | ä»å¼€å§‹åŠ è½½åˆ°ä¼šè¯åˆ—è¡¨æ˜¾ç¤ºçš„æ—¶é—´ï¼ˆ100æ¡ä¼šè¯ï¼‰ | 100æ¡ä¼šè¯åŠ è½½<500ms |
| è”ç³»äººåˆ—è¡¨åŠ è½½æ—¶é—´ | < 500ms | ä»å¼€å§‹åŠ è½½åˆ°è”ç³»äººåˆ—è¡¨æ˜¾ç¤ºçš„æ—¶é—´ï¼ˆ100ä¸ªè”ç³»äººï¼‰ | 100ä¸ªè”ç³»äººåŠ è½½<500ms |
| åå¥½è®¾ç½®è¯»å–æ—¶é—´ | < 50ms | ä»å¯åŠ¨åˆ°è¯»å–å®Œæˆçš„æ—¶é—´ï¼ˆä½¿ç”¨System.nanoTimeï¼‰ | 99%çš„è¯»å–æ“ä½œ<50ms |
| å†…å­˜å ç”¨å¢é‡ | < 10MB | ä¸‰é¡µé¢æ¶æ„çš„é¢å¤–å†…å­˜å ç”¨ï¼ˆä½¿ç”¨Android Profilerï¼‰ | å¯¼èˆªåˆ°ä¸‰ä¸ªé¡µé¢åå†…å­˜å¢é‡<10MB |

---

## 14. æµ‹è¯•è®¾è®¡

### 14.1 å•å…ƒæµ‹è¯•

#### AiAdvisorPreferencesTest

```kotlin
@Test
fun `getLastContactId returns null when not set`() {
    // Given
    val prefs = AiAdvisorPreferences(context)

    // When
    val result = prefs.getLastContactId()

    // Then
    assertNull(result)
}

@Test
fun `setLastContactId and getLastContactId work correctly`() {
    // Given
    val prefs = AiAdvisorPreferences(context)
    val contactId = "contact_123"

    // When
    prefs.setLastContactId(contactId)
    val result = prefs.getLastContactId()

    // Then
    assertEquals(contactId, result)
}

@Test
fun `clear removes all preferences`() {
    // Given
    val prefs = AiAdvisorPreferences(context)
    prefs.setLastContactId("contact_123")
    prefs.setLastSessionId("session_456")

    // When
    prefs.clear()

    // Then
    assertNull(prefs.getLastContactId())
    assertNull(prefs.getLastSessionId())
}
```

#### SessionHistoryViewModelTest

```kotlin
@Test
fun `loadSessions updates uiState with sessions`() = runTest {
    // Given
    val sessions = listOf(
        AiAdvisorSession(id = "1", title = "ä¼šè¯1", contactId = "contact1"),
        AiAdvisorSession(id = "2", title = "ä¼šè¯2", contactId = "contact1")
    )
    coEvery { aiAdvisorRepository.getSessions("contact1") } returns Result.success(sessions)

    // When
    viewModel.loadSessions()

    // Then
    assertEquals(sessions, viewModel.uiState.value.sessions)
    assertFalse(viewModel.uiState.value.isLoading)
    assertFalse(viewModel.uiState.value.isEmpty)
}

@Test
fun `loadSessions sets isEmpty when no sessions`() = runTest {
    // Given
    coEvery { aiAdvisorRepository.getSessions("contact1") } returns Result.success(emptyList())

    // When
    viewModel.loadSessions()

    // Then
    assertTrue(viewModel.uiState.value.isEmpty)
    assertTrue(viewModel.uiState.value.sessions.isEmpty())
}

@Test
fun `loadSessions sets error on failure`() = runTest {
    // Given
    coEvery { aiAdvisorRepository.getSessions("contact1") } returns 
        Result.failure(Exception("Network error"))

    // When
    viewModel.loadSessions()

    // Then
    assertNotNull(viewModel.uiState.value.error)
    assertFalse(viewModel.uiState.value.isLoading)
}
```

#### ContactSelectViewModelTest

```kotlin
@Test
fun `selectContact saves contactId to preferences`() = runTest {
    // Given
    val contactId = "contact_123"

    // When
    viewModel.selectContact(contactId)

    // Then
    verify { aiAdvisorPreferences.setLastContactId(contactId) }
    assertEquals(contactId, viewModel.uiState.value.selectedContactId)
}

@Test
fun `loadContacts updates uiState with contacts`() = runTest {
    // Given
    val contacts = listOf(
        ContactProfile(id = "1", name = "å¼ ä¸‰"),
        ContactProfile(id = "2", name = "æå››")
    )
    every { contactRepository.getAllProfiles() } returns flowOf(contacts)

    // When
    viewModel.loadContacts()

    // Then
    assertEquals(contacts, viewModel.uiState.value.contacts)
    assertFalse(viewModel.uiState.value.isEmpty)
}
```

### 14.2 é›†æˆæµ‹è¯•

| æµ‹è¯•åœºæ™¯ | éªŒè¯ç‚¹ |
|---------|-------|
| é¦–æ¬¡ä½¿ç”¨æµç¨‹ | æ— å†å²è”ç³»äºº â†’ è¿›å…¥è”ç³»äººé€‰æ‹©é¡µé¢ â†’ é€‰æ‹©è”ç³»äºº â†’ è¿›å…¥å¯¹è¯ç•Œé¢ |
| è‡ªåŠ¨æ¢å¤æµç¨‹ | æœ‰å†å²è”ç³»äºº â†’ è‡ªåŠ¨æ¢å¤ â†’ åˆ›å»ºæ–°ä¼šè¯ â†’ è¿›å…¥å¯¹è¯ç•Œé¢ |
| åˆ‡æ¢è”ç³»äººæµç¨‹ | ç‚¹å‡»ğŸ‘¤ â†’ è¿›å…¥è”ç³»äººé€‰æ‹© â†’ é€‰æ‹©æ–°è”ç³»äºº â†’ åˆ›å»ºæ–°ä¼šè¯ â†’ è¿”å›å¯¹è¯ç•Œé¢ |
| æŸ¥çœ‹å†å²ä¼šè¯æµç¨‹ | ç‚¹å‡»â˜° â†’ è¿›å…¥ä¼šè¯å†å² â†’ é€‰æ‹©ä¼šè¯ â†’ åŠ è½½ä¼šè¯ â†’ è¿”å›å¯¹è¯ç•Œé¢ |

### 14.3 UIæµ‹è¯•

| æµ‹è¯•åœºæ™¯ | éªŒè¯ç‚¹ |
|---------|-------|
| å¯¼èˆªæ äº¤äº’ | â˜°å›¾æ ‡ç‚¹å‡» â†’ è¿›å…¥ä¼šè¯å†å²ï¼›ğŸ‘¤å›¾æ ‡ç‚¹å‡» â†’ è¿›å…¥è”ç³»äººé€‰æ‹© |
| åˆ—è¡¨é¡¹äº¤äº’ | ç‚¹å‡»ä¼šè¯é¡¹ â†’ åŠ è½½ä¼šè¯ï¼›ç‚¹å‡»è”ç³»äººé¡¹ â†’ åˆ‡æ¢è”ç³»äºº |
| ç©ºçŠ¶æ€æ˜¾ç¤º | æ— ä¼šè¯æ—¶æ˜¾ç¤ºç©ºçŠ¶æ€ï¼›æ— è”ç³»äººæ—¶æ˜¾ç¤ºç©ºçŠ¶æ€ |
| è¿”å›å¯¼èˆª | è¿”å›æŒ‰é’®æ­£ç¡®è¿”å›ä¸Šä¸€é¡µé¢ |

---

## 15. å…³è”æ–‡æ¡£

- [PRD-00029-AIå†›å¸ˆUIä¼˜åŒ–éœ€æ±‚](../PRD/PRD-00029-AIå†›å¸ˆUIä¼˜åŒ–éœ€æ±‚.md)
- [TDD-00029-AIå†›å¸ˆUIæ¶æ„ä¼˜åŒ–æŠ€æœ¯è®¾è®¡](../TDD/TDD-00029-AIå†›å¸ˆUIæ¶æ„ä¼˜åŒ–æŠ€æœ¯è®¾è®¡.md)
- [PRD-00026-AIå†›å¸ˆå¯¹è¯åŠŸèƒ½éœ€æ±‚](../PRD/PRD-00026-AIå†›å¸ˆå¯¹è¯åŠŸèƒ½éœ€æ±‚.md)
- [FD-00026-AIå†›å¸ˆå¯¹è¯åŠŸèƒ½è®¾è®¡](./FD-00026-AIå†›å¸ˆå¯¹è¯åŠŸèƒ½è®¾è®¡.md)
- [TDD-00026-AIå†›å¸ˆå¯¹è¯åŠŸèƒ½æŠ€æœ¯è®¾è®¡](../TDD/TDD-00026-AIå†›å¸ˆå¯¹è¯åŠŸèƒ½æŠ€æœ¯è®¾è®¡.md)

---

## 16. UIåŸå‹æ–‡ä»¶

> âš ï¸ **å¼ºåˆ¶è¦æ±‚**ï¼šå¼€å‘æ—¶å¿…é¡»ä¸¥æ ¼æŒ‰ç…§UIåŸå‹æ–‡ä»¶å®ç°

| é¡µé¢ | UIåŸå‹æ–‡ä»¶ |
|------|-----------|
| **å¯¹è¯ç•Œé¢** | `æ–‡æ¡£/å¼€å‘æ–‡æ¡£/UI-åŸå‹/PRD29/geminiå¯¹è¯ç•Œé¢.html` |
| **ä¼šè¯å†å²é¡µé¢** | `æ–‡æ¡£/å¼€å‘æ–‡æ¡£/UI-åŸå‹/PRD29/ai-advisor-home-ios.html` |
| **è”ç³»äººé€‰æ‹©é¡µé¢** | `æ–‡æ¡£/å¼€å‘æ–‡æ¡£/UI-åŸå‹/PRD29/ai-advisor-home-ios.html` |

**ä½¿ç”¨æ–¹æ³•**ï¼šç›´æ¥åœ¨æµè§ˆå™¨æ‰“å¼€HTMLæ–‡ä»¶æŸ¥çœ‹å®Œæ•´æ•ˆæœï¼Œæ‰€æœ‰é¢œè‰²å€¼ã€å­—ä½“å¤§å°ã€é—´è·ã€ç»„ä»¶ä½ç½®å¿…é¡»ä¸åŸå‹ä¸€è‡´ã€‚

---

## 17. é£é™©è¯„ä¼°

| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| UIåŸå‹ä¸å®ç°ä¸ä¸€è‡´ | é«˜ | ä¸­ | ä¸¥æ ¼æŒ‰ç…§HTMLåŸå‹æ–‡ä»¶å®ç°ï¼Œå¼€å‘å‰ä»”ç»†å¯¹ç…§ï¼Œå¼€å‘åè¿›è¡ŒUI Review |
| å¯¼èˆªçŠ¶æ€ç®¡ç†å¤æ‚ | ä¸­ | ä¸­ | ä½¿ç”¨Navigation Composeçš„SavedStateHandleç®¡ç†çŠ¶æ€ï¼Œç¼–å†™å®Œæ•´çš„å¯¼èˆªæµ‹è¯• |
| åå¥½è®¾ç½®åŠ å¯†å¤±è´¥ | é«˜ | ä½ | æ·»åŠ fallbackæœºåˆ¶ï¼Œä½¿ç”¨æ™®é€šSharedPreferencesä½œä¸ºå¤‡é€‰æ–¹æ¡ˆ |
| ä¼šè¯åˆ—è¡¨åŠ è½½æ€§èƒ½ | ä¸­ | ä½ | ä½¿ç”¨Paging 3åˆ†é¡µåŠ è½½ï¼Œé™åˆ¶åˆå§‹åŠ è½½æ•°é‡ä¸º20æ¡ |
| è”ç³»äººè¢«åˆ é™¤åçŠ¶æ€ä¸ä¸€è‡´ | ä¸­ | ä¸­ | åœ¨è¿›å…¥å¯¹è¯ç•Œé¢å‰éªŒè¯è”ç³»äººæ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™æ¸…é™¤åå¥½è®¾ç½® |
| å¿«é€Ÿè¿ç»­ç‚¹å‡»å¯¼è‡´é‡å¤å¯¼èˆª | ä½ | ä¸­ | æ·»åŠ é˜²æŠ–å¤„ç†ï¼Œä½¿ç”¨debounceæˆ–throttleé™åˆ¶ç‚¹å‡»é¢‘ç‡ |

---

## 18. éªŒæ”¶æ ‡å‡†

| åºå· | éªŒæ”¶é¡¹ | æ ‡å‡† |
|------|--------|------|
| 1 | **ğŸ”´ UIåŸå‹ä¸€è‡´æ€§** | æ‰€æœ‰é¡µé¢å¿…é¡»ä¸UIåŸå‹æ–‡ä»¶å®Œå…¨ä¸€è‡´ |
| 2 | ä¸‰é¡µé¢ç‹¬ç«‹ | å¯¹è¯ç•Œé¢ã€ä¼šè¯å†å²ã€è”ç³»äººé€‰æ‹©æ˜¯ä¸‰ä¸ªç‹¬ç«‹å…¨å±é¡µé¢ |
| 3 | è‡ªåŠ¨æ¢å¤ | è¿›å…¥AIå†›å¸ˆè‡ªåŠ¨æ¢å¤ä¸Šæ¬¡è”ç³»äºº+å¼€å¯æ–°ä¼šè¯ |
| 4 | é¦–æ¬¡ä½¿ç”¨ | æ— å†å²è”ç³»äººæ—¶è¿›å…¥è”ç³»äººé€‰æ‹©é¡µé¢ |
| 5 | ä¼šè¯å†å²å…¥å£ | å·¦ä¸Šè§’â˜°å›¾æ ‡è¿›å…¥ä¼šè¯å†å²é¡µé¢ |
| 6 | è”ç³»äººé€‰æ‹©å…¥å£ | å³ä¸Šè§’ğŸ‘¤å›¾æ ‡è¿›å…¥è”ç³»äººé€‰æ‹©é¡µé¢ |
| 7 | åˆ‡æ¢è”ç³»äºº | é€‰æ‹©è”ç³»äººåè‡ªåŠ¨å¼€å¯æ–°ä¼šè¯ |
| 8 | iOSé£æ ¼ | æ‰€æœ‰é¡µé¢éµå¾ªiOSè®¾è®¡è§„èŒƒï¼ˆé¢œè‰²ã€å­—ä½“ã€é—´è·ï¼‰ |
| 9 | æ€§èƒ½è¾¾æ ‡ | é¡µé¢åˆ‡æ¢<200msï¼Œåˆ—è¡¨åŠ è½½<500ms |
| 10 | é”™è¯¯å¤„ç† | æ‰€æœ‰é”™è¯¯åœºæ™¯æœ‰å‹å¥½æç¤ºï¼Œæ”¯æŒé‡è¯• |
| 11 | ç©ºçŠ¶æ€ | æ— ä¼šè¯/æ— è”ç³»äººæ—¶æ˜¾ç¤ºå‹å¥½çš„ç©ºçŠ¶æ€æç¤º |
| 12 | å•å…ƒæµ‹è¯• | æ ¸å¿ƒViewModelæµ‹è¯•è¦†ç›–ç‡>80% |

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.1
**æœ€åæ›´æ–°**: 2026-01-06
**æ›´æ–°å†…å®¹**: æ ¹æ®å®¡æŸ¥æŠ¥å‘Šè¡¥å……ï¼šé£é™©è¯„ä¼°ã€æµ‹è¯•ç”¨ä¾‹ã€æ€§èƒ½æŒ‡æ ‡ç»†åŒ–ã€é”™è¯¯å¤„ç†ä»£ç ç¤ºä¾‹ã€UIç»„ä»¶å®ç°ã€éªŒæ”¶æ ‡å‡†
