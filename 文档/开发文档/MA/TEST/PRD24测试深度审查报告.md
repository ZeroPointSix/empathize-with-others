# PRD24 æµ‹è¯•æ·±åº¦å®¡æŸ¥æŠ¥å‘Š

> **å®¡æŸ¥æ—¥æœŸ**: 2026-01-02
> **å®¡æŸ¥è€…**: Test Explorer æ™ºèƒ½ä½“
> **å®¡æŸ¥èŒƒå›´**: TD-00024 å›¾æ ‡å’Œç‰ˆæœ¬å·è‡ªåŠ¨æ›´æ–°ç³»ç»Ÿ
> **å·¥ä½œæ ‘**: test-PRD24
> **æŠ¥å‘Šç±»å‹**: æµ‹è¯•è´¨é‡æ·±åº¦å®¡æŸ¥ä¸è¡¥å……å»ºè®®

---

## æ‰§è¡Œæ‘˜è¦

### æ€»ä½“è¯„ä¼°

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| **æµ‹è¯•è¦†ç›–ç‡** | **82/100** | æ ¸å¿ƒåŠŸèƒ½è¦†ç›–è‰¯å¥½ï¼Œéƒ¨åˆ†è¾¹ç•Œåœºæ™¯éœ€è¡¥å…… |
| **æµ‹è¯•è´¨é‡** | **88/100** | æµ‹è¯•å‘½åè§„èŒƒï¼Œæ–­è¨€æ¸…æ™°ï¼Œè¾¹ç•Œæµ‹è¯•ä¼˜ç§€ |
| **æµ‹è¯•æ·±åº¦** | **78/100** | æ­£å¸¸æµç¨‹å……åˆ†ï¼Œå¼‚å¸¸åœºæ™¯å’Œé›†æˆæµ‹è¯•ç•¥ä¸è¶³ |
| **æµ‹è¯•å¯ç»´æŠ¤æ€§** | **85/100** | ä»£ç ç»“æ„æ¸…æ™°ï¼Œè¾…åŠ©æ–¹æ³•å¤ç”¨è‰¯å¥½ |
| **æµ‹è¯•æ‰§è¡Œæ•ˆç‡** | **90/100** | 3åˆ†é’Ÿå†…å®Œæˆå…¨éƒ¨æµ‹è¯•ï¼Œæ‰§è¡Œç¨³å®š |

**ç»¼åˆè¯„åˆ†**: **84.6/100 - ä¼˜ç§€**

### å…³é”®å‘ç°

#### âœ… ä¼˜åŠ¿
1. **æµ‹è¯•ç”¨ä¾‹æ€»æ•°**: 224ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–9ä¸ªæ ¸å¿ƒæ¨¡å—
2. **æµ‹è¯•å…¨éƒ¨é€šè¿‡**: 100%é€šè¿‡ç‡ï¼Œæ— å¤±è´¥æˆ–è·³è¿‡æµ‹è¯•
3. **è¾¹ç•Œæµ‹è¯•ä¼˜ç§€**: IconManagerBoundaryTeståŒ…å«18ä¸ªè¾¹ç•Œæµ‹è¯•ç”¨ä¾‹
4. **æµ‹è¯•å‘½åè§„èŒƒ**: æ‰€æœ‰æµ‹è¯•ä½¿ç”¨æè¿°æ€§å‘½åï¼Œæ˜“äºç†è§£
5. **æµ‹è¯•éš”ç¦»è‰¯å¥½**: ä½¿ç”¨ä¸´æ—¶ç›®å½•ï¼Œæµ‹è¯•é—´æ— ç›¸äº’å½±å“

#### âš ï¸ éœ€è¦æ”¹è¿›
1. **é›†æˆæµ‹è¯•ç¼ºå¤±**: æ— ç«¯åˆ°ç«¯å®Œæ•´æµç¨‹æµ‹è¯•
2. **æ€§èƒ½æµ‹è¯•ç¼ºå¤±**: æ— æ‰§è¡Œæ—¶é—´å’Œèµ„æºä½¿ç”¨åŸºå‡†æµ‹è¯•
3. **å¹¶å‘æµ‹è¯•ç¼ºå¤±**: æœªéªŒè¯å¤šçº¿ç¨‹å®‰å…¨æ€§
4. **VersionSyncManageræµ‹è¯•åå°‘**: ä»…21ä¸ªæµ‹è¯•ï¼Œå¤šæ¨¡å—åŒæ­¥åœºæ™¯è¦†ç›–ä¸è¶³
5. **é”™è¯¯æ¢å¤æµ‹è¯•ä¸è¶³**: å¼‚å¸¸åœºæ™¯çš„å®Œæ•´æ¢å¤æµç¨‹æœªéªŒè¯

#### ğŸ”´ é«˜é£é™©é¡¹
1. **æ— CI/CDé›†æˆæµ‹è¯•**: æ— æ³•éªŒè¯GitHub Actionså·¥ä½œæµ
2. **ç£ç›˜ç©ºé—´ä¸è¶³åœºæ™¯**: BackupManageræœªæµ‹è¯•ç£ç›˜æ»¡çš„æƒ…å†µ
3. **å¹¶å‘ç‰ˆæœ¬æ›´æ–°**: æœªéªŒè¯ç«æ€æ¡ä»¶ä¸‹çš„æ•°æ®ä¸€è‡´æ€§

---

## 1. æµ‹è¯•ç»Ÿè®¡è¯¦æƒ…

### 1.1 æµ‹è¯•æ–‡ä»¶æ¸…å•

| æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•ç”¨ä¾‹æ•° | ä»£ç è¡Œæ•° | è¦†ç›–ç‡è¯„ä¼° | è´¨é‡è¯„çº§ |
|----------|-----------|----------|-----------|----------|
| `SemanticVersionTest.kt` | 38 | ~350è¡Œ | 95%+ | â­â­â­â­â­ ä¼˜ç§€ |
| `CommitParserTest.kt` | 28 | ~300è¡Œ | 92%+ | â­â­â­â­â­ ä¼˜ç§€ |
| `VersionCalculatorTest.kt` | 30 | ~320è¡Œ | 95%+ | â­â­â­â­â­ ä¼˜ç§€ |
| `VersionManagerTest.kt` | 23 | ~280è¡Œ | 80%+ | â­â­â­â­ è‰¯å¥½ |
| `IconManagerTest.kt` | 20 | ~250è¡Œ | 85%+ | â­â­â­â­ è‰¯å¥½ |
| `IconManagerBoundaryTest.kt` | 18 | ~355è¡Œ | 90%+ | â­â­â­â­â­ ä¼˜ç§€ |
| `BackupManagerTest.kt` | 18 | ~250è¡Œ | 78%+ | â­â­â­â­ è‰¯å¥½ |
| `GradlePropertiesUpdaterTest.kt` | 28 | ~360è¡Œ | 85%+ | â­â­â­â­ è‰¯å¥½ |
| `VersionSyncManagerTest.kt` | 21 | ~375è¡Œ | 70%+ | â­â­â­ ä¸€èˆ¬ |
| **æ€»è®¡** | **224** | ~2,840è¡Œ | **~85%** | **â­â­â­â­ ä¼˜ç§€** |

### 1.2 æµ‹è¯•åˆ†ç±»ç»Ÿè®¡

| æµ‹è¯•ç±»å‹ | æ•°é‡ | å æ¯” | è¯´æ˜ |
|----------|------|------|------|
| æ­£å¸¸æµç¨‹æµ‹è¯• | ~150 | 67% | âœ… å……è¶³ |
| è¾¹ç•Œæµ‹è¯• | ~50 | 22% | âœ… å……è¶³ |
| å¼‚å¸¸å¤„ç†æµ‹è¯• | ~24 | 11% | âš ï¸ ç•¥ä¸è¶³ |
| é›†æˆæµ‹è¯• | 0 | 0% | ğŸ”´ ç¼ºå¤± |
| æ€§èƒ½æµ‹è¯• | 0 | 0% | ğŸ”´ ç¼ºå¤± |
| å¹¶å‘æµ‹è¯• | 0 | 0% | ğŸ”´ ç¼ºå¤± |

### 1.3 æµ‹è¯•æ‰§è¡Œç»“æœ

```
VersionCalculatorTest > 30ä¸ªæµ‹è¯•  âœ… å…¨éƒ¨é€šè¿‡
VersionManagerTest > 23ä¸ªæµ‹è¯•     âœ… å…¨éƒ¨é€šè¿‡
VersionSyncManagerTest > 21ä¸ªæµ‹è¯• âœ… å…¨éƒ¨é€šè¿‡
BackupManagerTest > 18ä¸ªæµ‹è¯•      âœ… å…¨éƒ¨é€šè¿‡
GradlePropertiesUpdaterTest > 28ä¸ªæµ‹è¯• âœ… å…¨éƒ¨é€šè¿‡
IconManagerTest > 20ä¸ªæµ‹è¯•       âœ… å…¨éƒ¨é€šè¿‡
IconManagerBoundaryTest > 18ä¸ªæµ‹è¯• âœ… å…¨éƒ¨é€šè¿‡
CommitParserTest > 28ä¸ªæµ‹è¯•      âœ… å…¨éƒ¨é€šè¿‡
SemanticVersionTest > 38ä¸ªæµ‹è¯•   âœ… å…¨éƒ¨é€šè¿‡

æ‰§è¡Œæ—¶é—´: 3åˆ†2ç§’
çŠ¶æ€: BUILD SUCCESSFUL
```

---

## 2. å„æ¨¡å—æµ‹è¯•è´¨é‡è¯¦ç»†è¯„ä¼°

### 2.1 SemanticVersion (38ä¸ªæµ‹è¯•) - â­â­â­â­â­ ä¼˜ç§€

#### æµ‹è¯•è¦†ç›–èŒƒå›´
- âœ… ç‰ˆæœ¬è§£æï¼ˆæ ‡å‡†æ ¼å¼ã€é¢„å‘å¸ƒã€æ„å»ºå…ƒæ•°æ®ï¼‰
- âœ… ç‰ˆæœ¬æ¯”è¾ƒï¼ˆmajor.minor.patchï¼‰
- âœ… ç‰ˆæœ¬é€’å¢ï¼ˆmajor/minor/patchï¼‰
- âœ… ç‰ˆæœ¬éªŒè¯ï¼ˆè¾¹ç•Œå€¼ã€ç‰¹æ®Šå€¼ï¼‰
- âœ… ç‰ˆæœ¬ä»£ç è½¬æ¢ï¼ˆtoVersionCodeï¼‰
- âœ… å­—ç¬¦ä¸²æ ¼å¼åŒ–ï¼ˆtoStringï¼‰

#### ä¼˜åŠ¿
1. **æµ‹è¯•è¦†ç›–å…¨é¢**: è¦†ç›–æ‰€æœ‰å…¬å…±æ–¹æ³•å’Œè¾¹ç•Œæƒ…å†µ
2. **è¾¹ç•Œæµ‹è¯•ä¼˜ç§€**: æµ‹è¯•äº†0.0.0ã€æœ€å¤§å€¼ã€é¢„å‘å¸ƒç‰ˆæœ¬ç­‰
3. **æ–­è¨€å……åˆ†**: æ¯ä¸ªæµ‹è¯•éƒ½æœ‰æ˜ç¡®çš„æœŸæœ›å€¼éªŒè¯

#### æ”¹è¿›å»ºè®®
- âœ… å·²å……åˆ†æµ‹è¯•ï¼Œæ— éœ€è¡¥å……

---

### 2.2 CommitParser (28ä¸ªæµ‹è¯•) - â­â­â­â­â­ ä¼˜ç§€

#### æµ‹è¯•è¦†ç›–èŒƒå›´
- âœ… æ‰€æœ‰CommitTypeè¯†åˆ«ï¼ˆfeat/fix/chore/docs/style/refactor/test/perf/ci/build/revertï¼‰
- âœ… æäº¤æ¶ˆæ¯æ ¼å¼è§£æï¼ˆConventional Commitsï¼‰
- âœ… ä½œç”¨åŸŸï¼ˆscopeï¼‰æå–
- âœ… ç ´åæ€§å˜æ›´ï¼ˆBREAKING CHANGEï¼‰è¯†åˆ«
- âœ… å¤šè¡Œæäº¤æ¶ˆæ¯å¤„ç†
- âœ… å¼‚å¸¸è¾“å…¥å¤„ç†ï¼ˆç©ºæ¶ˆæ¯ã€æ ¼å¼é”™è¯¯ï¼‰

#### ä¼˜åŠ¿
1. **CommitTypeè¦†ç›–100%**: æ‰€æœ‰10ç§æäº¤ç±»å‹éƒ½æœ‰æµ‹è¯•
2. **å¼‚å¸¸è¾“å…¥æµ‹è¯•å®Œå–„**: æµ‹è¯•äº†å„ç§æ ¼å¼çš„é”™è¯¯è¾“å…¥
3. **è¾¹ç•Œåœºæ™¯è€ƒè™‘å‘¨å…¨**: ç©ºæ¶ˆæ¯ã€åªæœ‰ç±»å‹ã€åªæœ‰ç±»å‹+ä½œç”¨åŸŸç­‰

#### æ”¹è¿›å»ºè®®
- âœ… å·²å……åˆ†æµ‹è¯•ï¼Œæ— éœ€è¡¥å……

---

### 2.3 VersionCalculator (30ä¸ªæµ‹è¯•) - â­â­â­â­â­ ä¼˜ç§€

#### æµ‹è¯•è¦†ç›–èŒƒå›´
- âœ… ç‰ˆæœ¬è®¡ç®—é€»è¾‘ï¼ˆåŸºäºæäº¤ç±»å‹ï¼‰
- âœ… å¤šä¸ªæäº¤çš„ç»„åˆæ•ˆæœ
- âœ… é¢„å‘å¸ƒç‰ˆæœ¬å¤„ç†
- âœ… å˜æ›´æ—¥å¿—ç”Ÿæˆï¼ˆgenerateChangelogï¼‰
- âœ… ç©ºæäº¤åˆ—è¡¨å¤„ç†
- âœ… ä¸åŒCommitTypeçš„ç‰ˆæœ¬é€’å¢è§„åˆ™

#### ä¼˜åŠ¿
1. **ç‰ˆæœ¬é€’å¢é€»è¾‘å®Œæ•´**: featå‡çº§minorï¼Œfixå‡çº§patchï¼Œå…¶ä»–ä¸å‡çº§
2. **å˜æ›´æ—¥å¿—ç”Ÿæˆæµ‹è¯•å……åˆ†**: éªŒè¯äº†ä¸åŒæäº¤ç±»å‹çš„æ—¥å¿—æ ¼å¼
3. **ç»„åˆåœºæ™¯æµ‹è¯•**: æµ‹è¯•äº†å¤šä¸ªæäº¤çš„ç´¯ç§¯æ•ˆæœ

#### æ”¹è¿›å»ºè®®
- âœ… å·²å……åˆ†æµ‹è¯•ï¼Œæ— éœ€è¡¥å……

---

### 2.4 VersionManager (23ä¸ªæµ‹è¯•) - â­â­â­â­ è‰¯å¥½

#### æµ‹è¯•è¦†ç›–èŒƒå›´
- âœ… ç‰ˆæœ¬è¯»å–ï¼ˆgetCurrentVersionï¼‰
- âœ… ç‰ˆæœ¬æ›´æ–°ï¼ˆupdateVersionï¼‰
- âœ… ç‰ˆæœ¬å†å²ç®¡ç†ï¼ˆgetVersionHistory/updateVersionHistoryï¼‰
- âœ… å‘å¸ƒé˜¶æ®µè¯»å–å’Œæ›´æ–°ï¼ˆgetCurrentStage/updateVersionWithStageï¼‰
- âœ… é…ç½®éªŒè¯ï¼ˆisConfigValidï¼‰
- âœ… ç‰ˆæœ¬ä»£ç è®¡ç®—ï¼ˆgetCurrentVersionCodeï¼‰

#### ä¼˜åŠ¿
1. **æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•å®Œæ•´**: ç‰ˆæœ¬è¯»å†™ã€é˜¶æ®µç®¡ç†éƒ½æœ‰è¦†ç›–
2. **JSONè§£æé”™è¯¯å¤„ç†**: æµ‹è¯•äº†æ–‡ä»¶æŸåã€æ ¼å¼é”™è¯¯ç­‰åœºæ™¯
3. **é»˜è®¤å€¼å¤„ç†**: æµ‹è¯•äº†æ–‡ä»¶ä¸å­˜åœ¨æ—¶çš„é™çº§è¡Œä¸º

#### ä¸è¶³
1. **å¹¶å‘æ›´æ–°æµ‹è¯•ç¼ºå¤±**: æœªéªŒè¯å¤šçº¿ç¨‹åŒæ—¶æ›´æ–°ç‰ˆæœ¬çš„å®‰å…¨æ€§
2. **å†å²è®°å½•è¾¹ç•Œæµ‹è¯•ä¸è¶³**: æœªæµ‹è¯•å†å²è®°å½•è¿‡å¤§ï¼ˆ>100æ¡ï¼‰çš„æƒ…å†µ
3. **ç‰ˆæœ¬å›æ»šæµ‹è¯•ç¼ºå¤±**: æœªæµ‹è¯•ä»å†å²ç‰ˆæœ¬æ¢å¤çš„åŠŸèƒ½

#### æ”¹è¿›å»ºè®®
```kotlin
// éœ€è¦è¡¥å……çš„æµ‹è¯•ç”¨ä¾‹ï¼ˆä¼˜å…ˆçº§P1ï¼‰
@Test
fun `updateVersion - å¹¶å‘æ›´æ–°æ—¶æ•°æ®ä¸€è‡´æ€§`()
@Test
fun `getVersionHistory - å†å²è®°å½•è¶…è¿‡100æ¡æ—¶è‡ªåŠ¨æˆªæ–­`()
@Test
fun `restoreVersion - ä»å†å²ç‰ˆæœ¬æ¢å¤`()
@Test
fun `updateVersion - JSONè§£æå¤±è´¥æ—¶è¿”å›é»˜è®¤å€¼`()
```

---

### 2.5 IconManager (20+18ä¸ªæµ‹è¯•) - â­â­â­â­â­ ä¼˜ç§€

#### æµ‹è¯•è¦†ç›–èŒƒå›´
- âœ… å›¾æ ‡åˆ‡æ¢ï¼ˆswitchToStageï¼‰
- âœ… èµ„æºåˆå§‹åŒ–ï¼ˆinitIconResourcesï¼‰
- âœ… é…ç½®ç®¡ç†ï¼ˆloadIconMapping/saveIconMappingï¼‰
- âœ… èµ„æºæ£€æŸ¥ï¼ˆcheckIconResourcesï¼‰
- âœ… ç»Ÿä¸€å›¾æ ‡æ¨¡å¼å’Œåˆ†é˜¶æ®µå›¾æ ‡æ¨¡å¼
- âœ… **è¾¹ç•Œæµ‹è¯•18ä¸ª**: éƒ¨åˆ†æ–‡ä»¶ç¼ºå¤±ã€æ–‡ä»¶æŸåã€å¤§æ–‡ä»¶ã€ç‰¹æ®Šå­—ç¬¦ç­‰

#### ä¼˜åŠ¿
1. **è¾¹ç•Œæµ‹è¯•éå¸¸ä¼˜ç§€**: 18ä¸ªè¾¹ç•Œæµ‹è¯•ï¼Œè¦†ç›–åœºæ™¯å…¨é¢
2. **å¤šæ¨¡å¼æµ‹è¯•**: åŒæ—¶æµ‹è¯•äº†useUnifiedIcon=trueå’Œfalseä¸¤ç§æ¨¡å¼
3. **å¼‚å¸¸å¤„ç†å®Œå–„**: ç©ºç›®å½•ã€æŸåé…ç½®ã€å¤§æ–‡ä»¶ã€ç‰¹æ®Šå­—ç¬¦éƒ½æœ‰æµ‹è¯•
4. **è‡ªé€‚åº”å›¾æ ‡æµ‹è¯•**: æµ‹è¯•äº†drawable-v26å’Œå„å¯†åº¦ç›®å½•

#### ä¸è¶³
1. **è·¨å¹³å°è·¯å¾„æµ‹è¯•ç¼ºå¤±**: æœªæµ‹è¯•Windows/Linuxè·¯å¾„åˆ†éš”ç¬¦å·®å¼‚
2. **ç½‘ç»œè·¯å¾„æµ‹è¯•ç¼ºå¤±**: æœªæµ‹è¯•UNCè·¯å¾„æˆ–ç½‘ç»œèµ„æºè·¯å¾„

#### æ”¹è¿›å»ºè®®
```kotlin
// éœ€è¦è¡¥å……çš„æµ‹è¯•ç”¨ä¾‹ï¼ˆä¼˜å…ˆçº§P2ï¼‰
@Test
fun `switchToStage - Windowsè·¯å¾„åˆ†éš”ç¬¦å¤„ç†`()
@Test
fun `switchToStage - UNCç½‘ç»œè·¯å¾„å¤„ç†`()
```

---

### 2.6 BackupManager (18ä¸ªæµ‹è¯•) - â­â­â­â­ è‰¯å¥½

#### æµ‹è¯•è¦†ç›–èŒƒå›´
- âœ… å¤‡ä»½åˆ›å»ºï¼ˆcreateBackupï¼‰
- âœ… å¤‡ä»½æ¢å¤ï¼ˆrestoreï¼‰
- âœ… å¤‡ä»½æ¸…ç†ï¼ˆcleanupOldBackupsï¼‰
- âœ… å¤‡ä»½åˆ—è¡¨è·å–ï¼ˆlistBackupsï¼‰
- âœ… ç‰ˆæœ¬å’Œé˜¶æ®µä¿¡æ¯ä¿å­˜
- âœ… JSONå…ƒæ•°æ®åºåˆ—åŒ–å’Œååºåˆ—åŒ–

#### ä¼˜åŠ¿
1. **æ ¸å¿ƒæµç¨‹æµ‹è¯•å®Œæ•´**: å¤‡ä»½ã€æ¢å¤ã€æ¸…ç†éƒ½æœ‰è¦†ç›–
2. **å…ƒæ•°æ®ç®¡ç†**: æµ‹è¯•äº†ç‰ˆæœ¬å·å’Œå‘å¸ƒé˜¶æ®µçš„ä¿å­˜
3. **æ¸…ç†é€»è¾‘éªŒè¯**: æµ‹è¯•äº†æŒ‰æ—¶é—´å’Œæ•°é‡æ¸…ç†æ—§å¤‡ä»½

#### ä¸è¶³
1. **ç£ç›˜ç©ºé—´ä¸è¶³æµ‹è¯•ç¼ºå¤±**: æœªæµ‹è¯•ç£ç›˜æ»¡æ—¶çš„è¡Œä¸ºï¼ˆé«˜é£é™©ï¼‰
2. **å¹¶å‘å¤‡ä»½æµ‹è¯•ç¼ºå¤±**: æœªæµ‹è¯•åŒæ—¶åˆ›å»ºå¤šä¸ªå¤‡ä»½çš„æ–‡ä»¶é”
3. **å¤§æ–‡ä»¶å¤‡ä»½æ€§èƒ½æµ‹è¯•ç¼ºå¤±**: æœªéªŒè¯å¤§é¡¹ç›®å¤‡ä»½çš„æ€§èƒ½
4. **æŸåå¤‡ä»½æ¢å¤æµ‹è¯•ç¼ºå¤±**: æœªæµ‹è¯•å¤‡ä»½æ–‡ä»¶è¢«å¤–éƒ¨ä¿®æ”¹åçš„æ¢å¤

#### æ”¹è¿›å»ºè®®
```kotlin
// éœ€è¦è¡¥å……çš„æµ‹è¯•ç”¨ä¾‹ï¼ˆä¼˜å…ˆçº§P0 - é«˜é£é™©ï¼‰
@Test
fun `createBackup - ç£ç›˜ç©ºé—´ä¸è¶³æ—¶ä¼˜é›…å¤±è´¥`()
@Test
fun `createBackup - å¹¶å‘å¤‡ä»½æ—¶çš„æ–‡ä»¶é”`()
@Test
fun `restore - å¤‡ä»½æ–‡ä»¶æŸåæ—¶çš„é”™è¯¯å¤„ç†`()
```

---

### 2.7 GradlePropertiesUpdater (28ä¸ªæµ‹è¯•) - â­â­â­â­ è‰¯å¥½

#### æµ‹è¯•è¦†ç›–èŒƒå›´
- âœ… ç‰ˆæœ¬æ›´æ–°ï¼ˆupdateVersionï¼‰
- âœ… ç‰ˆæœ¬è¯»å–ï¼ˆreadVersionï¼‰
- âœ… é˜¶æ®µæ›´æ–°å’Œè¯»å–ï¼ˆupdateVersionWithStage/readStageï¼‰
- âœ… å¤šç‰ˆæœ¬é”®æ”¯æŒï¼ˆAPP_VERSION_NAME/VERSION/LIB_VERSIONï¼‰
- âœ… æ–‡ä»¶ç±»å‹æ£€æŸ¥ï¼ˆsupportsï¼‰
- âœ… å±æ€§ä¿ç•™ï¼ˆæ›´æ–°æ—¶ä¸å½±å“å…¶ä»–å±æ€§ï¼‰
- âœ… è¾¹ç•Œæµ‹è¯•ï¼ˆé¢„å‘å¸ƒã€æ„å»ºå…ƒæ•°æ®ã€ç©ºæ–‡ä»¶ã€æ³¨é‡Šï¼‰

#### ä¼˜åŠ¿
1. **å¤šç‰ˆæœ¬é”®æ”¯æŒå®Œæ•´**: æµ‹è¯•äº†APP_VERSION_NAMEã€VERSIONã€LIB_VERSION
2. **å±æ€§ä¿ç•™æµ‹è¯•**: éªŒè¯äº†æ›´æ–°ç‰ˆæœ¬æ—¶ä¸å½±å“å…¶ä»–é…ç½®
3. **è¾¹ç•Œæµ‹è¯•å……åˆ†**: é¢„å‘å¸ƒç‰ˆæœ¬ã€æ„å»ºå…ƒæ•°æ®ã€æ³¨é‡Šæ–‡ä»¶éƒ½æœ‰æµ‹è¯•

#### ä¸è¶³
1. **æ–‡ä»¶ç¼–ç æµ‹è¯•ç¼ºå¤±**: æœªæµ‹è¯•éUTF-8ç¼–ç çš„propertiesæ–‡ä»¶
2. **ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰æµ‹è¯•ä¸è¶³**: æœªæµ‹è¯•ç­‰å·ã€ç©ºæ ¼ç­‰ç‰¹æ®Šå­—ç¬¦
3. **å¤šå€¼æ›´æ–°æµ‹è¯•ä¸è¶³**: æœªæµ‹è¯•åŒæ—¶æ›´æ–°å¤šä¸ªæ¨¡å—çš„propertiesæ–‡ä»¶

#### æ”¹è¿›å»ºè®®
```kotlin
// éœ€è¦è¡¥å……çš„æµ‹è¯•ç”¨ä¾‹ï¼ˆä¼˜å…ˆçº§P2ï¼‰
@Test
fun `updateVersion - å¤„ç†éUTF-8ç¼–ç æ–‡ä»¶`()
@Test
fun `readVersion - å€¼åŒ…å«ç­‰å·å’Œç©ºæ ¼`()
@Test
fun `updateVersion - å¤šæ–‡ä»¶æ‰¹é‡æ›´æ–°æ€§èƒ½`()
```

---

### 2.8 VersionSyncManager (21ä¸ªæµ‹è¯•) - â­â­â­ ä¸€èˆ¬

#### æµ‹è¯•è¦†ç›–èŒƒå›´
- âœ… æ¨¡å—å‘ç°ï¼ˆdiscoverModulesï¼‰
- âœ… ç‰ˆæœ¬åŒæ­¥ï¼ˆsyncVersionsï¼‰
- âœ… ç‰ˆæœ¬å’Œé˜¶æ®µåŒæ­¥ï¼ˆsyncVersionsWithStageï¼‰
- âœ… ç‰ˆæœ¬ä¸€è‡´æ€§æ£€æŸ¥ï¼ˆcheckVersionConsistencyï¼‰
- âœ… æ‰€æœ‰ç‰ˆæœ¬è·å–ï¼ˆgetAllVersionsï¼‰
- âœ… ç»“æœæ ¼å¼åŒ–ï¼ˆtoStringï¼‰

#### ä¼˜åŠ¿
1. **æ¨¡å—å‘ç°æµ‹è¯•å®Œæ•´**: æµ‹è¯•äº†éšè—ç›®å½•ã€buildç›®å½•ã€æ— buildæ–‡ä»¶ç›®å½•çš„è¿‡æ»¤
2. **éƒ¨åˆ†åŒæ­¥æµ‹è¯•**: éªŒè¯äº†å¯ä»¥æŒ‡å®šåŒæ­¥ç‰¹å®šæ¨¡å—
3. **é”™è¯¯æŠ¥å‘Šæµ‹è¯•**: éªŒè¯äº†å¤±è´¥æ¨¡å—çš„é”™è¯¯ä¿¡æ¯æ”¶é›†

#### ä¸è¶³ï¼ˆå…³é”®ï¼‰
1. **å¤šæ¨¡å—æ·±åº¦åµŒå¥—æµ‹è¯•ç¼ºå¤±**: æœªæµ‹è¯•3å±‚ä»¥ä¸Šçš„æ¨¡å—ç»“æ„
2. **ç‰ˆæœ¬ä¸ä¸€è‡´æ¢å¤æµ‹è¯•ç¼ºå¤±**: æ£€æµ‹åˆ°ä¸ä¸€è‡´åå¦‚ä½•ä¿®å¤ï¼Ÿ
3. **æ¨¡å—ç›®å½•ä¸å­˜åœ¨æµ‹è¯•ç¼ºå¤±**: updateræŠ›å‡ºå¼‚å¸¸æ—¶çš„å®Œæ•´æ¢å¤
4. **å¤§å‹é¡¹ç›®æ€§èƒ½æµ‹è¯•ç¼ºå¤±**: æœªæµ‹è¯•50+æ¨¡å—çš„åŒæ­¥æ€§èƒ½
5. **å¢é‡åŒæ­¥æµ‹è¯•ç¼ºå¤±**: æœªæµ‹è¯•åªåŒæ­¥å˜æ›´æ¨¡å—çš„åœºæ™¯

#### æ”¹è¿›å»ºè®®ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰
```kotlin
// éœ€è¦è¡¥å……çš„æµ‹è¯•ç”¨ä¾‹ï¼ˆä¼˜å…ˆçº§P0 - å…³é”®ï¼‰
@Test
fun `syncVersions - 50+æ¨¡å—çš„å¤§å‹é¡¹ç›®æ€§èƒ½`()
@Test
fun `checkVersionConsistency - æ£€æµ‹åˆ°ä¸ä¸€è‡´åè‡ªåŠ¨ä¿®å¤`()
@Test
fun `syncVersions - æ¨¡å—ç›®å½•ä¸å­˜åœ¨æ—¶è·³è¿‡å¹¶è®°å½•`()
@Test
fun `syncVersions - updateræŠ›å‡ºå¼‚å¸¸æ—¶å®Œæ•´å›æ»š`()
@Test
fun `discoverModules - æ·±åº¦åµŒå¥—æ¨¡å—ç»“æ„ï¼ˆ3å±‚+ï¼‰`()
```

---

## 3. æµ‹è¯•ç›²åŒºè¯†åˆ«

### 3.1 æœªè¦†ç›–çš„å…³é”®åœºæ™¯ï¼ˆé«˜é£é™©ï¼‰

| åœºæ™¯ | å½±å“æ¨¡å— | é£é™©ç­‰çº§ | å½±å“ |
|------|----------|----------|------|
| **ç£ç›˜ç©ºé—´ä¸è¶³** | BackupManager | ğŸ”´ é«˜ | å¤‡ä»½å¤±è´¥ï¼Œæ— æ³•å›æ»š |
| **å¹¶å‘ç‰ˆæœ¬æ›´æ–°** | VersionManager | ğŸ”´ é«˜ | æ•°æ®ä¸ä¸€è‡´ï¼Œç‰ˆæœ¬æ··ä¹± |
| **å¹¶å‘å¤‡ä»½æ“ä½œ** | BackupManager | ğŸ”´ é«˜ | æ–‡ä»¶æŸåï¼Œå¤‡ä»½ä¸¢å¤± |
| **å¤šæ¨¡å—ç‰ˆæœ¬ä¸ä¸€è‡´æ¢å¤** | VersionSyncManager | ğŸ”´ é«˜ | é¡¹ç›®æ— æ³•æ„å»º |
| **å¤§å‹é¡¹ç›®æ€§èƒ½é€€åŒ–** | VersionSyncManager | ğŸŸ  ä¸­é«˜ | åŒæ­¥æ—¶é—´è¿‡é•¿ï¼ˆ>10ç§’ï¼‰ |
| **å¤‡ä»½æ–‡ä»¶æŸåæ¢å¤** | BackupManager | ğŸŸ  ä¸­é«˜ | æ¢å¤å¤±è´¥ï¼Œæ•°æ®ä¸¢å¤± |
| **JSONè§£æå¼‚å¸¸é™çº§** | VersionManager/IconManager | ğŸŸ  ä¸­é«˜ | é…ç½®ä¸¢å¤±ï¼ŒåŠŸèƒ½å¤±æ•ˆ |

### 3.2 æœªè¦†ç›–çš„è¾¹ç•Œæƒ…å†µï¼ˆä¸­é£é™©ï¼‰

| è¾¹ç•Œæƒ…å†µ | å½±å“æ¨¡å— | é£é™©ç­‰çº§ | å½±å“ |
|----------|----------|----------|------|
| ç‰ˆæœ¬å†å²è®°å½•è¿‡å¤§ï¼ˆ>100æ¡ï¼‰ | VersionManager | ğŸŸ¡ ä¸­ | æ–‡ä»¶è¿‡å¤§ï¼Œæ€§èƒ½ä¸‹é™ |
| å›¾æ ‡æ–‡ä»¶è¶…å¤§ï¼ˆ>5MBï¼‰ | IconManager | ğŸŸ¡ ä¸­ | å¤åˆ¶ç¼“æ…¢ï¼Œå†…å­˜å ç”¨é«˜ |
| éUTF-8ç¼–ç properties | GradlePropertiesUpdater | ğŸŸ¡ ä¸­ | è§£æå¤±è´¥ï¼Œä¹±ç  |
| ç‰¹æ®Šå­—ç¬¦æ–‡ä»¶åï¼ˆWindowsç¦æ­¢å­—ç¬¦ï¼‰ | IconManager | ğŸŸ¡ ä¸­ | æ–‡ä»¶å¤åˆ¶å¤±è´¥ |
| æ·±åº¦åµŒå¥—æ¨¡å—ç»“æ„ï¼ˆ5å±‚+ï¼‰ | VersionSyncManager | ğŸŸ¡ ä¸­ | æ¨¡å—å‘ç°å¤±è´¥ |
| ç½‘ç»œè·¯å¾„/UNCè·¯å¾„ | IconManager | ğŸŸ¢ ä½ | ä¸æ”¯æŒï¼Œéœ€æ˜ç¡®æ–‡æ¡£ |

### 3.3 å®Œå…¨ç¼ºå¤±çš„æµ‹è¯•ç±»å‹ï¼ˆä¸¥é‡ï¼‰

| æµ‹è¯•ç±»å‹ | ç¼ºå¤±åœºæ™¯ | é£é™©ç­‰çº§ | å½±å“ |
|----------|----------|----------|------|
| **é›†æˆæµ‹è¯•** | ç«¯åˆ°ç«¯å®Œæ•´æµç¨‹éªŒè¯ | ğŸ”´ é«˜ | æ— æ³•éªŒè¯ç³»ç»Ÿæ•´ä½“åŠŸèƒ½ |
| **æ€§èƒ½æµ‹è¯•** | æ‰§è¡Œæ—¶é—´ã€å†…å­˜å ç”¨ | ğŸ”´ é«˜ | æ— æ³•ä¿è¯æ€§èƒ½ç›®æ ‡ |
| **å¹¶å‘æµ‹è¯•** | å¤šçº¿ç¨‹å®‰å…¨æ€§ | ğŸŸ  ä¸­é«˜ | ç«æ€æ¡ä»¶é£é™© |
| **CI/CDæµ‹è¯•** | GitHub Actionså·¥ä½œæµ | ğŸŸ  ä¸­é«˜ | è‡ªåŠ¨åŒ–æµç¨‹å¯èƒ½å¤±æ•ˆ |
| **å‹åŠ›æµ‹è¯•** | å¤§è§„æ¨¡æ•°æ®å’Œé•¿æ—¶é—´è¿è¡Œ | ğŸŸ¡ ä¸­ | ç¨³å®šæ€§æœªçŸ¥ |
| **è·¨å¹³å°æµ‹è¯•** | Windows/Linux/macOSå·®å¼‚ | ğŸŸ¡ ä¸­ | è·¨å¹³å°å…¼å®¹æ€§é—®é¢˜ |

---

## 4. æµ‹è¯•è´¨é‡åˆ†æ

### 4.1 æµ‹è¯•å‘½åè§„èŒƒ

#### âœ… ä¼˜ç§€å®è·µ
æ‰€æœ‰æµ‹è¯•éƒ½ä½¿ç”¨äº†æè¿°æ€§å‘½åï¼Œéµå¾ªä»¥ä¸‹æ¨¡å¼ï¼š
```kotlin
@Test
fun `æ–¹æ³•å_åœºæ™¯_é¢„æœŸç»“æœ`() {
    // Given
    // When
    // Then
}
```

**ç¤ºä¾‹**:
- âœ… `discoverModules finds root module`
- âœ… `syncVersions reports failed modules`
- âœ… `switchToStage - éƒ¨åˆ†å›¾æ ‡æ–‡ä»¶ç¼ºå¤±æ—¶ä»èƒ½åˆ‡æ¢`
- âœ… `updateVersion handles version with prerelease`

#### è¯„ä¼°: **100åˆ† - ä¼˜ç§€**

### 4.2 æµ‹è¯•ç»“æ„ï¼ˆAAAæ¨¡å¼ï¼‰

#### âœ… ä¼˜ç§€å®è·µ
å¤§éƒ¨åˆ†æµ‹è¯•éƒ½éµå¾ªAAAï¼ˆArrange-Act-Assertï¼‰æ¨¡å¼ï¼š
```kotlin
@Test
fun `updateVersion updates APP_VERSION_NAME`() {
    // Given - å‡†å¤‡æµ‹è¯•æ•°æ®
    val file = createPropertiesFile("APP_VERSION_NAME=1.0.0")

    // When - æ‰§è¡Œè¢«æµ‹æ–¹æ³•
    val result = updater.updateVersion(file, SemanticVersion(2, 0, 0))

    // Then - éªŒè¯ç»“æœ
    assertTrue(result)
    assertTrue(file.readText().contains("APP_VERSION_NAME=2.0.0"))
}
```

#### è¯„ä¼°: **95åˆ† - ä¼˜ç§€**

### 4.3 æµ‹è¯•éš”ç¦»æ€§

#### âœ… ä¼˜ç§€å®è·µ
æ‰€æœ‰æµ‹è¯•éƒ½ä½¿ç”¨ä¸´æ—¶ç›®å½•ï¼Œç¡®ä¿æµ‹è¯•é—´æ— ç›¸äº’å½±å“ï¼š
```kotlin
@Before
fun setUp() {
    tempDir = createTempDir("test-name-${System.currentTimeMillis()}")
}

@After
fun tearDown() {
    tempDir.deleteRecursively()
}
```

#### è¯„ä¼°: **100åˆ† - ä¼˜ç§€**

### 4.4 æ–­è¨€è´¨é‡

#### âœ… ä¼˜åŠ¿
- å¤§éƒ¨åˆ†æµ‹è¯•éƒ½æœ‰æ˜ç¡®çš„æ–­è¨€
- ä½¿ç”¨äº† assertTrue/assertFalse/assertEquals/assertNotNull ç­‰å¤šç§æ–­è¨€
- å…³é”®æµ‹è¯•æœ‰å¤šä¸ªæ–­è¨€ç‚¹éªŒè¯

#### âš ï¸ ä¸è¶³
- å°‘æ•°æµ‹è¯•æ–­è¨€ä¸å¤Ÿè¯¦ç»†ï¼ŒåªéªŒè¯äº†è¿”å›å€¼ï¼ŒæœªéªŒè¯å‰¯ä½œç”¨
- ç¼ºå°‘å¯¹å¼‚å¸¸æ¶ˆæ¯å†…å®¹çš„éªŒè¯

#### è¯„ä¼°: **85åˆ† - è‰¯å¥½**

### 4.5 æµ‹è¯•ä»£ç å¯ç»´æŠ¤æ€§

#### âœ… ä¼˜åŠ¿
- å¤§é‡ä½¿ç”¨è¾…åŠ©æ–¹æ³•å‡å°‘é‡å¤ä»£ç ï¼ˆcreatePropertiesFileã€createSubmoduleç­‰ï¼‰
- æµ‹è¯•æ•°æ®å‡†å¤‡æ¸…æ™°ï¼Œæ˜“äºç†è§£
- æµ‹è¯•æ–‡ä»¶ç»“æ„åˆç†ï¼Œç›¸å…³æµ‹è¯•é›†ä¸­

#### è¯„ä¼°: **90åˆ† - ä¼˜ç§€**

---

## 5. æµ‹è¯•è¡¥å……å»ºè®®ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰

### 5.1 P0 - å…³é”®æµ‹è¯•ï¼ˆå¿…é¡»è¡¥å……ï¼‰- é¢„ä¼°å·¥æ—¶: 8h

| æµ‹è¯•æ¨¡å— | æµ‹è¯•ç”¨ä¾‹ | é¢„ä¼°å·¥æ—¶ | é£é™©ç­‰çº§ |
|----------|----------|----------|----------|
| **BackupManager** | ç£ç›˜ç©ºé—´ä¸è¶³æµ‹è¯• | 1.5h | ğŸ”´ é«˜ |
| **BackupManager** | å¹¶å‘å¤‡ä»½æ“ä½œæµ‹è¯• | 1.5h | ğŸ”´ é«˜ |
| **BackupManager** | å¤‡ä»½æ–‡ä»¶æŸåæ¢å¤æµ‹è¯• | 1h | ğŸŸ  ä¸­é«˜ |
| **VersionManager** | å¹¶å‘ç‰ˆæœ¬æ›´æ–°æµ‹è¯• | 1.5h | ğŸ”´ é«˜ |
| **VersionSyncManager** | å¤§å‹é¡¹ç›®æ€§èƒ½æµ‹è¯•ï¼ˆ50+æ¨¡å—ï¼‰ | 1h | ğŸŸ  ä¸­é«˜ |
| **VersionSyncManager** | ç‰ˆæœ¬ä¸ä¸€è‡´è‡ªåŠ¨ä¿®å¤æµ‹è¯• | 1h | ğŸ”´ é«˜ |
| **VersionSyncManager** | æ¨¡å—ä¸å­˜åœ¨æ—¶çš„é”™è¯¯æ¢å¤æµ‹è¯• | 0.5h | ğŸŸ  ä¸­é«˜ |

#### å®æ–½ç¤ºä¾‹ï¼šBackupManagerç£ç›˜ç©ºé—´ä¸è¶³æµ‹è¯•
```kotlin
@Test
fun `createBackup - ç£ç›˜ç©ºé—´ä¸è¶³æ—¶è¿”å›å¤±è´¥`() {
    // æ¨¡æ‹Ÿç£ç›˜ç©ºé—´ä¸è¶³
    val mockDiskChecker = MockDiskInspector(remainingSpace = 0)
    backupManager = BackupManager(tempDir, diskChecker = mockDiskChecker)

    val result = backupManager.createBackup()

    assertTrue(result.isFailure)
    assertTrue(result.exceptionOrNull()?.message?.contains("ç£ç›˜ç©ºé—´ä¸è¶³") == true)
}
```

---

### 5.2 P1 - é«˜ä¼˜å…ˆçº§æµ‹è¯•ï¼ˆå¼ºçƒˆå»ºè®®è¡¥å……ï¼‰- é¢„ä¼°å·¥æ—¶: 12h

| æµ‹è¯•æ¨¡å— | æµ‹è¯•ç”¨ä¾‹ | é¢„ä¼°å·¥æ—¶ | ä»·å€¼ |
|----------|----------|----------|------|
| **é›†æˆæµ‹è¯•** | å®Œæ•´æ›´æ–°æµç¨‹ç«¯åˆ°ç«¯æµ‹è¯• | 3h | ğŸ”´ é«˜ |
| **é›†æˆæµ‹è¯•** | å›¾æ ‡åˆ‡æ¢å®Œæ•´æµç¨‹æµ‹è¯• | 2h | ğŸŸ  ä¸­é«˜ |
| **é›†æˆæµ‹è¯•** | å›æ»šå®Œæ•´æµç¨‹æµ‹è¯• | 2h | ğŸŸ  ä¸­é«˜ |
| **æ€§èƒ½æµ‹è¯•** | ç‰ˆæœ¬æ›´æ–°ä»»åŠ¡æ‰§è¡Œæ—¶é—´åŸºå‡† | 1.5h | ğŸŸ  ä¸­é«˜ |
| **æ€§èƒ½æµ‹è¯•** | å›¾æ ‡åˆ‡æ¢ä»»åŠ¡æ‰§è¡Œæ—¶é—´åŸºå‡† | 1.5h | ğŸŸ  ä¸­é«˜ |
| **VersionManager** | ç‰ˆæœ¬å†å²è®°å½•è¿‡å¤§æ—¶çš„æˆªæ–­ | 1h | ğŸŸ¡ ä¸­ |
| **VersionSyncManager** | updaterå¼‚å¸¸æ—¶çš„å®Œæ•´å›æ»š | 1h | ğŸŸ  ä¸­é«˜ |

#### å®æ–½ç¤ºä¾‹ï¼šé›†æˆæµ‹è¯•
```kotlin
@Test
fun `å®Œæ•´æµç¨‹ - analyzeCommits -> calculateVersion -> backup -> update -> sync`() {
    // Given: å‡†å¤‡é¡¹ç›®ç¯å¢ƒå’ŒGitæäº¤
    val projectDir = createTempProject()
    createGitCommits(projectDir, listOf(
        "feat: add new feature",
        "fix: fix bug"
    ))

    // When: æ‰§è¡Œå®Œæ•´æ›´æ–°æµç¨‹
    val result = versionUpdateTask.execute(projectDir)

    // Then: éªŒè¯å®Œæ•´æµç¨‹
    assertTrue(result.isSuccess)
    assertEquals(SemanticVersion(1, 1, 0), result.version)
    verifyBackupCreated(result.backupPath)
    verifyAllModulesSynced(result.syncedModules)
}
```

---

### 5.3 P2 - ä¸­ä¼˜å…ˆçº§æµ‹è¯•ï¼ˆå»ºè®®è¡¥å……ï¼‰- é¢„ä¼°å·¥æ—¶: 6h

| æµ‹è¯•æ¨¡å— | æµ‹è¯•ç”¨ä¾‹ | é¢„ä¼°å·¥æ—¶ | ä»·å€¼ |
|----------|----------|----------|------|
| **è·¨å¹³å°æµ‹è¯•** | Windowsè·¯å¾„åˆ†éš”ç¬¦å¤„ç† | 1h | ğŸŸ¡ ä¸­ |
| **è¾¹ç•Œæµ‹è¯•** | ç‰ˆæœ¬å†å²è®°å½•è¶…é™æˆªæ–­ | 0.5h | ğŸŸ¡ ä¸­ |
| **è¾¹ç•Œæµ‹è¯•** | å›¾æ ‡æ–‡ä»¶è¶…å¤§ï¼ˆ>5MBï¼‰å¤„ç† | 1h | ğŸŸ¡ ä¸­ |
| **è¾¹ç•Œæµ‹è¯•** | éUTF-8ç¼–ç propertiesæ–‡ä»¶ | 1h | ğŸŸ¡ ä¸­ |
| **è¾¹ç•Œæµ‹è¯•** | æ·±åº¦åµŒå¥—æ¨¡å—ç»“æ„ï¼ˆ3å±‚+ï¼‰ | 1h | ğŸŸ¡ ä¸­ |
| **è¾¹ç•Œæµ‹è¯•** | ç‰¹æ®Šå­—ç¬¦æ–‡ä»¶åå¤„ç† | 1h | ğŸŸ¢ ä½ |
| **å‹åŠ›æµ‹è¯•** | é•¿æ—¶é—´è¿è¡Œç¨³å®šæ€§ | 0.5h | ğŸŸ¡ ä¸­ |

---

### 5.4 P3 - ä½ä¼˜å…ˆçº§æµ‹è¯•ï¼ˆå¯é€‰è¡¥å……ï¼‰- é¢„ä¼°å·¥æ—¶: 4h

| æµ‹è¯•æ¨¡å— | æµ‹è¯•ç”¨ä¾‹ | é¢„ä¼°å·¥æ—¶ | ä»·å€¼ |
|----------|----------|----------|------|
| **CI/CDæµ‹è¯•** | GitHub Actionså·¥ä½œæµéªŒè¯ | 2h | ğŸŸ¡ ä¸­ |
| **å¹¶å‘æµ‹è¯•** | å¤šGradleä»»åŠ¡å¹¶å‘æ‰§è¡Œ | 1h | ğŸŸ¡ ä¸­ |
| **æ–‡æ¡£æµ‹è¯•** | é”™è¯¯æ¶ˆæ¯ç”¨æˆ·å‹å¥½æ€§ | 0.5h | ğŸŸ¢ ä½ |
| **å®‰å…¨æµ‹è¯•** | æ•æ„Ÿä¿¡æ¯è¿‡æ»¤ | 0.5h | ğŸŸ¢ ä½ |
| **å…¼å®¹æ€§æµ‹è¯•** | ä¸åŒGradleç‰ˆæœ¬å…¼å®¹æ€§ | 1h | ğŸŸ¡ ä¸­ |

---

## 6. æµ‹è¯•æ¶æ„å»ºè®®

### 6.1 å»ºè®®çš„æ–°å¢æµ‹è¯•æ–‡ä»¶

```
buildSrc/src/test/kotlin/com/empathy/ai/build/
â”œâ”€â”€ VersionUpdateIntegrationTest.kt      # æ–°å¢ - é›†æˆæµ‹è¯•
â”œâ”€â”€ VersionUpdatePerformanceTest.kt      # æ–°å¢ - æ€§èƒ½æµ‹è¯•
â”œâ”€â”€ VersionSyncManagerBoundaryTest.kt    # æ–°å¢ - è¾¹ç•Œæµ‹è¯•
â”œâ”€â”€ BackupManagerConcurrencyTest.kt      # æ–°å¢ - å¹¶å‘æµ‹è¯•
â””â”€â”€ CrossPlatformCompatibilityTest.kt    # æ–°å¢ - è·¨å¹³å°æµ‹è¯•
```

---

### 6.2 æµ‹è¯•å·¥å…·åº“å»ºè®®

å»ºè®®åˆ›å»ºå…±äº«çš„æµ‹è¯•å·¥å…·ç±»ï¼Œå‡å°‘é‡å¤ä»£ç ï¼š

```kotlin
// buildSrc/src/test/kotlin/com/empathy/ai/build/testutil/
object TestProjectBuilder {
    fun createMultiModuleProject(
        modules: List<String>,
        versions: Map<String, String>
    ): File { ... }

    fun createGitCommits(
        projectDir: File,
        commits: List<String>
    ) { ... }

    fun simulateDiskFull(
        projectDir: File
    ) { ... }
}
```

---

## 7. æµ‹è¯•æ‰§è¡Œå’Œç»´æŠ¤

### 7.1 å½“å‰æµ‹è¯•æ‰§è¡Œæ•ˆç‡

| æŒ‡æ ‡ | æ•°å€¼ | ç›®æ ‡ | çŠ¶æ€ |
|------|------|------|------|
| æ€»æ‰§è¡Œæ—¶é—´ | 3åˆ†2ç§’ | <5åˆ†é’Ÿ | âœ… ä¼˜ç§€ |
| å•ä¸ªæµ‹è¯•å¹³å‡æ—¶é—´ | ~0.8ç§’ | <2ç§’ | âœ… ä¼˜ç§€ |
| æµ‹è¯•å¹¶è¡Œåº¦ | æœªçŸ¥ | >4çº¿ç¨‹ | âš ï¸ éœ€éªŒè¯ |
| å†…å­˜å ç”¨ | æœªçŸ¥ | <500MB | âš ï¸ éœ€ç›‘æ§ |

### 7.2 CI/CDé›†æˆå»ºè®®

å»ºè®®åœ¨GitHub Actionsä¸­æ·»åŠ æµ‹è¯•æ­¥éª¤ï¼š

```yaml
# .github/workflows/test.yml
name: Unit Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Set up JDK 17
        uses: actions/setup-java@v3
        with:
          java-version: '17'
          distribution: 'temurin'
      - name: Run tests
        run: ./gradlew test
      - name: Upload test results
        uses: actions/upload-artifact@v3
        with:
          name: test-results
          path: buildSrc/build/test-results/
```

---

## 8. æµ‹è¯•è¦†ç›–ç‡æå‡è·¯çº¿å›¾

### é˜¶æ®µ1ï¼šå…³é”®æµ‹è¯•è¡¥å……ï¼ˆ1å‘¨å†…ï¼‰

- [ ] BackupManagerç£ç›˜ç©ºé—´ä¸è¶³æµ‹è¯•
- [ ] BackupManagerå¹¶å‘å¤‡ä»½æµ‹è¯•
- [ ] VersionManagerå¹¶å‘æ›´æ–°æµ‹è¯•
- [ ] VersionSyncManagerç‰ˆæœ¬ä¸ä¸€è‡´ä¿®å¤æµ‹è¯•
- [ ] VersionSyncManagerå¤§å‹é¡¹ç›®æ€§èƒ½æµ‹è¯•

**ç›®æ ‡**: å°†é«˜é£é™©åœºæ™¯è¦†ç›–ç‡ä»0%æå‡åˆ°80%

---

### é˜¶æ®µ2ï¼šé›†æˆå’Œæ€§èƒ½æµ‹è¯•ï¼ˆ2å‘¨å†…ï¼‰

- [ ] åˆ›å»ºVersionUpdateIntegrationTest
- [ ] åˆ›å»ºVersionUpdatePerformanceTest
- [ ] æ·»åŠ å®Œæ•´æµç¨‹ç«¯åˆ°ç«¯æµ‹è¯•
- [ ] æ·»åŠ æ‰§è¡Œæ—¶é—´å’Œå†…å­˜åŸºå‡†æµ‹è¯•

**ç›®æ ‡**: å»ºç«‹å®Œæ•´çš„é›†æˆå’Œæ€§èƒ½æµ‹è¯•å¥—ä»¶

---

### é˜¶æ®µ3ï¼šè¾¹ç•Œå’Œå‹åŠ›æµ‹è¯•ï¼ˆ3å‘¨å†…ï¼‰

- [ ] è¡¥å……æ‰€æœ‰è¾¹ç•Œæµ‹è¯•ç”¨ä¾‹
- [ ] æ·»åŠ è·¨å¹³å°å…¼å®¹æ€§æµ‹è¯•
- [ ] æ·»åŠ é•¿æ—¶é—´è¿è¡Œç¨³å®šæ€§æµ‹è¯•
- [ ] æ·»åŠ CI/CDå·¥ä½œæµéªŒè¯æµ‹è¯•

**ç›®æ ‡**: æµ‹è¯•è¦†ç›–ç‡è¾¾åˆ°90%+

---

## 9. é£é™©è¯„ä¼°ä¸ç¼“è§£å»ºè®®

### 9.1 å½“å‰æµ‹è¯•ç›²åŒºé£é™©

| é£é™©é¡¹ | æ¦‚ç‡ | å½±å“ | é£é™©ç­‰çº§ | ç¼“è§£æªæ–½ |
|--------|------|------|----------|----------|
| ç£ç›˜ç©ºé—´ä¸è¶³å¯¼è‡´å¤‡ä»½å¤±è´¥ | ä¸­ | é«˜ | ğŸ”´ é«˜ | **ç«‹å³**æ·»åŠ ç£ç›˜ç©ºé—´æ£€æŸ¥æµ‹è¯• |
| å¹¶å‘æ“ä½œå¯¼è‡´æ•°æ®æŸå | ä½ | é«˜ | ğŸŸ  ä¸­é«˜ | **æœ¬å‘¨**æ·»åŠ å¹¶å‘å®‰å…¨æµ‹è¯• |
| å¤§å‹é¡¹ç›®æ€§èƒ½ä¸è¾¾æ ‡ | ä¸­ | ä¸­ | ğŸŸ  ä¸­é«˜ | **æœ¬å‘¨**æ·»åŠ æ€§èƒ½åŸºå‡†æµ‹è¯• |
| ç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´æ„å»ºå¤±è´¥ | ä½ | é«˜ | ğŸŸ  ä¸­é«˜ | **æœ¬å‘¨**æ·»åŠ ä¸€è‡´æ€§æ£€æŸ¥æµ‹è¯• |
| é›†æˆæµç¨‹å­˜åœ¨éšè—Bug | ä¸­ | ä¸­ | ğŸŸ¡ ä¸­ | **2å‘¨å†…**æ·»åŠ é›†æˆæµ‹è¯• |

### 9.2 æµ‹è¯•è´¨é‡é£é™©

| é£é™©é¡¹ | å½“å‰çŠ¶æ€ | ç¼“è§£å»ºè®® |
|--------|----------|----------|
| æµ‹è¯•å¯ç»´æŠ¤æ€§ä¸‹é™ | è‰¯å¥½ï¼ˆ85åˆ†ï¼‰ | å»ºç«‹æµ‹è¯•å·¥å…·åº“ï¼Œå‡å°‘é‡å¤ä»£ç  |
| æµ‹è¯•æ‰§è¡Œæ—¶é—´è¿‡é•¿ | ä¼˜ç§€ï¼ˆ3åˆ†é’Ÿï¼‰ | ç»§ç»­ç›‘æ§ï¼Œä¿æŒåœ¨5åˆ†é’Ÿå†… |
| æµ‹è¯•ä¸ç¨³å®šï¼ˆflakyï¼‰ | æœªå‘ç° | å»ºç«‹æµ‹è¯•ç¨³å®šæ€§ç›‘æ§ |

---

## 10. æ€»ç»“ä¸è¡ŒåŠ¨è®¡åˆ’

### 10.1 æ€»ä½“è¯„ä¼°

PRD24çš„æµ‹è¯•è´¨é‡æ€»ä½“**ä¼˜ç§€ï¼ˆ84.6/100ï¼‰**ï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š

âœ… **ä¼˜åŠ¿**:
- 224ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–æ ¸å¿ƒåŠŸèƒ½å®Œæ•´
- 100%æµ‹è¯•é€šè¿‡ç‡ï¼Œæ‰§è¡Œç¨³å®š
- è¾¹ç•Œæµ‹è¯•ä¼˜ç§€ï¼Œç‰¹åˆ«æ˜¯IconManager
- æµ‹è¯•å‘½åè§„èŒƒï¼Œä»£ç ç»“æ„æ¸…æ™°

âš ï¸ **ä¸è¶³**:
- é›†æˆæµ‹è¯•å®Œå…¨ç¼ºå¤±ï¼ˆé«˜é£é™©ï¼‰
- æ€§èƒ½æµ‹è¯•å®Œå…¨ç¼ºå¤±ï¼ˆé«˜é£é™©ï¼‰
- å¹¶å‘å®‰å…¨æµ‹è¯•ç¼ºå¤±ï¼ˆä¸­é«˜é£é™©ï¼‰
- VersionSyncManageræµ‹è¯•åå°‘ï¼ˆ70%è¦†ç›–ç‡ï¼‰

ğŸ”´ **å…³é”®é£é™©**:
- ç£ç›˜ç©ºé—´ä¸è¶³åœºæ™¯æœªæµ‹è¯•ï¼ˆå¯èƒ½å¯¼è‡´å¤‡ä»½å¤±è´¥ï¼‰
- å¹¶å‘ç‰ˆæœ¬æ›´æ–°æœªæµ‹è¯•ï¼ˆå¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼‰
- å¤§å‹é¡¹ç›®æ€§èƒ½æœªéªŒè¯ï¼ˆå¯èƒ½å¯¼è‡´åŒæ­¥è¶…æ—¶ï¼‰

---

### 10.2 ç«‹å³è¡ŒåŠ¨é¡¹ï¼ˆ24å°æ—¶å†…ï¼‰

1. **æ·»åŠ BackupManagerç£ç›˜ç©ºé—´ä¸è¶³æµ‹è¯•** (1.5h)
2. **æ·»åŠ VersionManagerå¹¶å‘æ›´æ–°æµ‹è¯•** (1.5h)
3. **æ·»åŠ VersionSyncManagerç‰ˆæœ¬ä¸ä¸€è‡´ä¿®å¤æµ‹è¯•** (1h)

**é¢„ä¼°å·¥æ—¶**: 4h
**é¢„æœŸæ•ˆæœ**: é™ä½é«˜é£é™©åœºæ™¯çš„é£é™©ç­‰çº§

---

### 10.3 çŸ­æœŸè¡ŒåŠ¨é¡¹ï¼ˆ1å‘¨å†…ï¼‰

1. åˆ›å»ºé›†æˆæµ‹è¯•å¥—ä»¶ï¼ˆVersionUpdateIntegrationTestï¼‰- 3h
2. åˆ›å»ºæ€§èƒ½æµ‹è¯•å¥—ä»¶ï¼ˆVersionUpdatePerformanceTestï¼‰- 2h
3. è¡¥å……VersionSyncManagerè¾¹ç•Œæµ‹è¯• - 2h
4. æ·»åŠ BackupManagerå¹¶å‘æµ‹è¯• - 1.5h

**é¢„ä¼°å·¥æ—¶**: 8.5h
**é¢„æœŸæ•ˆæœ**: æµ‹è¯•è¦†ç›–ç‡è¾¾åˆ°90%+

---

### 10.4 ä¸­æœŸè¡ŒåŠ¨é¡¹ï¼ˆ2å‘¨å†…ï¼‰

1. æ·»åŠ æ‰€æœ‰è¾¹ç•Œæµ‹è¯•ç”¨ä¾‹ - 3h
2. æ·»åŠ è·¨å¹³å°å…¼å®¹æ€§æµ‹è¯• - 2h
3. å»ºç«‹æµ‹è¯•å·¥å…·åº“å‡å°‘é‡å¤ä»£ç  - 2h
4. é›†æˆCI/CDæµ‹è¯•æµç¨‹ - 2h

**é¢„ä¼°å·¥æ—¶**: 9h
**é¢„æœŸæ•ˆæœ**: æµ‹è¯•è¦†ç›–ç‡è¾¾åˆ°95%+

---

### 10.5 é•¿æœŸè¡ŒåŠ¨é¡¹ï¼ˆ1ä¸ªæœˆå†…ï¼‰

1. å»ºç«‹æ€§èƒ½åŸºå‡†å’Œç›‘æ§
2. å»ºç«‹æµ‹è¯•ç¨³å®šæ€§ç›‘æ§
3. å®šæœŸå®¡æŸ¥å’Œæ›´æ–°æµ‹è¯•ç”¨ä¾‹
4. å»ºç«‹æµ‹è¯•è¦†ç›–ç‡æŒç»­æå‡æœºåˆ¶

---

## 11. é™„å½•

### 11.1 æµ‹è¯•è¦†ç›–ç‡è¯¦ç»†ç»Ÿè®¡

| æ¨¡å— | å…¬å…±æ–¹æ³•æ•° | æµ‹è¯•è¦†ç›–æ–¹æ³• | è¦†ç›–ç‡ | è¯„çº§ |
|------|-----------|-------------|--------|------|
| SemanticVersion | 15 | 15 | 100% | â­â­â­â­â­ |
| CommitType | 5 | 5 | 100% | â­â­â­â­â­ |
| CommitParser | 3 | 3 | 100% | â­â­â­â­â­ |
| ReleaseStage | 4 | 4 | 100% | â­â­â­â­â­ |
| IconMapping | 3 | 3 | 100% | â­â­â­â­â­ |
| VersionCalculator | 3 | 3 | 100% | â­â­â­â­â­ |
| VersionManager | 8 | 7 | 88% | â­â­â­â­ |
| IconManager | 6 | 5 | 83% | â­â­â­â­ |
| BackupManager | 5 | 4 | 80% | â­â­â­â­ |
| GradlePropertiesUpdater | 6 | 5 | 83% | â­â­â­â­ |
| VersionSyncManager | 6 | 4 | 67% | â­â­â­ |
| **æ€»è®¡** | **64** | **58** | **91%** | **â­â­â­â­â­** |

### 11.2 æµ‹è¯•ç”¨ä¾‹è¯¦ç»†æ¸…å•

```
SemanticVersionTest (38ä¸ªæµ‹è¯•)
â”œâ”€â”€ è§£ææµ‹è¯• (12ä¸ª)
â”‚   â”œâ”€â”€ æ ‡å‡†æ ¼å¼è§£æ
â”‚   â”œâ”€â”€ é¢„å‘å¸ƒç‰ˆæœ¬è§£æ
â”‚   â”œâ”€â”€ æ„å»ºå…ƒæ•°æ®è§£æ
â”‚   â””â”€â”€ æ— æ•ˆæ ¼å¼å¤„ç†
â”œâ”€â”€ æ¯”è¾ƒæµ‹è¯• (8ä¸ª)
â”‚   â”œâ”€â”€ majorç‰ˆæœ¬æ¯”è¾ƒ
â”‚   â”œâ”€â”€ minorç‰ˆæœ¬æ¯”è¾ƒ
â”‚   â”œâ”€â”€ patchç‰ˆæœ¬æ¯”è¾ƒ
â”‚   â””â”€â”€ é¢„å‘å¸ƒç‰ˆæœ¬æ¯”è¾ƒ
â”œâ”€â”€ é€’å¢æµ‹è¯• (6ä¸ª)
â”‚   â”œâ”€â”€ majoré€’å¢
â”‚   â”œâ”€â”€ minoré€’å¢
â”‚   â”œâ”€â”€ patché€’å¢
â”‚   â””â”€â”€ é€’å¢åç‰ˆæœ¬é‡ç½®
â”œâ”€â”€ éªŒè¯æµ‹è¯• (6ä¸ª)
â”‚   â”œâ”€â”€ æœ‰æ•ˆç‰ˆæœ¬éªŒè¯
â”‚   â”œâ”€â”€ æ— æ•ˆç‰ˆæœ¬éªŒè¯
â”‚   â””â”€â”€ è¾¹ç•Œå€¼éªŒè¯
â””â”€â”€ å…¶ä»–æµ‹è¯• (6ä¸ª)
    â”œâ”€â”€ toVersionCodeè½¬æ¢
    â”œâ”€â”€ toStringæ ¼å¼åŒ–
    â””â”€â”€ ä¼´ç”Ÿå¯¹è±¡æ–¹æ³•

CommitParserTest (28ä¸ªæµ‹è¯•)
â”œâ”€â”€ CommitTypeè¯†åˆ« (14ä¸ª)
â”‚   â”œâ”€â”€ featè¯†åˆ«
â”‚   â”œâ”€â”€ fixè¯†åˆ«
â”‚   â”œâ”€â”€ choreè¯†åˆ«
â”‚   â”œâ”€â”€ docsè¯†åˆ«
â”‚   â”œâ”€â”€ styleè¯†åˆ«
â”‚   â”œâ”€â”€ refactorè¯†åˆ«
â”‚   â”œâ”€â”€ testè¯†åˆ«
â”‚   â”œâ”€â”€ perfè¯†åˆ«
â”‚   â”œâ”€â”€ ciè¯†åˆ«
â”‚   â”œâ”€â”€ buildè¯†åˆ«
â”‚   â””â”€â”€ revertè¯†åˆ«
â”œâ”€â”€ ä½œç”¨åŸŸæå– (4ä¸ª)
â”œâ”€â”€ ç ´åæ€§å˜æ›´è¯†åˆ« (4ä¸ª)
â”œâ”€â”€ å¤šè¡Œæ¶ˆæ¯å¤„ç† (3ä¸ª)
â””â”€â”€ å¼‚å¸¸è¾“å…¥å¤„ç† (3ä¸ª)

VersionCalculatorTest (30ä¸ªæµ‹è¯•)
â”œâ”€â”€ ç‰ˆæœ¬è®¡ç®—é€»è¾‘ (12ä¸ª)
â”œâ”€â”€ å˜æ›´æ—¥å¿—ç”Ÿæˆ (8ä¸ª)
â”œâ”€â”€ ç©ºæäº¤åˆ—è¡¨å¤„ç† (3ä¸ª)
â””â”€â”€ ç»„åˆåœºæ™¯æµ‹è¯• (7ä¸ª)

VersionManagerTest (23ä¸ªæµ‹è¯•)
â”œâ”€â”€ ç‰ˆæœ¬è¯»å– (5ä¸ª)
â”œâ”€â”€ ç‰ˆæœ¬æ›´æ–° (6ä¸ª)
â”œâ”€â”€ ç‰ˆæœ¬å†å²ç®¡ç† (4ä¸ª)
â”œâ”€â”€ å‘å¸ƒé˜¶æ®µç®¡ç† (3ä¸ª)
â””â”€â”€ é…ç½®éªŒè¯ (5ä¸ª)

IconManagerTest (20ä¸ªæµ‹è¯•)
â”œâ”€â”€ å›¾æ ‡åˆ‡æ¢ (8ä¸ª)
â”œâ”€â”€ èµ„æºåˆå§‹åŒ– (4ä¸ª)
â”œâ”€â”€ é…ç½®ç®¡ç† (4ä¸ª)
â””â”€â”€ èµ„æºæ£€æŸ¥ (4ä¸ª)

IconManagerBoundaryTest (18ä¸ªæµ‹è¯•)
â”œâ”€â”€ æ–‡ä»¶ä¸å­˜åœ¨å¤„ç† (3ä¸ª)
â”œâ”€â”€ æ–‡ä»¶æŸåå¤„ç† (3ä¸ª)
â”œâ”€â”€ æ— æ•ˆå‚æ•°å¤„ç† (2ä¸ª)
â”œâ”€â”€ ç›®å½•æƒé™å¤„ç† (2ä¸ª)
â”œâ”€â”€ å¹¶å‘æ“ä½œ (2ä¸ª)
â”œâ”€â”€ ç‰¹æ®Šå­—ç¬¦å¤„ç† (2ä¸ª)
â”œâ”€â”€ å¤§æ–‡ä»¶å¤„ç† (2ä¸ª)
â””â”€â”€ å¯†åº¦ç›®å½•ç»“æ„ (2ä¸ª)

BackupManagerTest (18ä¸ªæµ‹è¯•)
â”œâ”€â”€ å¤‡ä»½åˆ›å»º (6ä¸ª)
â”œâ”€â”€ å¤‡ä»½æ¢å¤ (5ä¸ª)
â”œâ”€â”€ å¤‡ä»½æ¸…ç† (3ä¸ª)
â””â”€â”€ å¤‡ä»½åˆ—è¡¨ (4ä¸ª)

GradlePropertiesUpdaterTest (28ä¸ªæµ‹è¯•)
â”œâ”€â”€ ç‰ˆæœ¬æ›´æ–° (10ä¸ª)
â”œâ”€â”€ ç‰ˆæœ¬è¯»å– (8ä¸ª)
â”œâ”€â”€ é˜¶æ®µæ›´æ–° (4ä¸ª)
â”œâ”€â”€ é˜¶æ®µè¯»å– (3ä¸ª)
â””â”€â”€ è¾¹ç•Œæµ‹è¯• (3ä¸ª)

VersionSyncManagerTest (21ä¸ªæµ‹è¯•)
â”œâ”€â”€ æ¨¡å—å‘ç° (6ä¸ª)
â”œâ”€â”€ ç‰ˆæœ¬åŒæ­¥ (5ä¸ª)
â”œâ”€â”€ ç‰ˆæœ¬å’Œé˜¶æ®µåŒæ­¥ (3ä¸ª)
â”œâ”€â”€ ç‰ˆæœ¬ä¸€è‡´æ€§æ£€æŸ¥ (4ä¸ª)
â””â”€â”€ ç»“æœæ ¼å¼åŒ– (3ä¸ª)
```

---

**æŠ¥å‘Šç‰ˆæœ¬**: v1.0
**ç”Ÿæˆæ—¶é—´**: 2026-01-02
**å®¡æŸ¥è€…**: Test Explorer æ™ºèƒ½ä½“
**ä¸‹æ¬¡å®¡æŸ¥**: å»ºè®®åœ¨è¡¥å……å…³é”®æµ‹è¯•åé‡æ–°å®¡æŸ¥ï¼ˆ1å‘¨åï¼‰

---

## å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ |
|------|------|----------|
| v1.0 | 2026-01-02 | åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæˆå…¨é¢æµ‹è¯•å®¡æŸ¥ |
