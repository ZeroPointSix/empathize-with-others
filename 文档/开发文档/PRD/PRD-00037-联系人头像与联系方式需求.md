# PRD-00037: 联系人头像与联系方式需求

## 需求背景

**需求来源**: 开发者个人提出。

**当前问题**:
- 新建联系人流程仅支持默认头像，缺少头像上传与更换能力
- 联系方式录入/展示路径不清晰，详情页信息不完整

## 需求目标

1. 新建/编辑联系人时支持上传头像（相册/拍照），并可多次更换
2. 在联系人详情页基础信息区展示联系方式（自由文本、单行）
3. 头像与联系方式均仅本地保存，不做云同步或导出

## 用户场景

1. 用户新建联系人，填写联系方式并保存
2. 用户在联系人详情页查看联系方式（为空则显示占位文本）
3. 用户进入编辑页上传头像，支持拍照/相册选择并裁剪
4. 用户后续可再次更换头像

## 功能范围

**包含**:
- 联系方式单行输入（自由文本，不做格式校验）
- 详情页基础信息区展示联系方式
- 头像上传：相册/拍照、裁剪/缩放、圆形展示
- 默认头像：姓名首字 + 随机背景色
- 失败提示：权限或上传失败时提示原因

**不包含**:
- 联系方式点击跳转（电话/微信/邮箱链接）
- 云同步/导出能力

## 功能设计

### 1) 联系方式

**输入**:
- 新建联系人页：单行文本输入
- 编辑联系人页：可修改
- 不限制格式，用户自行输入

**展示**:
- 联系人详情页基础信息区展示“联系方式”字段
- 为空时展示占位文本（文案待定）

**交互**:
- 无跳转、无复制、无校验提示

### 2) 头像

**默认头像**:
- 使用姓名首字
- 背景色随机生成

**上传入口**:
- 联系人编辑页内更换头像
- 入口行为对齐“微信头像”体验

**上传方式**:
- 相册选择
- 拍照上传

**裁剪/显示**:
- 支持裁剪/缩放
- 头像统一圆形显示

**失败处理**:
- 相册/相机权限拒绝或上传失败时，弹出提示并说明原因

## 交互流程

### 新建联系人
1. 进入新建联系人页
2. 填写姓名与联系方式
3. 未上传头像则展示默认头像
4. 保存联系人

### 编辑联系人
1. 进入联系人详情页
2. 点击“编辑”进入编辑页
3. 修改联系方式或更换头像（相册/拍照 → 裁剪）
4. 保存后更新详情页展示

## 数据设计（概念级）

**新增字段**:
- 联系方式：单行文本字段
- 头像：本地图片资源引用（本地路径或URI）
- 默认头像颜色：随机色（仅用于默认显示）

> 字段命名与数据表映射待技术设计确认。

## 验收标准

1. 新建联系人可填写联系方式，保存后详情页可见
2. 联系方式为空时展示占位文本
3. 头像支持相册/拍照上传，支持裁剪/缩放
4. 头像可多次更换且立即生效
5. 默认头像为姓名首字 + 随机背景色
6. 权限拒绝/上传失败时提示原因
7. 数据仅本地保存，无同步与导出

## 非功能需求

1. **性能**: 头像加载无明显卡顿
2. **兼容性**: 支持当前应用最低版本
3. **稳定性**: 上传失败不影响联系人信息保存

## 实施计划

**同一版本内交付，执行顺序**:
1. 先实现联系方式输入与详情页展示
2. 再实现头像上传与更换

## 风险评估

**低风险**:
- 联系方式为纯文本，不涉及格式校验
- 头像为本地图片，逻辑清晰

**潜在问题**:
- 相机/相册权限拒绝导致功能不可用
- 部分设备裁剪流程兼容性差

## 相关文档

- PRD-00020-联系人详情页优化.md（基础信息区设计背景）

---

**创建时间**: 2026-01-20  
**创建者**: Codex  
**优先级**: 中  
**状态**: 待评审
