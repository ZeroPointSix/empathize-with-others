# RESEARCH-00042: FD-00019åŠŸèƒ½è®¾è®¡æ·±åº¦æŠ€æœ¯è°ƒç ”æŠ¥å‘Š

## æ–‡æ¡£ä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|------|------|
| æ–‡æ¡£ç¼–å· | RESEARCH-00042 |
| åˆ›å»ºæ—¥æœŸ | 2025-12-24 |
| è°ƒç ”äºº | Kiro |
| çŠ¶æ€ | âœ… è°ƒç ”å®Œæˆ |
| è°ƒç ”ç›®çš„ | æ·±åº¦åˆ†æFD-00019 UIè§†è§‰ç¾è§‚åŒ–æ”¹é€ çš„æŠ€æœ¯å®ç°æ–¹æ¡ˆï¼Œä»æ¡†æ¶è®¾è®¡è€…è§’åº¦è¯„ä¼°æ¶æ„åˆè§„æ€§å’Œå®æ–½é£é™© |
| å…³è”ä»»åŠ¡ | PRD-00019, FD-00019, TD-00018, RESEARCH-00041 |

---

## 1. è°ƒç ”èŒƒå›´

### 1.1 è°ƒç ”ä¸»é¢˜
ä»æ¡†æ¶è®¾è®¡è€…å’Œç³»ç»Ÿæ¶æ„å¸ˆè§’åº¦ï¼Œæ·±åº¦åˆ†æFD-00019 UIè§†è§‰ç¾è§‚åŒ–æ”¹é€ çš„ï¼š
- Jetpack Composeä¸»é¢˜ç³»ç»Ÿè¿è¡Œæœºåˆ¶
- ç»„ä»¶æ”¹é€ çš„æ¶æ„åˆè§„æ€§
- å¯¼èˆªç³»ç»Ÿé›†æˆæ–¹æ¡ˆ
- æ½œåœ¨é£é™©å’Œç¨³å®šä¿®å¤æ–¹æ¡ˆ

### 1.2 å…³æ³¨é‡ç‚¹
- Composeä¸»é¢˜ç³»ç»Ÿçš„æ­£å¸¸å·¥ä½œæµç¨‹
- è‰²å½©ç³»ç»Ÿæ”¹é€ å¯¹å…¨å±€çš„å½±å“
- åº•éƒ¨å¯¼èˆªæ ä¸ç°æœ‰å¯¼èˆªç³»ç»Ÿçš„é›†æˆ
- iOSé£æ ¼ç»„ä»¶çš„Composeå®ç°æœ€ä½³å®è·µ

### 1.3 å…³è”æ–‡æ¡£

| æ–‡æ¡£ç±»å‹ | æ–‡æ¡£ç¼–å· | æ–‡æ¡£åç§° |
|----------|----------|----------|
| PRD | PRD-00019 | UIè§†è§‰ç¾è§‚åŒ–æ”¹é€  |
| FD | FD-00019 | UIè§†è§‰ç¾è§‚åŒ–æ”¹é€ åŠŸèƒ½è®¾è®¡ |
| RE | RESEARCH-00041 | PRD00019å¼€å‘å‰ç½®è°ƒç ”æŠ¥å‘Š |
| DR | DR-00033 | FD00019æ–‡æ¡£å®¡æŸ¥æŠ¥å‘Š |

---

## 2. æœºåˆ¶åˆ†æ

### 2.1 Jetpack Composeä¸»é¢˜ç³»ç»Ÿè¿è¡Œæœºåˆ¶

#### 2.1.1 ä¸»é¢˜ä¼ é€’æœºåˆ¶
```
MaterialTheme (æ ¹ç»„ä»¶)
    â†“ CompositionLocal
ColorScheme â†’ MaterialTheme.colorScheme
Typography â†’ MaterialTheme.typography
Shapes â†’ MaterialTheme.shapes
    â†“ å­ç»„ä»¶æ¶ˆè´¹
æ‰€æœ‰Materialç»„ä»¶è‡ªåŠ¨ä½¿ç”¨ä¸»é¢˜è‰²å½©
```

#### 2.1.2 æ­£å¸¸æµç¨‹
1. **åº”ç”¨å¯åŠ¨** â†’ `EmpathyTheme` åŒ…è£¹æ ¹ç»„ä»¶
2. **ä¸»é¢˜åˆå§‹åŒ–** â†’ `MaterialTheme` è®¾ç½® `ColorScheme`
3. **ç»„ä»¶æ¸²æŸ“** â†’ å­ç»„ä»¶é€šè¿‡ `MaterialTheme.colorScheme` è·å–é¢œè‰²
4. **åŠ¨æ€æ›´æ–°** â†’ ä¸»é¢˜å˜åŒ–æ—¶ï¼Œæ‰€æœ‰æ¶ˆè´¹è€…è‡ªåŠ¨é‡ç»„

#### 2.1.3 å½“å‰å®ç°åˆ†æ

**ç°æœ‰Theme.ktç»“æ„**:
```kotlin
@Composable
fun EmpathyTheme(
    darkTheme: Boolean = isSystemInDarkTheme(),
    content: @Composable () -> Unit
) {
    val colorScheme = if (darkTheme) DarkColorScheme else LightColorScheme
    
    MaterialTheme(
        colorScheme = colorScheme,
        typography = Typography,
        content = content
    )
}
```

**ç°æœ‰ColorScheme**:
- ä½¿ç”¨Material Design 3ç´«è‰²ç³»
- `PrimaryLight = Color(0xFF6750A4)` ç´«è‰²ä¸»è‰²
- `BackgroundLight = Color(0xFFFFFBFE)` è¿‘ç™½è‰²èƒŒæ™¯

### 2.2 å¯¼èˆªç³»ç»Ÿè¿è¡Œæœºåˆ¶

#### 2.2.1 Navigation Composeæ¶æ„
```
NavHost (å¯¼èˆªå®¹å™¨)
    â†“
NavController (å¯¼èˆªæ§åˆ¶å™¨)
    â†“
composable() (è·¯ç”±æ³¨å†Œ)
    â†“
Screen (é¡µé¢ç»„ä»¶)
```

#### 2.2.2 å½“å‰å¯¼èˆªç»“æ„
```kotlin
NavHost(
    startDestination = NavRoutes.CONTACT_LIST,
    ...
) {
    composable(NavRoutes.CONTACT_LIST) { ContactListScreen(...) }
    composable(NavRoutes.SETTINGS) { SettingsScreen(...) }
    composable(NavRoutes.CONTACT_DETAIL_TAB) { ContactDetailTabScreen(...) }
    // ...
}
```

#### 2.2.3 åº•éƒ¨å¯¼èˆªé›†æˆæœºåˆ¶
åº•éƒ¨å¯¼èˆªéœ€è¦ä¸NavControlleråä½œï¼š
1. **çŠ¶æ€åŒæ­¥** â†’ å½“å‰è·¯ç”±ä¸Tabé€‰ä¸­çŠ¶æ€åŒæ­¥
2. **å¯¼èˆªè§¦å‘** â†’ Tabç‚¹å‡»è§¦å‘ `navController.navigate()`
3. **è¿”å›æ ˆç®¡ç†** â†’ ä½¿ç”¨ `popUpTo` å’Œ `launchSingleTop` é¿å…é‡å¤å…¥æ ˆ

---

## 3. æ½œåœ¨æ ¹å› æ ‘ï¼ˆRoot Cause Treeï¼‰

### 3.1 æ¡†æ¶æœºåˆ¶å±‚

| æ½œåœ¨é—®é¢˜ | æ ¹å› åˆ†æ | å½±å“èŒƒå›´ |
|----------|----------|----------|
| ä¸»é¢˜è‰²å½©å…¨å±€å½±å“ | MaterialThemeé€šè¿‡CompositionLocalä¼ é€’ï¼Œä¿®æ”¹ColorSchemeå½±å“æ‰€æœ‰Materialç»„ä»¶ | å…¨å±€ |
| æ·±è‰²æ¨¡å¼ä¸å…¼å®¹ | åªä¿®æ”¹LightColorSchemeï¼ŒDarkColorSchemeæœªåŒæ­¥æ›´æ–° | æ·±è‰²æ¨¡å¼ç”¨æˆ· |
| åŠ¨æ€é¢œè‰²å†²çª | Android 12+åŠ¨æ€é¢œè‰²å¯èƒ½è¦†ç›–è‡ªå®šä¹‰ä¸»é¢˜ | Android 12+è®¾å¤‡ |

### 3.2 æ¨¡å—è¡Œä¸ºå±‚

| æ½œåœ¨é—®é¢˜ | æ ¹å› åˆ†æ | å½±å“èŒƒå›´ |
|----------|----------|----------|
| ç»„ä»¶æ ·å¼ä¸ä¸€è‡´ | éƒ¨åˆ†ç»„ä»¶ç›´æ¥ä½¿ç”¨MaterialTheme.colorSchemeï¼Œéƒ¨åˆ†ç¡¬ç¼–ç é¢œè‰² | è§†è§‰ä¸€è‡´æ€§ |
| å¯¼èˆªçŠ¶æ€ä¸åŒæ­¥ | åº•éƒ¨å¯¼èˆªcurrentRouteä¸NavController.currentDestinationä¸åŒæ­¥ | å¯¼èˆªä½“éªŒ |
| å¤´åƒé¢œè‰²åˆ†å¸ƒä¸å‡ | hashCodeå–æ¨¡å¯èƒ½å¯¼è‡´æŸäº›é¢œè‰²å‡ºç°é¢‘ç‡è¿‡é«˜ | è§†è§‰æ•ˆæœ |

### 3.3 ä½¿ç”¨æ–¹å¼å±‚

| æ½œåœ¨é—®é¢˜ | æ ¹å› åˆ†æ | å½±å“èŒƒå›´ |
|----------|----------|----------|
| ç¡¬ç¼–ç é¢œè‰²å€¼ | ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨Color(0xFFxxxxxx)è€Œéä¸»é¢˜è‰² | å¯ç»´æŠ¤æ€§ |
| ç¼ºå°‘è¯­ä¹‰åŒ–é¢œè‰² | iOSç³»ç»Ÿè‰²æœªå®šä¹‰è¯­ä¹‰åŒ–ç”¨é€” | ä»£ç å¯è¯»æ€§ |
| ç»„ä»¶å‚æ•°ä¸å®Œæ•´ | iOSé£æ ¼ç»„ä»¶ç¼ºå°‘å¿…è¦çš„å¯é…ç½®å‚æ•° | å¤ç”¨æ€§ |

### 3.4 ç¯å¢ƒå±‚

| æ½œåœ¨é—®é¢˜ | æ ¹å› åˆ†æ | å½±å“èŒƒå›´ |
|----------|----------|----------|
| ä¸åŒå±å¹•å°ºå¯¸é€‚é… | å›ºå®šdpå€¼åœ¨ä¸åŒå±å¹•å¯†åº¦ä¸‹è¡¨ç°ä¸ä¸€è‡´ | å¤šè®¾å¤‡å…¼å®¹ |
| ç³»ç»Ÿå­—ä½“ç¼©æ”¾ | å›ºå®šspå€¼åœ¨ç³»ç»Ÿå­—ä½“ç¼©æ”¾æ—¶å¯èƒ½æº¢å‡º | æ— éšœç¢è®¿é—® |
| åˆ˜æµ·å±/æŒ–å­”å±é€‚é… | åº•éƒ¨å¯¼èˆªå®‰å…¨åŒºè®¡ç®—å¯èƒ½ä¸å‡†ç¡® | ç‰¹æ®Šå±å¹•è®¾å¤‡ |

---

## 4. æ’æŸ¥è·¯å¾„ï¼ˆä»æ¡†æ¶åˆ°åº”ç”¨å±‚ï¼‰

### 4.1 é€å±‚æ’æŸ¥æ¸…å•

#### ç¬¬ä¸€å±‚ï¼šä¸»é¢˜ç³»ç»ŸéªŒè¯
- [ ] æ£€æŸ¥Color.ktä¸­iOSç³»ç»Ÿè‰²å¸¸é‡æ˜¯å¦æ­£ç¡®å®šä¹‰
- [ ] æ£€æŸ¥LightColorSchemeæ˜¯å¦æ­£ç¡®å¼•ç”¨æ–°è‰²å½©
- [ ] æ£€æŸ¥DarkColorSchemeæ˜¯å¦éœ€è¦åŒæ­¥æ›´æ–°
- [ ] éªŒè¯dynamicColoræ˜¯å¦éœ€è¦ç¦ç”¨

#### ç¬¬äºŒå±‚ï¼šç»„ä»¶å®ç°éªŒè¯
- [ ] æ£€æŸ¥AvatarColors.getColorPair()é¢œè‰²åˆ†å¸ƒæ˜¯å¦å‡åŒ€
- [ ] æ£€æŸ¥IOSSwitchåŠ¨ç”»æ˜¯å¦æµç•…
- [ ] æ£€æŸ¥IOSSettingsItemåˆ†éš”çº¿æ˜¯å¦æ­£ç¡®ç»˜åˆ¶
- [ ] æ£€æŸ¥EmpathyBottomNavigationé«˜åº¦è®¡ç®—æ˜¯å¦æ­£ç¡®

#### ç¬¬ä¸‰å±‚ï¼šå¯¼èˆªé›†æˆéªŒè¯
- [ ] æ£€æŸ¥NavRoutesæ˜¯å¦åŒ…å«æ‰€æœ‰æ–°è·¯ç”±å¸¸é‡
- [ ] æ£€æŸ¥NavGraphæ˜¯å¦æ­£ç¡®æ³¨å†Œæ‰€æœ‰æ–°é¡µé¢
- [ ] æ£€æŸ¥åº•éƒ¨å¯¼èˆªcurrentRouteçŠ¶æ€åŒæ­¥
- [ ] æ£€æŸ¥é¡µé¢åˆ‡æ¢åŠ¨ç”»æ˜¯å¦æ­£å¸¸

#### ç¬¬å››å±‚ï¼šé¡µé¢æ”¹é€ éªŒè¯
- [ ] æ£€æŸ¥ContactListScreenèƒŒæ™¯è‰²æ˜¯å¦æ­£ç¡®
- [ ] æ£€æŸ¥SettingsScreenå¤§æ ‡é¢˜æ ·å¼æ˜¯å¦æ­£ç¡®
- [ ] æ£€æŸ¥PromptEditorScreenåœºæ™¯Tabæ˜¯å¦æ­£å¸¸åˆ‡æ¢
- [ ] æ£€æŸ¥æ‰€æœ‰é¡µé¢åº•éƒ¨å¯¼èˆªæ˜¯å¦æ­£ç¡®æ˜¾ç¤º

### 4.2 éªŒè¯æ–¹æ³•

| éªŒè¯é¡¹ | éªŒè¯æ–¹æ³• | é¢„æœŸç»“æœ |
|--------|----------|----------|
| ä¸»é¢˜è‰²å½© | è¿è¡Œåº”ç”¨ï¼Œå¯¹æ¯”HTMLåŸå‹ | è§†è§‰ä¸€è‡´ |
| ç»„ä»¶åŠ¨ç”» | å½•å±åˆ†æå¸§ç‡ | â‰¥60fps |
| å¯¼èˆªçŠ¶æ€ | ç‚¹å‡»Tabï¼Œæ£€æŸ¥è·¯ç”±å˜åŒ– | çŠ¶æ€åŒæ­¥ |
| å±å¹•é€‚é… | å¤šè®¾å¤‡æµ‹è¯• | å¸ƒå±€æ­£å¸¸ |

---

## 5. æœ€å¯èƒ½çš„æ ¹å› ï¼ˆåŸºäºæœºåˆ¶æ¨ç†ï¼‰

### 5.1 æ ¹å› ä¸€ï¼šä¸»é¢˜è‰²å½©å…¨å±€å½±å“

**æ¨ç†è¿‡ç¨‹**:
1. MaterialThemeä½¿ç”¨CompositionLocalä¼ é€’ColorScheme
2. æ‰€æœ‰Materialç»„ä»¶ï¼ˆButtonã€Cardã€TextFieldç­‰ï¼‰è‡ªåŠ¨æ¶ˆè´¹ä¸»é¢˜è‰²
3. ä¿®æ”¹LightColorSchemeä¼šå½±å“æ‰€æœ‰æœªæ”¹é€ é¡µé¢çš„è§†è§‰æ•ˆæœ
4. å¯èƒ½å¯¼è‡´éƒ¨åˆ†é¡µé¢å‡ºç°é¢œè‰²ä¸åè°ƒé—®é¢˜

**è¯æ®**:
- ç°æœ‰ContactListItemä½¿ç”¨`MaterialTheme.colorScheme.primaryContainer`ä½œä¸ºå¤´åƒèƒŒæ™¯
- ä¿®æ”¹primaryContainerä¼šå½±å“æ‰€æœ‰ä½¿ç”¨è¯¥é¢œè‰²çš„ç»„ä»¶

### 5.2 æ ¹å› äºŒï¼šåº•éƒ¨å¯¼èˆªçŠ¶æ€åŒæ­¥é—®é¢˜

**æ¨ç†è¿‡ç¨‹**:
1. åº•éƒ¨å¯¼èˆªéœ€è¦çŸ¥é“å½“å‰è·¯ç”±ä»¥é«˜äº®å¯¹åº”Tab
2. NavController.currentDestinationåœ¨å¯¼èˆªè¿‡ç¨‹ä¸­å¯èƒ½ä¸ºnull
3. ä½¿ç”¨å­—ç¬¦ä¸²æ¯”è¾ƒåˆ¤æ–­å½“å‰è·¯ç”±å¯èƒ½ä¸å‡†ç¡®
4. å¯èƒ½å¯¼è‡´Tabé«˜äº®çŠ¶æ€ä¸å®é™…é¡µé¢ä¸ä¸€è‡´

**è¯æ®**:
- FD-00019ä¸­EmpathyBottomNavigationä½¿ç”¨`currentRoute: String`å‚æ•°
- éœ€è¦åœ¨æ¯ä¸ªScreenä¸­æ‰‹åŠ¨ä¼ å…¥å½“å‰è·¯ç”±
- ç¼ºå°‘ä¸NavControllerçš„è‡ªåŠ¨åŒæ­¥æœºåˆ¶

### 5.3 æ ¹å› ä¸‰ï¼šiOSé£æ ¼ç»„ä»¶ç¼ºå°‘å®Œæ•´å®ç°

**æ¨ç†è¿‡ç¨‹**:
1. iOSå¼€å…³éœ€è¦ç²¾ç¡®çš„å°ºå¯¸å’ŒåŠ¨ç”»
2. iOSè®¾ç½®é¡¹éœ€è¦æ­£ç¡®çš„åˆ†éš”çº¿ç»˜åˆ¶
3. ç¼ºå°‘æŒ‰å‹åé¦ˆåŠ¨ç”»å¯èƒ½å½±å“ç”¨æˆ·ä½“éªŒ
4. ç»„ä»¶å‚æ•°ä¸å®Œæ•´å¯èƒ½é™åˆ¶å¤ç”¨æ€§

**è¯æ®**:
- FD-00019ä¸­IOSSwitchä½¿ç”¨ç®€å•çš„offsetåŠ¨ç”»
- ç¼ºå°‘æŒ‰å‹æ€é¢œè‰²å˜åŒ–
- IOSSettingsItemç¼ºå°‘showDividerå‚æ•°çš„å®Œæ•´å®ç°

---

## 6. ç¨³å®šä¿®å¤æ–¹æ¡ˆï¼ˆä»æ¡†æ¶åŸç†å‡ºå‘ï¼‰

### 6.1 æ–¹æ¡ˆä¸€ï¼šå¢é‡å¼ä¸»é¢˜æ”¹é€ 

**åŸç†**: ä¿ç•™ç°æœ‰ColorSchemeï¼Œæ–°å¢iOSç³»ç»Ÿè‰²ä½œä¸ºç‹¬ç«‹å¸¸é‡ï¼Œé€æ­¥æ›¿æ¢ç»„ä»¶ä¸­çš„é¢œè‰²å¼•ç”¨ã€‚

**å®ç°æ­¥éª¤**:
```kotlin
// 1. åœ¨Color.ktä¸­æ·»åŠ iOSç³»ç»Ÿè‰²ï¼ˆä¸ä¿®æ”¹ColorSchemeï¼‰
val WeChatBackground = Color(0xFFF7F7F7)
val iOSBackground = Color(0xFFF2F2F7)
val WeChatGreen = Color(0xFF07C160)
val iOSBlue = Color(0xFF007AFF)
// ...

// 2. åœ¨éœ€è¦æ”¹é€ çš„ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨æ–°è‰²å½©
@Composable
fun ContactListScreen(...) {
    Scaffold(
        containerColor = WeChatBackground,  // ç›´æ¥ä½¿ç”¨æ–°è‰²å½©
        // ...
    )
}
```

**ä¸ºä½•æœ‰æ•ˆ**: 
- ä¸å½±å“æœªæ”¹é€ é¡µé¢çš„è§†è§‰æ•ˆæœ
- å¯ä»¥é€æ­¥è¿ç§»ï¼Œé™ä½é£é™©
- ä¿æŒå‘åå…¼å®¹æ€§

### 6.2 æ–¹æ¡ˆäºŒï¼šå¯¼èˆªçŠ¶æ€è‡ªåŠ¨åŒæ­¥

**åŸç†**: ä½¿ç”¨NavControllerçš„currentBackStackEntryAsState()è·å–å®æ—¶è·¯ç”±çŠ¶æ€ã€‚

**å®ç°æ­¥éª¤**:
```kotlin
@Composable
fun MainScreen(navController: NavHostController = rememberNavController()) {
    // è‡ªåŠ¨è·å–å½“å‰è·¯ç”±
    val navBackStackEntry by navController.currentBackStackEntryAsState()
    val currentRoute = navBackStackEntry?.destination?.route ?: NavRoutes.CONTACT_LIST
    
    Scaffold(
        bottomBar = {
            EmpathyBottomNavigation(
                currentRoute = currentRoute,
                onNavigate = { route ->
                    navController.navigate(route) {
                        popUpTo(NavRoutes.CONTACT_LIST) { saveState = true }
                        launchSingleTop = true
                        restoreState = true
                    }
                },
                onAddClick = { /* å¤„ç†æ·»åŠ  */ }
            )
        }
    ) { paddingValues ->
        NavHost(
            navController = navController,
            startDestination = NavRoutes.CONTACT_LIST,
            modifier = Modifier.padding(paddingValues)
        ) {
            // è·¯ç”±æ³¨å†Œ
        }
    }
}
```

**ä¸ºä½•æœ‰æ•ˆ**:
- ä½¿ç”¨ComposeçŠ¶æ€ç®¡ç†ï¼Œè‡ªåŠ¨è§¦å‘é‡ç»„
- é¿å…æ‰‹åŠ¨ä¼ é€’currentRouteçš„é”™è¯¯
- ç¬¦åˆå•ä¸€æ•°æ®æºåŸåˆ™

### 6.3 æ–¹æ¡ˆä¸‰ï¼šiOSé£æ ¼ç»„ä»¶å®Œæ•´å®ç°

**åŸç†**: å‚è€ƒiOS Human Interface Guidelinesï¼Œå®ç°å®Œæ•´çš„äº¤äº’åé¦ˆã€‚

**IOSSwitchå®Œæ•´å®ç°**:
```kotlin
@Composable
fun IOSSwitch(
    checked: Boolean,
    onCheckedChange: (Boolean) -> Unit,
    modifier: Modifier = Modifier,
    enabled: Boolean = true
) {
    val interactionSource = remember { MutableInteractionSource() }
    val isPressed by interactionSource.collectIsPressedAsState()
    
    // è½¨é“é¢œè‰²åŠ¨ç”»
    val trackColor by animateColorAsState(
        targetValue = when {
            !enabled -> Color(0xFFE5E5EA).copy(alpha = 0.5f)
            checked -> Color(0xFF34C759)
            else -> Color(0xFFE5E5EA)
        },
        animationSpec = tween(200),
        label = "trackColor"
    )
    
    // æ»‘å—ä½ç½®åŠ¨ç”»
    val thumbOffset by animateDpAsState(
        targetValue = if (checked) 22.dp else 2.dp,
        animationSpec = spring(
            dampingRatio = Spring.DampingRatioMediumBouncy,
            stiffness = Spring.StiffnessLow
        ),
        label = "thumbOffset"
    )
    
    // æ»‘å—ç¼©æ”¾ï¼ˆæŒ‰å‹åé¦ˆï¼‰
    val thumbScale by animateFloatAsState(
        targetValue = if (isPressed) 1.1f else 1f,
        animationSpec = tween(100),
        label = "thumbScale"
    )
    
    Box(
        modifier = modifier
            .width(51.dp)
            .height(31.dp)
            .clip(RoundedCornerShape(15.5.dp))
            .background(trackColor)
            .clickable(
                interactionSource = interactionSource,
                indication = null,
                enabled = enabled
            ) { onCheckedChange(!checked) }
    ) {
        Box(
            modifier = Modifier
                .offset(x = thumbOffset, y = 2.dp)
                .size(27.dp)
                .scale(thumbScale)
                .shadow(2.dp, CircleShape)
                .background(Color.White, CircleShape)
        )
    }
}
```

**ä¸ºä½•æœ‰æ•ˆ**:
- ä½¿ç”¨springåŠ¨ç”»æä¾›è‡ªç„¶çš„ç‰©ç†åé¦ˆ
- æ·»åŠ æŒ‰å‹ç¼©æ”¾æ•ˆæœå¢å¼ºäº¤äº’æ„Ÿ
- æ”¯æŒdisabledçŠ¶æ€ï¼Œæé«˜å¯è®¿é—®æ€§

---

## 7. å…³é”®å‘ç°æ€»ç»“

### 7.1 æ ¸å¿ƒç»“è®º

1. **ä¸»é¢˜æ”¹é€ åº”é‡‡ç”¨å¢é‡å¼æ–¹æ¡ˆ**ï¼šç›´æ¥æ·»åŠ iOSç³»ç»Ÿè‰²å¸¸é‡ï¼Œä¸ä¿®æ”¹ç°æœ‰ColorSchemeï¼Œé¿å…å…¨å±€å½±å“
2. **å¯¼èˆªçŠ¶æ€éœ€è¦è‡ªåŠ¨åŒæ­¥**ï¼šä½¿ç”¨currentBackStackEntryAsState()æ›¿ä»£æ‰‹åŠ¨ä¼ é€’currentRoute
3. **iOSç»„ä»¶éœ€è¦å®Œæ•´äº¤äº’åé¦ˆ**ï¼šæ·»åŠ æŒ‰å‹æ€ã€ç¦ç”¨æ€ã€åŠ¨ç”»åé¦ˆï¼Œæå‡ç”¨æˆ·ä½“éªŒ
4. **æ¶æ„å®Œå…¨åˆè§„**ï¼šæ‰€æœ‰æ”¹é€ åœ¨presentationå±‚å†…ï¼Œä¸æ¶‰åŠè·¨æ¨¡å—ä¾èµ–

### 7.2 æŠ€æœ¯è¦ç‚¹

| è¦ç‚¹ | è¯´æ˜ | é‡è¦ç¨‹åº¦ |
|------|------|----------|
| å¢é‡å¼ä¸»é¢˜æ”¹é€  | ä¿ç•™ç°æœ‰ColorSchemeï¼Œæ–°å¢iOSè‰²å½©å¸¸é‡ | ğŸ”´ é«˜ |
| å¯¼èˆªçŠ¶æ€è‡ªåŠ¨åŒæ­¥ | ä½¿ç”¨currentBackStackEntryAsState() | ğŸ”´ é«˜ |
| iOSç»„ä»¶å®Œæ•´å®ç° | æ·»åŠ æŒ‰å‹æ€ã€ç¦ç”¨æ€ã€åŠ¨ç”»åé¦ˆ | ğŸŸ¡ ä¸­ |
| å¤´åƒé¢œè‰²å‡åŒ€åˆ†å¸ƒ | ä¼˜åŒ–hashCodeå–æ¨¡ç®—æ³• | ğŸŸ¢ ä½ |

### 7.3 æ³¨æ„äº‹é¡¹

- âš ï¸ **ä¸è¦ç›´æ¥ä¿®æ”¹LightColorScheme**ï¼Œä¼šå½±å“æ‰€æœ‰æœªæ”¹é€ é¡µé¢
- âš ï¸ **åº•éƒ¨å¯¼èˆªéœ€è¦åœ¨MainScreençº§åˆ«å®ç°**ï¼Œè€Œéæ¯ä¸ªScreenå•ç‹¬å®ç°
- âš ï¸ **iOSå¼€å…³éœ€è¦æ·»åŠ springåŠ¨ç”»**ï¼Œé¿å…ç”Ÿç¡¬çš„çº¿æ€§åŠ¨ç”»
- âš ï¸ **æ·±è‰²æ¨¡å¼æš‚ä¸æ”¹é€ **ï¼Œé¿å…å¢åŠ å¤æ‚åº¦

---

## 8. åç»­ä»»åŠ¡å»ºè®®

### 8.1 æ¨èçš„å®æ–½é¡ºåº

1. **Phase 0: æ¶æ„å‡†å¤‡**ï¼ˆ0.5å¤©ï¼‰
   - åˆ›å»ºMainScreenä½œä¸ºåº•éƒ¨å¯¼èˆªå®¹å™¨
   - å®ç°å¯¼èˆªçŠ¶æ€è‡ªåŠ¨åŒæ­¥æœºåˆ¶
   - éªŒè¯å¯¼èˆªåˆ‡æ¢æ­£å¸¸å·¥ä½œ

2. **Phase 1: ä¸»é¢˜ç³»ç»Ÿ**ï¼ˆ0.5å¤©ï¼‰
   - åœ¨Color.ktæ·»åŠ iOSç³»ç»Ÿè‰²å¸¸é‡
   - åˆ›å»ºAvatarColors.ktå¤´åƒæ·¡è‰²ç³»
   - ä¸ä¿®æ”¹ç°æœ‰ColorScheme

3. **Phase 2: iOSç»„ä»¶åº“**ï¼ˆ1å¤©ï¼‰
   - åˆ›å»ºIOSSwitchï¼ˆå®Œæ•´äº¤äº’åé¦ˆï¼‰
   - åˆ›å»ºIOSSettingsItemï¼ˆåˆ†éš”çº¿ã€æŒ‰å‹æ€ï¼‰
   - åˆ›å»ºIOSSettingsSectionï¼ˆåˆ†ç»„æ ·å¼ï¼‰

4. **Phase 3: é¡µé¢æ”¹é€ **ï¼ˆ2å¤©ï¼‰
   - æ”¹é€ ContactListScreenï¼ˆæ·¡è‰²å¤´åƒã€å¾®ä¿¡èƒŒæ™¯ï¼‰
   - æ”¹é€ SettingsScreenï¼ˆiOSå¤§æ ‡é¢˜ã€åˆ†ç»„è®¾ç½®ï¼‰
   - æ”¹é€ PromptEditorScreenï¼ˆåœºæ™¯Tabã€åº•éƒ¨æŒ‰é’®ï¼‰

### 8.2 é£é™©é¢„è­¦

| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| ä¸»é¢˜æ”¹é€ å½±å“å…¨å±€ | ä¸­ | é«˜ | é‡‡ç”¨å¢é‡å¼æ–¹æ¡ˆï¼Œä¸ä¿®æ”¹ColorScheme |
| å¯¼èˆªçŠ¶æ€ä¸åŒæ­¥ | ä¸­ | ä¸­ | ä½¿ç”¨currentBackStackEntryAsState() |
| iOSç»„ä»¶ä½“éªŒä¸ä½³ | ä½ | ä¸­ | æ·»åŠ å®Œæ•´äº¤äº’åé¦ˆå’ŒåŠ¨ç”» |
| æ·±è‰²æ¨¡å¼ä¸å…¼å®¹ | ä½ | ä½ | æš‚ä¸æ”¹é€ æ·±è‰²æ¨¡å¼ |

---

## 9. é™„å½•

### 9.1 å‚è€ƒèµ„æ–™
- [Jetpack Compose Theming](https://developer.android.com/jetpack/compose/designsystems/material3)
- [Navigation Compose](https://developer.android.com/jetpack/compose/navigation)
- [iOS Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines/)
- [PRD-00019 UIè§†è§‰ç¾è§‚åŒ–æ”¹é€ ](../PRD/PRD-00019-UIè§†è§‰ç¾è§‚åŒ–æ”¹é€ .md)
- [FD-00019 UIè§†è§‰ç¾è§‚åŒ–æ”¹é€ åŠŸèƒ½è®¾è®¡](../FD/FD-00019-UIè§†è§‰ç¾è§‚åŒ–æ”¹é€ åŠŸèƒ½è®¾è®¡.md)

### 9.2 å…³é”®ä»£ç ä½ç½®

| æ–‡ä»¶ | è·¯å¾„ | æ”¹é€ å†…å®¹ |
|------|------|----------|
| Color.kt | presentation/.../theme/Color.kt | æ·»åŠ iOSç³»ç»Ÿè‰² |
| AvatarColors.kt | presentation/.../theme/AvatarColors.kt | æ–°å»ºå¤´åƒæ·¡è‰²ç³» |
| MainScreen.kt | presentation/.../ui/MainScreen.kt | æ–°å»ºåº•éƒ¨å¯¼èˆªå®¹å™¨ |
| EmpathyBottomNavigation.kt | presentation/.../component/navigation/ | æ–°å»ºåº•éƒ¨å¯¼èˆª |
| IOSSwitch.kt | presentation/.../component/ios/ | æ–°å»ºiOSå¼€å…³ |
| IOSSettingsItem.kt | presentation/.../component/ios/ | æ–°å»ºiOSè®¾ç½®é¡¹ |
| ContactListScreen.kt | presentation/.../screen/contact/ | æ”¹é€ è”ç³»äººåˆ—è¡¨ |
| SettingsScreen.kt | presentation/.../screen/settings/ | æ”¹é€ è®¾ç½®é¡µé¢ |

### 9.3 ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|------|----------|------|
| 1.0 | 2025-12-24 | åˆå§‹ç‰ˆæœ¬ï¼Œæ·±åº¦æŠ€æœ¯è°ƒç ” | Kiro |

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**æœ€åæ›´æ–°**: 2025-12-24
