# TDD-00021: è®¾ç½®ç•Œé¢UIä¼˜åŒ–æŠ€æœ¯è®¾è®¡

> **æ–‡æ¡£ç±»å‹**: æŠ€æœ¯è®¾è®¡æ–‡æ¡£ (TDD)
> **ç‰ˆæœ¬**: 1.0
> **åˆ›å»ºæ—¥æœŸ**: 2025-12-26
> **è´Ÿè´£äºº**: Kiro
> **å…³è”PRD**: PRD-00021
> **å…³è”FD**: FD-00021
> **å…³è”è°ƒç ”**: RESEARCH-00056
> **çŠ¶æ€**: ğŸ“ è®¾è®¡ä¸­

---

## 1. æŠ€æœ¯æ¦‚è¿°

### 1.1 è®¾è®¡ç›®æ ‡

å°†è®¾ç½®ç•Œé¢ä¸‰ä¸ªé¡µé¢ä»Material Design 3é‡æ„ä¸ºiOSåŸç”ŸInset Groupedé£æ ¼ï¼ŒåŒ…æ‹¬ï¼š
- AIé…ç½®é¡µé¢ (AiConfigScreen)
- æ·»åŠ æœåŠ¡å•†é¡µé¢ (AddProviderScreenï¼Œæ–°å»º)
- ä¸ªäººç”»åƒé¡µé¢ (UserProfileScreen)

### 1.2 æŠ€æœ¯åŸåˆ™

| åŸåˆ™ | è¯´æ˜ |
|------|------|
| ç»„ä»¶å¤ç”¨ | ä¼˜å…ˆå¤ç”¨ç°æœ‰iOSç»„ä»¶ï¼Œå‡å°‘é‡å¤ä»£ç  |
| å•ä¸€èŒè´£ | æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½ |
| çŠ¶æ€æå‡ | çŠ¶æ€ç®¡ç†åœ¨ViewModelå±‚ï¼ŒUIå±‚æ— çŠ¶æ€ |
| æ€§èƒ½ä¼˜å…ˆ | ä½¿ç”¨Composeæœ€ä½³å®è·µï¼Œé¿å…ä¸å¿…è¦çš„é‡ç»„ |

---

## 2. æ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Presentation Layer                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Screens                                                     â”‚
â”‚  â”œâ”€â”€ AiConfigScreen.kt (é‡æ„)                               â”‚
â”‚  â”œâ”€â”€ AddProviderScreen.kt (æ–°å»º)                            â”‚
â”‚  â””â”€â”€ UserProfileScreen.kt (é‡æ„)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  iOS Components (component/ios/)                             â”‚
â”‚  â”œâ”€â”€ IOSLargeTitleBar.kt (æ–°å»º)                             â”‚
â”‚  â”œâ”€â”€ IOSProviderCard.kt (æ–°å»º)                              â”‚
â”‚  â”œâ”€â”€ IOSFormField.kt (æ–°å»º)                                 â”‚
â”‚  â”œâ”€â”€ IOSTestConnectionButton.kt (æ–°å»º)                      â”‚
â”‚  â”œâ”€â”€ IOSModelListItem.kt (æ–°å»º)                             â”‚
â”‚  â”œâ”€â”€ IOSTabSwitcher.kt (æ–°å»º)                               â”‚
â”‚  â”œâ”€â”€ ProfileCompletionCard.kt (æ–°å»º)                        â”‚
â”‚  â”œâ”€â”€ DimensionCard.kt (æ–°å»º)                                â”‚
â”‚  â”œâ”€â”€ EditableTag.kt (æ–°å»º)                                  â”‚
â”‚  â”œâ”€â”€ AddTagButton.kt (æ–°å»º)                                 â”‚
â”‚  â”œâ”€â”€ QuickSelectTags.kt (æ–°å»º)                              â”‚
â”‚  â””â”€â”€ ç°æœ‰ç»„ä»¶å¤ç”¨                                            â”‚
â”‚      â”œâ”€â”€ IOSSettingsItem.kt                                 â”‚
â”‚      â”œâ”€â”€ IOSSettingsSection.kt                              â”‚
â”‚      â”œâ”€â”€ IOSNavigationBar.kt                                â”‚
â”‚      â”œâ”€â”€ IOSSearchBar.kt                                    â”‚
â”‚      â””â”€â”€ IOSSwitch.kt                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ViewModels                                                  â”‚
â”‚  â”œâ”€â”€ AiConfigViewModel.kt (æ‰©å±•)                            â”‚
â”‚  â””â”€â”€ UserProfileViewModel.kt (ä¿æŒ)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Navigation                                                  â”‚
â”‚  â”œâ”€â”€ NavGraph.kt (æ·»åŠ è·¯ç”±)                                 â”‚
â”‚  â””â”€â”€ NavRoutes.kt (æ·»åŠ å¸¸é‡)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ç»„ä»¶å±‚çº§å…³ç³»

```
AiConfigScreen
â”œâ”€â”€ IOSLargeTitleBar
â”œâ”€â”€ IOSSearchBar (å¤ç”¨)
â”œâ”€â”€ IOSSettingsSection (å¤ç”¨)
â”‚   â””â”€â”€ IOSProviderCard (å¤šä¸ª)
â”œâ”€â”€ IOSSettingsSection (å¤ç”¨)
â”‚   â””â”€â”€ IOSSettingsItem (å¤ç”¨ï¼Œå¤šä¸ª)
â””â”€â”€ IOSSettingsSection (å¤ç”¨)
    â””â”€â”€ IOSSettingsItem (å¤ç”¨ï¼Œå¤šä¸ª)

AddProviderScreen
â”œâ”€â”€ IOSNavigationBar (å¤ç”¨)
â”œâ”€â”€ IOSSettingsSection (å¤ç”¨)
â”‚   â””â”€â”€ IOSFormField (å¤šä¸ª)
â”œâ”€â”€ IOSSettingsSection (å¤ç”¨)
â”‚   â””â”€â”€ IOSTestConnectionButton
â”œâ”€â”€ IOSSettingsSection (å¤ç”¨)
â”‚   â””â”€â”€ IOSModelListItem (å¤šä¸ª)
â””â”€â”€ IOSSettingsSection (å¤ç”¨)
    â””â”€â”€ IOSSettingsItem (å¤ç”¨ï¼Œå¤šä¸ª)

UserProfileScreen
â”œâ”€â”€ TopAppBar (Materialï¼Œä¿æŒ)
â”œâ”€â”€ ProfileCompletionCard
â”œâ”€â”€ IOSTabSwitcher
â””â”€â”€ DimensionCard (å¤šä¸ª)
    â”œâ”€â”€ EditableTag (å¤šä¸ª)
    â”œâ”€â”€ AddTagButton
    â””â”€â”€ QuickSelectTags
```

---

## 3. ç»„ä»¶æŠ€æœ¯è§„æ ¼

### 3.1 IOSLargeTitleBar

**æ–‡ä»¶è·¯å¾„**: `presentation/ui/component/ios/IOSLargeTitleBar.kt`

```kotlin
/**
 * iOSé£æ ¼å¤§æ ‡é¢˜å¯¼èˆªæ 
 * 
 * è®¾è®¡è§„æ ¼:
 * - å¤§æ ‡é¢˜: 34sp, Bold, é»‘è‰²
 * - è¿”å›æŒ‰é’®: iOSè“è‰², chevron_leftå›¾æ ‡
 * - æ·»åŠ æŒ‰é’®: iOSè“è‰², addå›¾æ ‡
 * - èƒŒæ™¯: iOSBackground + æ¨¡ç³Šæ•ˆæœ
 * - æœç´¢æ : å¯é€‰ï¼Œåœ†è§’10dp
 */
@Composable
fun IOSLargeTitleBar(
    title: String,
    onBackClick: () -> Unit,
    modifier: Modifier = Modifier,
    onAddClick: (() -> Unit)? = null,
    searchQuery: String = "",
    onSearchQueryChange: ((String) -> Unit)? = null,
    searchPlaceholder: String = "æœç´¢"
)
```

**å®ç°è¦ç‚¹**:
- ä½¿ç”¨`Column`å¸ƒå±€ï¼ŒåŒ…å«å¯¼èˆªæ å’Œå¤§æ ‡é¢˜
- å¯¼èˆªæ é«˜åº¦44dpï¼Œå¤§æ ‡é¢˜åŒºåŸŸé«˜åº¦è‡ªé€‚åº”
- æœç´¢æ ä½¿ç”¨`IOSSearchBar`ç»„ä»¶
- èƒŒæ™¯ä½¿ç”¨`iOSBackground`é¢œè‰²

### 3.2 IOSProviderCard

**æ–‡ä»¶è·¯å¾„**: `presentation/ui/component/ios/IOSProviderCard.kt`

```kotlin
/**
 * iOSé£æ ¼æœåŠ¡å•†å¡ç‰‡
 * 
 * è®¾è®¡è§„æ ¼:
 * - å›¾æ ‡å®¹å™¨: 40x40dp, åœ†è§’10dp
 * - æ ‡é¢˜: 17sp, SemiBold
 * - æè¿°: 15sp, ç°è‰²
 * - é»˜è®¤æ ‡è®°: è“è‰²å‹¾é€‰å›¾æ ‡
 * - åˆ†éš”çº¿: ä»å›¾æ ‡å³ä¾§å¼€å§‹(68dp)
 */
@Composable
fun IOSProviderCard(
    provider: AiProvider,
    isDefault: Boolean,
    onClick: () -> Unit,
    modifier: Modifier = Modifier,
    showDivider: Boolean = true,
    iconBackgroundColor: Color = iOSBlue
)
```

**å®ç°è¦ç‚¹**:
- ä½¿ç”¨`Row`å¸ƒå±€
- å›¾æ ‡å®¹å™¨ä½¿ç”¨`Box`+`background`+`RoundedCornerShape`
- é»˜è®¤æ ‡è®°ä½¿ç”¨`check`å›¾æ ‡ï¼Œé¢œè‰²`iOSBlue`
- åˆ†éš”çº¿ä½¿ç”¨`drawBehind`ç»˜åˆ¶

### 3.3 IOSFormField

**æ–‡ä»¶è·¯å¾„**: `presentation/ui/component/ios/IOSFormField.kt`

```kotlin
/**
 * iOSé£æ ¼è¡¨å•è¾“å…¥
 * 
 * è®¾è®¡è§„æ ¼:
 * - é«˜åº¦: 44dp
 * - æ ‡ç­¾: å›ºå®šå®½åº¦64dp, 17sp
 * - è¾“å…¥æ¡†: å³å¯¹é½, 17sp
 * - åˆ†éš”çº¿: ä»æ ‡ç­¾å³ä¾§å¼€å§‹
 */
@Composable
fun IOSFormField(
    label: String,
    value: String,
    onValueChange: (String) -> Unit,
    modifier: Modifier = Modifier,
    placeholder: String = "",
    isPassword: Boolean = false,
    showDivider: Boolean = true,
    keyboardType: KeyboardType = KeyboardType.Text,
    trailingIcon: @Composable (() -> Unit)? = null
)
```

**å®ç°è¦ç‚¹**:
- ä½¿ç”¨`BasicTextField`è€Œé`OutlinedTextField`
- å¯†ç æ¨¡å¼ä½¿ç”¨`PasswordVisualTransformation`
- è¾“å…¥æ¡†æ–‡å­—å³å¯¹é½`textAlign = TextAlign.End`
- åˆ†éš”çº¿ä»æ ‡ç­¾å³ä¾§å¼€å§‹

### 3.4 IOSTestConnectionButton

**æ–‡ä»¶è·¯å¾„**: `presentation/ui/component/ios/IOSTestConnectionButton.kt`

```kotlin
/**
 * iOSé£æ ¼æµ‹è¯•è¿æ¥æŒ‰é’®
 * 
 * è®¾è®¡è§„æ ¼:
 * - é«˜åº¦: 44dp
 * - æ–‡å­—: iOSè“è‰², 17sp
 * - å›¾æ ‡: wifi_tethering
 * - æˆåŠŸçŠ¶æ€: iOSç»¿è‰² + check_circle
 * - åŠ è½½çŠ¶æ€: æ—‹è½¬syncå›¾æ ‡
 */
@Composable
fun IOSTestConnectionButton(
    isLoading: Boolean,
    isSuccess: Boolean?,
    onClick: () -> Unit,
    modifier: Modifier = Modifier
)
```

**å®ç°è¦ç‚¹**:
- ä¸‰ç§çŠ¶æ€ï¼šé»˜è®¤ã€åŠ è½½ä¸­ã€æˆåŠŸ/å¤±è´¥
- åŠ è½½åŠ¨ç”»ä½¿ç”¨`InfiniteTransition`+`rotate`
- æˆåŠŸçŠ¶æ€æ˜¾ç¤ºç»¿è‰²å‹¾é€‰ï¼Œå¤±è´¥æ˜¾ç¤ºçº¢è‰²å‰

### 3.5 IOSModelListItem

**æ–‡ä»¶è·¯å¾„**: `presentation/ui/component/ios/IOSModelListItem.kt`

```kotlin
/**
 * iOSé£æ ¼æ¨¡å‹åˆ—è¡¨é¡¹
 * 
 * è®¾è®¡è§„æ ¼:
 * - é«˜åº¦: 52dp
 * - æ¨¡å‹å: 17sp
 * - é»˜è®¤æ ‡è®°: è“è‰²èƒŒæ™¯æ ‡ç­¾
 * - æ‹–æ‹½æ‰‹æŸ„: drag_handleå›¾æ ‡
 */
@Composable
fun IOSModelListItem(
    modelId: String,
    isDefault: Boolean,
    onClick: () -> Unit,
    modifier: Modifier = Modifier,
    showDivider: Boolean = true
)
```

### 3.6 IOSTabSwitcher

**æ–‡ä»¶è·¯å¾„**: `presentation/ui/component/ios/IOSTabSwitcher.kt`

```kotlin
/**
 * iOSé£æ ¼Tabåˆ‡æ¢å™¨
 * 
 * è®¾è®¡è§„æ ¼:
 * - åœ†è§’: 12dp
 * - Tabæ–‡å­—: 15sp
 * - é€‰ä¸­æ€: iOSè“è‰², SemiBold
 * - ä¸‹åˆ’çº¿: 2dpé«˜åº¦, åŠ¨ç”»300ms
 */
@Composable
fun IOSTabSwitcher(
    tabs: List<String>,
    selectedIndex: Int,
    onTabSelected: (Int) -> Unit,
    modifier: Modifier = Modifier
)
```

**å®ç°è¦ç‚¹**:
- ä¸‹åˆ’çº¿ä½¿ç”¨`animateDpAsState`å®ç°å¹³æ»‘ç§»åŠ¨
- ä¸‹åˆ’çº¿å®½åº¦ä¸ºTabå®½åº¦çš„ä¸€åŠ
- ä½¿ç”¨`Modifier.offset`æ§åˆ¶ä¸‹åˆ’çº¿ä½ç½®

### 3.7 ProfileCompletionCard

**æ–‡ä»¶è·¯å¾„**: `presentation/ui/component/ios/ProfileCompletionCard.kt`

```kotlin
/**
 * ç”»åƒå®Œæ•´åº¦å¡ç‰‡
 * 
 * è®¾è®¡è§„æ ¼:
 * - åœ†è§’: 12dp
 * - ç™¾åˆ†æ¯”: 28sp, Bold, iOSè“è‰²
 * - è¿›åº¦æ¡: 6dpé«˜åº¦
 * - æ ‡ç­¾æ•°: 11sp, ç°è‰²
 */
@Composable
fun ProfileCompletionCard(
    completeness: Int,
    tagCount: Int,
    modifier: Modifier = Modifier
)
```

**å®ç°è¦ç‚¹**:
- è¿›åº¦æ¡ä½¿ç”¨`LinearProgressIndicator`æˆ–è‡ªå®šä¹‰`Canvas`
- è¿›åº¦åŠ¨ç”»ä½¿ç”¨`animateFloatAsState`

### 3.8 DimensionCard

**æ–‡ä»¶è·¯å¾„**: `presentation/ui/component/ios/DimensionCard.kt`

```kotlin
/**
 * ç»´åº¦å¡ç‰‡ï¼ˆå¯å±•å¼€ï¼‰
 * 
 * è®¾è®¡è§„æ ¼:
 * - åœ†è§’: 12dp
 * - å›¾æ ‡å®¹å™¨: 36x36dp, åœ†è§’10dp
 * - å±•å¼€å›¾æ ‡: expand_less, æ—‹è½¬åŠ¨ç”»
 * - å±•å¼€/æ”¶èµ·åŠ¨ç”»: 200ms
 */
@Composable
fun DimensionCard(
    icon: ImageVector,
    iconBackgroundColor: Color,
    title: String,
    description: String,
    tags: List<String>,
    presetTags: List<String>,
    isExpanded: Boolean,
    onToggleExpand: () -> Unit,
    onAddTag: () -> Unit,
    onEditTag: (String) -> Unit,
    onSelectPresetTag: (String) -> Unit,
    modifier: Modifier = Modifier
)
```

**å®ç°è¦ç‚¹**:
- ä½¿ç”¨`AnimatedVisibility`å®ç°å±•å¼€/æ”¶èµ·
- å›¾æ ‡æ—‹è½¬ä½¿ç”¨`animateFloatAsState`+`graphicsLayer`
- å†…å®¹åŒºåŸŸä½¿ç”¨`animateContentSize`

### 3.9 EditableTag / AddTagButton / QuickSelectTags

```kotlin
// EditableTag
@Composable
fun EditableTag(
    text: String,
    onClick: () -> Unit,
    modifier: Modifier = Modifier
)

// AddTagButton
@Composable
fun AddTagButton(
    onClick: () -> Unit,
    modifier: Modifier = Modifier
)

// QuickSelectTags
@Composable
fun QuickSelectTags(
    tags: List<String>,
    onTagClick: (String) -> Unit,
    modifier: Modifier = Modifier
)
```

---

## 4. é¡µé¢é‡æ„è®¾è®¡

### 4.1 AiConfigScreené‡æ„

**ä¿®æ”¹æ–‡ä»¶**: `presentation/ui/screen/aiconfig/AiConfigScreen.kt`

#### 4.1.1 å¸ƒå±€ç»“æ„å˜æ›´

```kotlin
@Composable
fun AiConfigScreen(
    onNavigateBack: () -> Unit,
    onNavigateToAddProvider: () -> Unit,  // æ–°å¢
    viewModel: AiConfigViewModel = hiltViewModel()
) {
    val uiState by viewModel.uiState.collectAsStateWithLifecycle()
    
    Column(
        modifier = Modifier
            .fillMaxSize()
            .background(iOSBackground)
    ) {
        // 1. å¤§æ ‡é¢˜å¯¼èˆªæ ï¼ˆæ›¿æ¢TopAppBarï¼‰
        IOSLargeTitleBar(
            title = "AI é…ç½®",
            onBackClick = onNavigateBack,
            onAddClick = onNavigateToAddProvider,
            searchQuery = uiState.searchQuery,
            onSearchQueryChange = { viewModel.onEvent(AiConfigUiEvent.UpdateSearchQuery(it)) }
        )
        
        // 2. å†…å®¹åŒºåŸŸ
        LazyColumn {
            // æ¨ç†å¼•æ“åˆ†ç»„
            item {
                IOSSettingsSection(title = "æ¨ç†å¼•æ“") {
                    uiState.filteredProviders.forEachIndexed { index, provider ->
                        IOSProviderCard(
                            provider = provider,
                            isDefault = provider.isDefault,
                            onClick = { viewModel.onEvent(AiConfigUiEvent.SetDefaultProvider(provider.id)) },
                            showDivider = index < uiState.filteredProviders.lastIndex
                        )
                    }
                }
            }
            
            // é€šç”¨é€‰é¡¹åˆ†ç»„
            item {
                IOSSettingsSection(title = "é€šç”¨é€‰é¡¹") {
                    IOSSettingsItem(...)  // ç½‘ç»œä»£ç†
                    IOSSettingsItem(...)  // ç”¨é‡ç»Ÿè®¡
                }
            }
            
            // é«˜çº§è®¾ç½®åˆ†ç»„
            item {
                IOSSettingsSection(title = "é«˜çº§è®¾ç½®") {
                    IOSSettingsItem(...)  // è¯·æ±‚è¶…æ—¶
                    IOSSettingsItem(...)  // æœ€å¤§Tokenæ•°
                }
            }
        }
    }
}
```

#### 4.1.2 çŠ¶æ€æ‰©å±•

```kotlin
// AiConfigUiState.kt æ‰©å±•
data class AiConfigUiState(
    // ç°æœ‰å­—æ®µ...
    
    // æ–°å¢: æœç´¢
    val searchQuery: String = "",
    
    // æ–°å¢: é«˜çº§è®¾ç½®
    val requestTimeout: Int = 30,
    val maxTokens: Int = 4096
) {
    // è®¡ç®—å±æ€§: è¿‡æ»¤åçš„æœåŠ¡å•†åˆ—è¡¨
    val filteredProviders: List<AiProvider>
        get() = if (searchQuery.isBlank()) providers
                else providers.filter { it.name.contains(searchQuery, ignoreCase = true) }
}
```

#### 4.1.3 äº‹ä»¶æ‰©å±•

```kotlin
// AiConfigUiEvent.kt æ‰©å±•
sealed class AiConfigUiEvent {
    // ç°æœ‰äº‹ä»¶...
    
    // æ–°å¢
    data class UpdateSearchQuery(val query: String) : AiConfigUiEvent()
    data class UpdateRequestTimeout(val timeout: Int) : AiConfigUiEvent()
    data class UpdateMaxTokens(val tokens: Int) : AiConfigUiEvent()
}
```

### 4.2 AddProviderScreenæ–°å»º

**æ–°å»ºæ–‡ä»¶**: `presentation/ui/screen/aiconfig/AddProviderScreen.kt`

```kotlin
@Composable
fun AddProviderScreen(
    onNavigateBack: () -> Unit,
    viewModel: AiConfigViewModel = hiltViewModel()
) {
    val uiState by viewModel.uiState.collectAsStateWithLifecycle()
    
    Column(
        modifier = Modifier
            .fillMaxSize()
            .background(iOSBackground)
    ) {
        // 1. å¯¼èˆªæ 
        IOSNavigationBar(
            title = if (uiState.isEditing) "ç¼–è¾‘æœåŠ¡å•†" else "æ·»åŠ æœåŠ¡å•†",
            onCancel = onNavigateBack,
            onDone = { viewModel.onEvent(AiConfigUiEvent.SaveProvider) },
            isDoneEnabled = uiState.isFormValid && !uiState.isSaving
        )
        
        // 2. è¡¨å•å†…å®¹
        LazyColumn {
            // åŸºç¡€ä¿¡æ¯
            item {
                IOSSettingsSection(title = "åŸºç¡€ä¿¡æ¯", footer = "APIå¯†é’¥å°†ä½¿ç”¨åŠ å¯†å­˜å‚¨") {
                    IOSFormField(label = "åç§°", ...)
                    IOSFormField(label = "ç«¯ç‚¹", ...)
                    IOSFormField(label = "å¯†é’¥", isPassword = true, ...)
                }
            }
            
            // æµ‹è¯•è¿æ¥
            item {
                IOSSettingsSection {
                    IOSTestConnectionButton(
                        isLoading = uiState.isTestingConnection,
                        isSuccess = uiState.testConnectionResult?.let { it is TestConnectionResult.Success },
                        onClick = { viewModel.onEvent(AiConfigUiEvent.TestConnection) }
                    )
                }
            }
            
            // æ¨¡å‹åˆ—è¡¨
            item {
                IOSSettingsSection(title = "æ¨¡å‹åˆ—è¡¨", footer = "æ‹–æ‹½è°ƒæ•´é¡ºåºï¼Œç‚¹å‡»è®¾ä¸ºé»˜è®¤") {
                    // è‡ªåŠ¨è·å–æŒ‰é’®
                    // æ‰‹åŠ¨æ·»åŠ æŒ‰é’®
                    // æ¨¡å‹åˆ—è¡¨
                }
            }
            
            // é«˜çº§é€‰é¡¹
            item {
                IOSSettingsSection(title = "é«˜çº§é€‰é¡¹") {
                    IOSSettingsItem(...)  // Temperature
                    IOSSettingsItem(...)  // æœ€å¤§Tokenæ•°
                }
            }
        }
    }
}
```

### 4.3 UserProfileScreené‡æ„

**ä¿®æ”¹æ–‡ä»¶**: `presentation/ui/screen/userprofile/UserProfileScreen.kt`

ä¸»è¦å˜æ›´ï¼š
1. æ›¿æ¢`ProfileCompletenessCard`ä¸º`ProfileCompletionCard`
2. æ›¿æ¢`TabRow`ä¸º`IOSTabSwitcher`
3. æ›¿æ¢`DimensionCard`ä¸ºæ–°çš„iOSé£æ ¼ç‰ˆæœ¬
4. æ›¿æ¢æ ‡ç­¾ç»„ä»¶ä¸º`EditableTag`ã€`AddTagButton`ã€`QuickSelectTags`

---

## 5. å¯¼èˆªè®¾è®¡

### 5.1 è·¯ç”±å®šä¹‰

```kotlin
// NavRoutes.kt
object NavRoutes {
    // ç°æœ‰è·¯ç”±...
    
    // æ–°å¢
    const val ADD_PROVIDER = "add_provider"
    const val EDIT_PROVIDER = "edit_provider/{providerId}"
    
    fun editProvider(providerId: String) = "edit_provider/$providerId"
}
```

### 5.2 å¯¼èˆªå›¾æ›´æ–°

```kotlin
// NavGraph.kt
composable(NavRoutes.ADD_PROVIDER) {
    AddProviderScreen(
        onNavigateBack = { navController.popBackStack() }
    )
}

composable(
    route = NavRoutes.EDIT_PROVIDER,
    arguments = listOf(navArgument("providerId") { type = NavType.StringType })
) { backStackEntry ->
    val providerId = backStackEntry.arguments?.getString("providerId")
    AddProviderScreen(
        onNavigateBack = { navController.popBackStack() },
        providerId = providerId
    )
}
```

---

## 6. ä¸»é¢˜æ‰©å±•

### 6.1 é¢œè‰²å¸¸é‡

å·²åœ¨`Color.kt`ä¸­å®šä¹‰ï¼Œæ— éœ€æ–°å¢ï¼š
- `iOSBackground` (#F2F2F7)
- `iOSBlue` (#007AFF)
- `iOSGreen` (#34C759)
- `iOSRed` (#FF3B30)
- `iOSPurple` (#5856D6)
- `iOSOrange` (#FF9500)
- `iOSTextPrimary`, `iOSTextSecondary`, `iOSTextTertiary`
- `iOSDivider`, `iOSCardBackground`, `iOSPressed`

### 6.2 å°ºå¯¸å¸¸é‡ï¼ˆå¯é€‰æ–°å¢ï¼‰

```kotlin
// Dimensions.kt (å¯é€‰)
object IOSDimensions {
    val PagePadding = 16.dp
    val CardCornerRadius = 12.dp
    val SettingsItemHeight = 44.dp
    val IconContainerSize = 29.dp
    val IconContainerCornerRadius = 7.dp
    val LargeIconContainerSize = 40.dp
    val LargeIconContainerCornerRadius = 10.dp
    val SearchBarHeight = 36.dp
    val SearchBarCornerRadius = 10.dp
    val LargeTitleSize = 34.sp
    val BodySize = 17.sp
    val CaptionSize = 13.sp
}
```

---

## 7. æµ‹è¯•è®¾è®¡

### 7.1 å•å…ƒæµ‹è¯•

| æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•å†…å®¹ |
|----------|----------|
| IOSLargeTitleBarTest.kt | æ¸²æŸ“ã€ç‚¹å‡»å›è°ƒã€æœç´¢è¾“å…¥ |
| IOSProviderCardTest.kt | é»˜è®¤æ ‡è®°æ˜¾ç¤ºã€ç‚¹å‡»äº‹ä»¶ |
| IOSFormFieldTest.kt | è¾“å…¥ã€å¯†ç åˆ‡æ¢ã€éªŒè¯ |
| IOSTestConnectionButtonTest.kt | ä¸‰ç§çŠ¶æ€æ˜¾ç¤ºã€ç‚¹å‡» |
| ProfileCompletionCardTest.kt | è¿›åº¦è®¡ç®—ã€åŠ¨ç”» |
| DimensionCardTest.kt | å±•å¼€/æ”¶èµ·ã€æ ‡ç­¾æ“ä½œ |
| IOSTabSwitcherTest.kt | Tabåˆ‡æ¢ã€ä¸‹åˆ’çº¿åŠ¨ç”» |
| AiConfigViewModelTest.kt | æœç´¢è¿‡æ»¤ã€çŠ¶æ€æ›´æ–° |

### 7.2 UIæµ‹è¯•

| æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•åœºæ™¯ |
|----------|----------|
| AiConfigScreenTest.kt | åˆ—è¡¨æ˜¾ç¤ºã€æœç´¢ã€å¯¼èˆªã€è®¾ç½®é»˜è®¤ |
| AddProviderScreenTest.kt | è¡¨å•å¡«å†™ã€éªŒè¯ã€ä¿å­˜ã€æµ‹è¯•è¿æ¥ |
| UserProfileScreenTest.kt | Tabåˆ‡æ¢ã€æ ‡ç­¾ç®¡ç†ã€å±•å¼€/æ”¶èµ· |

### 7.3 æµ‹è¯•ç”¨ä¾‹ç¤ºä¾‹

```kotlin
// IOSProviderCardTest.kt
class IOSProviderCardTest {
    @get:Rule
    val composeTestRule = createComposeRule()
    
    @Test
    fun `é»˜è®¤æœåŠ¡å•†æ˜¾ç¤ºå‹¾é€‰å›¾æ ‡`() {
        composeTestRule.setContent {
            IOSProviderCard(
                provider = testProvider,
                isDefault = true,
                onClick = {}
            )
        }
        
        composeTestRule.onNodeWithContentDescription("é»˜è®¤").assertIsDisplayed()
    }
    
    @Test
    fun `ç‚¹å‡»å¡ç‰‡è§¦å‘å›è°ƒ`() {
        var clicked = false
        composeTestRule.setContent {
            IOSProviderCard(
                provider = testProvider,
                isDefault = false,
                onClick = { clicked = true }
            )
        }
        
        composeTestRule.onNodeWithText(testProvider.name).performClick()
        assertTrue(clicked)
    }
}
```

---

## 8. æ€§èƒ½ä¼˜åŒ–

### 8.1 åˆ—è¡¨ä¼˜åŒ–

```kotlin
// ä½¿ç”¨keyç¡®ä¿æ­£ç¡®å¤ç”¨
LazyColumn {
    items(
        items = providers,
        key = { it.id }  // é‡è¦ï¼šä½¿ç”¨å”¯ä¸€IDä½œä¸ºkey
    ) { provider ->
        IOSProviderCard(provider = provider, ...)
    }
}
```

### 8.2 æœç´¢ä¼˜åŒ–

```kotlin
// ä½¿ç”¨derivedStateOfé¿å…ä¸å¿…è¦çš„é‡ç»„
val filteredProviders by remember(providers, searchQuery) {
    derivedStateOf {
        if (searchQuery.isBlank()) providers
        else providers.filter { it.name.contains(searchQuery, ignoreCase = true) }
    }
}
```

### 8.3 åŠ¨ç”»ä¼˜åŒ–

```kotlin
// ä½¿ç”¨graphicsLayerè¿›è¡ŒGPUåŠ é€Ÿ
Icon(
    modifier = Modifier.graphicsLayer {
        rotationZ = rotationAngle
    }
)

// ä½¿ç”¨animateContentSizeè€Œéæ‰‹åŠ¨è®¡ç®—é«˜åº¦
Column(
    modifier = Modifier.animateContentSize(
        animationSpec = tween(durationMillis = 200)
    )
)
```

---

## 9. æ–‡ä»¶æ¸…å•

### 9.1 æ–°å»ºæ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | è¯´æ˜ |
|----------|------|
| `component/ios/IOSLargeTitleBar.kt` | å¤§æ ‡é¢˜å¯¼èˆªæ  |
| `component/ios/IOSProviderCard.kt` | æœåŠ¡å•†å¡ç‰‡ |
| `component/ios/IOSFormField.kt` | è¡¨å•è¾“å…¥ |
| `component/ios/IOSTestConnectionButton.kt` | æµ‹è¯•è¿æ¥æŒ‰é’® |
| `component/ios/IOSModelListItem.kt` | æ¨¡å‹åˆ—è¡¨é¡¹ |
| `component/ios/IOSTabSwitcher.kt` | Tabåˆ‡æ¢å™¨ |
| `component/ios/ProfileCompletionCard.kt` | ç”»åƒå®Œæ•´åº¦å¡ç‰‡ |
| `component/ios/DimensionCard.kt` | ç»´åº¦å¡ç‰‡ |
| `component/ios/EditableTag.kt` | å¯ç¼–è¾‘æ ‡ç­¾ |
| `component/ios/AddTagButton.kt` | æ·»åŠ æ ‡ç­¾æŒ‰é’® |
| `component/ios/QuickSelectTags.kt` | å¿«é€Ÿé€‰æ‹©æ ‡ç­¾ |
| `screen/aiconfig/AddProviderScreen.kt` | æ·»åŠ æœåŠ¡å•†é¡µé¢ |

### 9.2 ä¿®æ”¹æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ä¿®æ”¹å†…å®¹ |
|----------|----------|
| `screen/aiconfig/AiConfigScreen.kt` | é‡æ„ä¸ºiOSé£æ ¼ |
| `screen/aiconfig/AiConfigUiState.kt` | æ·»åŠ æœç´¢å’Œé«˜çº§è®¾ç½®å­—æ®µ |
| `screen/aiconfig/AiConfigUiEvent.kt` | æ·»åŠ æ–°äº‹ä»¶ |
| `screen/userprofile/UserProfileScreen.kt` | é‡æ„ä¸ºiOSé£æ ¼ |
| `navigation/NavGraph.kt` | æ·»åŠ æ–°è·¯ç”± |
| `navigation/NavRoutes.kt` | æ·»åŠ è·¯ç”±å¸¸é‡ |

---

## 10. é£é™©ä¸ç¼“è§£

| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| ç»„ä»¶å®ç°å¤æ‚åº¦é«˜ | ä¸­ | ä¸­ | åˆ†é˜¶æ®µå®æ–½ï¼Œä¼˜å…ˆæ ¸å¿ƒç»„ä»¶ |
| å¯¼èˆªä¿®æ”¹å½±å“èŒƒå›´ | ä½ | ä¸­ | å……åˆ†æµ‹è¯•å¯¼èˆªæµç¨‹ |
| åŠ¨ç”»æ€§èƒ½é—®é¢˜ | ä½ | ä½ | ä½¿ç”¨ComposeåŠ¨ç”»æœ€ä½³å®è·µ |
| ä¸ç°æœ‰ä»£ç å†²çª | ä½ | ä½ | ä¿æŒå‘åå…¼å®¹ |

---

## 11. å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | å˜æ›´äºº |
|------|------|----------|--------|
| v1.0 | 2025-12-26 | åˆå§‹ç‰ˆæœ¬ | Kiro |

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**æœ€åæ›´æ–°**: 2025-12-26
**æ–‡æ¡£çŠ¶æ€**: ğŸ“ è®¾è®¡ä¸­
