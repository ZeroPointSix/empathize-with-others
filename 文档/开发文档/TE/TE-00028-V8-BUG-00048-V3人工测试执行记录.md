# TE-00028-V8-BUG-00048-V3人工测试执行记录

## 文档信息

| 项目 | 内容 |
|------|------|
| 文档编号 | TE-00028-V8 |
| 创建日期 | 2026-01-05 |
| 关联BUG | BUG-00048 V3 |
| 测试类型 | 人工测试执行记录 |
| 状态 | ⬜ 待执行 |

---

## 1. 测试环境

| 项目 | 内容 |
|------|------|
| 设备 | MuMu模拟器 (192.0.2.1:7555) |
| 系统版本 | Android 7.0+ |
| 应用版本 | Debug APK |
| 构建时间 | 2026-01-05 |
| 测试人员 | [待填写] |
| 测试日期 | [待填写] |

---

## 2. 基础功能测试

### MT-001: 正常发送和回复

| 项目 | 内容 |
|------|------|
| 测试ID | MT-001 |
| 优先级 | 🟢 低 |
| 操作步骤 | 1. 打开AI军师对话<br>2. 发送消息"你好"<br>3. 等待AI回复完成 |
| 预期结果 | AI回复显示在左侧（白色气泡） |
| 实际结果 | [待填写] |
| 状态 | ⬜ 待执行 |
| 备注 | [待填写] |

### MT-002: 正常重新生成

| 项目 | 内容 |
|------|------|
| 测试ID | MT-002 |
| 优先级 | 🟢 低 |
| 操作步骤 | 1. 完成MT-001<br>2. 点击"重新生成"按钮 |
| 预期结果 | 1. 原AI回复被删除<br>2. 新AI回复正常生成<br>3. 用户消息不变 |
| 实际结果 | [待填写] |
| 状态 | ⬜ 待执行 |
| 备注 | [待填写] |

---

## 3. 核心场景测试

### MT-003: 终止后重新生成（核心）

| 项目 | 内容 |
|------|------|
| 测试ID | MT-003 |
| 优先级 | 🔴 高 |
| 操作步骤 | 1. 发送消息"请帮我分析"<br>2. AI开始回复时点击"停止"<br>3. 确认显示"[用户已停止生成]"<br>4. 点击"重新生成" |
| 预期结果 | 1. 被停止的消息被删除<br>2. 使用"请帮我分析"重新生成<br>3. **不出现新的用户消息**<br>4. 新AI回复正常显示 |
| 实际结果 | [待填写] |
| 状态 | ⬜ 待执行 |
| 备注 | **最重要的测试场景** |

### MT-004: 终止后消息类型验证

| 项目 | 内容 |
|------|------|
| 测试ID | MT-004 |
| 优先级 | 🔴 高 |
| 操作步骤 | 1. 完成MT-003的步骤1-3<br>2. 观察"[用户已停止生成]"消息 |
| 预期结果 | 该消息显示为AI消息（白色气泡，左侧），**不是**用户消息（蓝色气泡，右侧） |
| 实际结果 | [待填写] |
| 状态 | ⬜ 待执行 |
| 备注 | 验证消息类型是否正确 |

### MT-005: 快速停止后重新生成

| 项目 | 内容 |
|------|------|
| 测试ID | MT-005 |
| 优先级 | 🟡 中 |
| 操作步骤 | 1. 发送消息<br>2. 立即点击"停止"（AI刚开始回复）<br>3. 点击"重新生成" |
| 预期结果 | 1. 不出现状态混乱<br>2. 正常重新生成 |
| 实际结果 | [待填写] |
| 状态 | ⬜ 待执行 |
| 备注 | 测试快速操作的容错性 |

---

## 4. 边界场景测试

### MT-006: 多轮对话后重新生成

| 项目 | 内容 |
|------|------|
| 测试ID | MT-006 |
| 优先级 | 🟡 中 |
| 操作步骤 | 1. 发送消息1"第一个问题"<br>2. 等待AI回复完成<br>3. 发送消息2"第二个问题"<br>4. AI开始回复时点击"停止"<br>5. 点击"重新生成" |
| 预期结果 | 使用"第二个问题"重新生成，**不是**"第一个问题" |
| 实际结果 | [待填写] |
| 状态 | ⬜ 待执行 |
| 备注 | 验证时间戳排序逻辑 |

### MT-007: 应用重启后重新生成

| 项目 | 内容 |
|------|------|
| 测试ID | MT-007 |
| 优先级 | 🟡 中 |
| 操作步骤 | 1. 发送消息<br>2. AI开始回复时点击"停止"<br>3. 关闭应用并重新打开<br>4. 进入同一对话<br>5. 点击"重新生成" |
| 预期结果 | 即使应用重启，也能正确找到用户消息并重新生成 |
| 实际结果 | [待填写] |
| 状态 | ⬜ 待执行 |
| 备注 | 验证lastUserInput丢失后的回退逻辑 |

### MT-008: 连续停止和重新生成

| 项目 | 内容 |
|------|------|
| 测试ID | MT-008 |
| 优先级 | 🟢 低 |
| 操作步骤 | 1. 发送消息<br>2. 停止 → 重新生成 → 停止 → 重新生成<br>3. 重复3次 |
| 预期结果 | 每次都能正确重新生成，不出现消息角色错误 |
| 实际结果 | [待填写] |
| 状态 | ⬜ 待执行 |
| 备注 | 测试连续操作的稳定性 |

---

## 5. 异常场景测试

### MT-009: 网络断开时重新生成

| 项目 | 内容 |
|------|------|
| 测试ID | MT-009 |
| 优先级 | 🟢 低 |
| 操作步骤 | 1. 发送消息并停止<br>2. 断开网络<br>3. 点击"重新生成" |
| 预期结果 | 显示网络错误提示，不出现消息角色错误 |
| 实际结果 | [待填写] |
| 状态 | ⬜ 待执行 |
| 备注 | 测试网络异常处理 |

### MT-010: 切换会话后重新生成

| 项目 | 内容 |
|------|------|
| 测试ID | MT-010 |
| 优先级 | 🟢 低 |
| 操作步骤 | 1. 在会话A发送消息并停止<br>2. 切换到会话B<br>3. 切换回会话A<br>4. 点击"重新生成" |
| 预期结果 | 正确使用会话A的用户消息重新生成 |
| 实际结果 | [待填写] |
| 状态 | ⬜ 待执行 |
| 备注 | 测试会话隔离 |

---

## 6. 测试结果汇总

| 测试ID | 测试名称 | 优先级 | 状态 | 结果 |
|--------|----------|--------|------|------|
| MT-001 | 正常发送和回复 | 🟢 | ⬜ | [待填写] |
| MT-002 | 正常重新生成 | 🟢 | ⬜ | [待填写] |
| **MT-003** | **终止后重新生成** | **🔴** | **⬜** | **[待填写]** |
| **MT-004** | **消息类型验证** | **🔴** | **⬜** | **[待填写]** |
| MT-005 | 快速停止后重新生成 | 🟡 | ⬜ | [待填写] |
| MT-006 | 多轮对话后重新生成 | 🟡 | ⬜ | [待填写] |
| MT-007 | 应用重启后重新生成 | 🟡 | ⬜ | [待填写] |
| MT-008 | 连续停止和重新生成 | 🟢 | ⬜ | [待填写] |
| MT-009 | 网络断开时重新生成 | 🟢 | ⬜ | [待填写] |
| MT-010 | 切换会话后重新生成 | 🟢 | ⬜ | [待填写] |

---

## 7. 问题记录

| 问题ID | 发现日期 | 测试用例 | 问题描述 | 严重程度 | 状态 |
|--------|----------|----------|----------|----------|------|
| - | - | - | - | - | - |

---

## 8. 测试总结

### 8.1 测试覆盖
- 基础功能：2个
- 核心场景：3个
- 边界场景：3个
- 异常场景：2个
- **总计**：10个

### 8.2 测试结果
- 通过：[待填写]
- 失败：[待填写]
- 阻塞：[待填写]
- **通过率**：[待填写]%

### 8.3 关键发现
[待填写]

---

## 9. 建议

### 9.1 立即处理
[待填写]

### 9.2 后续优化
[待填写]

---

## 10. 签字确认

| 项目 | 内容 |
|------|------|
| 测试人员 | [待填写] |
| 测试日期 | [待填写] |
| 签字 | [待填写] |
| 确认日期 | [待填写] |

---

**文档版本**: 1.0
**创建日期**: 2026-01-05
**测试状态**: ⬜ 待执行
