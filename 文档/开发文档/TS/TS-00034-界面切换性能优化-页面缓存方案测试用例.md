# 测试用例文档 (TS): 界面切换性能优化 - 页面缓存方案

**文档编号**: TS-00034-界面切换性能优化-页面缓存方案  
**创建日期**: 2026-01-10  
**关联需求**: `文档/开发文档/PRD/PRD-00034-界面切换性能优化-页面缓存方案.md`  
**关联设计**: `文档/开发文档/TDD/TDD-00034-界面切换性能优化-页面缓存方案技术设计.md`  
**状态**: 待执行  
**负责人**: -

---

## 1. 测试范围

- 页面切换动画修复（移除 fadeIn/fadeOut）
- 底部导航页面缓存（BottomNavScaffold）
- 页面状态保持（滚动位置、筛选状态）
- 配置变更后的状态恢复
- 非 Tab 页面导航兼容性

---

## 2. 测试环境

- Android 7.0+ 设备（至少一台低端机）
- Android 12+ 设备（主流机）
- Debug 构建

---

## 3. 功能测试用例

### TS-00034-FT-001: Tab 切换无黑屏

**前置条件**: 应用已启动，当前在联系人列表页

**步骤**:
1. 点击底部「AI军师」Tab
2. 点击底部「设置」Tab
3. 点击底部「联系人」Tab

**预期结果**:
- 切换无黑屏闪动
- 切换延迟 < 100ms
- 页面正常显示

---

### TS-00034-FT-002: 页面状态保持（联系人列表滚动）

**前置条件**: 应用已启动

**步骤**:
1. 在联系人列表滚动到中间位置
2. 切换到「设置」Tab
3. 返回「联系人」Tab

**预期结果**:
- 联系人列表滚动位置保持不变
- 无重新加载闪动

---

### TS-00034-FT-003: 页面状态保持（搜索/筛选状态）

**前置条件**: 联系人列表可搜索

**步骤**:
1. 进入联系人搜索模式，输入关键词
2. 切换到「AI军师」Tab
3. 返回「联系人」Tab

**预期结果**:
- 搜索模式仍保持
- 搜索结果仍可见

---

### TS-00034-FT-004: 非 Tab 页面导航正常

**前置条件**: 应用已启动

**步骤**:
1. 点击任一联系人进入详情页
2. 点击返回
3. 进入设置 → AI 配置页
4. 点击返回

**预期结果**:
- 非 Tab 页面导航正常
- 返回后仍保持当前 Tab 状态
- 无黑屏闪动

---

### TS-00034-FT-005: 配置变更后状态恢复

**前置条件**: 已切换过至少两个 Tab

**步骤**:
1. 旋转屏幕（或切换深色模式）
2. 观察当前 Tab

**预期结果**:
- 当前 Tab 保持不变
- 已访问 Tab 状态可恢复

---

## 4. 性能测试用例

### TS-00034-PT-001: Tab 切换延迟统计

**前置条件**: Debug 构建

**步骤**:
1. 在联系人 Tab 与设置 Tab 之间切换 10 次
2. 记录每次切换的感知延迟

**预期结果**:
- 平均切换延迟 < 100ms
- 无明显卡顿

---

### TS-00034-PT-002: 内存占用增长

**前置条件**: 应用首次启动

**步骤**:
1. 记录启动后内存占用
2. 依次访问 3 个 Tab
3. 再次记录内存占用

**预期结果**:
- 内存增加 < 20MB

---

## 5. 回归测试清单

- 联系人列表加载与搜索
- AI 军师入口与对话页
- 设置页及 AI 配置导航
- 底部导航栏 UI 与点击反馈

---

## 6. 测试结论

- [ ] 通过
- [ ] 未通过

**备注**:


